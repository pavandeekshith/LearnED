/*! For license information please see main.45ceb8a3.js.LICENSE.txt */
(()=>{"use strict";var e={43:(e,t,r)=>{e.exports=r(202)},153:(e,t,r)=>{var n=r(43),a=Symbol.for("react.element"),s=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,r){var n,s={},c=null,u=null;for(n in void 0!==r&&(c=""+r),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)i.call(t,n)&&!l.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===s[n]&&(s[n]=t[n]);return{$$typeof:a,type:e,key:c,ref:u,props:s,_owner:o.current}}t.Fragment=s,t.jsx=c,t.jsxs=c},202:(e,t)=>{var r=Symbol.for("react.element"),n=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p=Object.assign,g={};function v(e,t,r){this.props=e,this.context=t,this.refs=g,this.updater=r||m}function y(){}function x(e,t,r){this.props=e,this.context=t,this.refs=g,this.updater=r||m}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var b=x.prototype=new y;b.constructor=x,p(b,v.prototype),b.isPureReactComponent=!0;var w=Array.isArray,_=Object.prototype.hasOwnProperty,j={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function N(e,t,n){var a,s={},i=null,o=null;if(null!=t)for(a in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(i=""+t.key),t)_.call(t,a)&&!k.hasOwnProperty(a)&&(s[a]=t[a]);var l=arguments.length-2;if(1===l)s.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(a in l=e.defaultProps)void 0===s[a]&&(s[a]=l[a]);return{$$typeof:r,type:e,key:i,ref:o,props:s,_owner:j.current}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===r}var C=/\/+/g;function E(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function T(e,t,a,s,i){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case r:case n:l=!0}}if(l)return i=i(l=e),e=""===s?"."+E(l,0):s,w(i)?(a="",null!=e&&(a=e.replace(C,"$&/")+"/"),T(i,t,a,"",function(e){return e})):null!=i&&(S(i)&&(i=function(e,t){return{$$typeof:r,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,a+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(C,"$&/")+"/")+e)),t.push(i)),1;if(l=0,s=""===s?".":s+":",w(e))for(var c=0;c<e.length;c++){var u=s+E(o=e[c],c);l+=T(o,t,a,u,i)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(o=e.next()).done;)l+=T(o=o.value,t,a,u=s+E(o,c++),i);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function P(e,t,r){if(null==e)return e;var n=[],a=0;return T(e,n,"","",function(e){return t.call(r,e,a++)}),n}function O(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var L={current:null},I={transition:null},A={ReactCurrentDispatcher:L,ReactCurrentBatchConfig:I,ReactCurrentOwner:j};function R(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:P,forEach:function(e,t,r){P(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return P(e,function(){t++}),t},toArray:function(e){return P(e,function(e){return e})||[]},only:function(e){if(!S(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=a,t.Profiler=i,t.PureComponent=x,t.StrictMode=s,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=A,t.act=R,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=p({},e.props),s=e.key,i=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(i=t.ref,o=j.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)_.call(t,c)&&!k.hasOwnProperty(c)&&(a[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)a.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];a.children=l}return{$$typeof:r,type:e.type,key:s,ref:i,props:a,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=N,t.createFactory=function(e){var t=N.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:O}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=I.transition;I.transition={};try{e()}finally{I.transition=t}},t.unstable_act=R,t.useCallback=function(e,t){return L.current.useCallback(e,t)},t.useContext=function(e){return L.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return L.current.useDeferredValue(e)},t.useEffect=function(e,t){return L.current.useEffect(e,t)},t.useId=function(){return L.current.useId()},t.useImperativeHandle=function(e,t,r){return L.current.useImperativeHandle(e,t,r)},t.useInsertionEffect=function(e,t){return L.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return L.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return L.current.useMemo(e,t)},t.useReducer=function(e,t,r){return L.current.useReducer(e,t,r)},t.useRef=function(e){return L.current.useRef(e)},t.useState=function(e){return L.current.useState(e)},t.useSyncExternalStore=function(e,t,r){return L.current.useSyncExternalStore(e,t,r)},t.useTransition=function(){return L.current.useTransition()},t.version="18.3.1"},210:function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=n(r(829)),s=n(r(736));class i{constructor(e){let{headers:t={},schema:r,fetch:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.url=e,this.headers=new Headers(t),this.schemaName=r,this.fetch=n}from(e){const t=new URL("".concat(this.url,"/").concat(e));return new a.default(t,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new i(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{head:r=!1,get:n=!1,count:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var i;let o;const l=new URL("".concat(this.url,"/rpc/").concat(e));let c;r||n?(o=r?"HEAD":"GET",Object.entries(t).filter(e=>{let[t,r]=e;return void 0!==r}).map(e=>{let[t,r]=e;return[t,Array.isArray(r)?"{".concat(r.join(","),"}"):"".concat(r)]}).forEach(e=>{let[t,r]=e;l.searchParams.append(t,r)})):(o="POST",c=t);const u=new Headers(this.headers);return a&&u.set("Prefer","count=".concat(a)),new s.default({method:o,url:l,headers:u,schema:this.schemaName,body:c,fetch:null!==(i=this.fetch)&&void 0!==i?i:fetch})}}t.default=i},234:(e,t)=>{function r(e,t){var r=e.length;e.push(t);e:for(;0<r;){var n=r-1>>>1,a=e[n];if(!(0<s(a,t)))break e;e[n]=t,e[r]=a,r=n}}function n(e){return 0===e.length?null:e[0]}function a(e){if(0===e.length)return null;var t=e[0],r=e.pop();if(r!==t){e[0]=r;e:for(var n=0,a=e.length,i=a>>>1;n<i;){var o=2*(n+1)-1,l=e[o],c=o+1,u=e[c];if(0>s(l,r))c<a&&0>s(u,l)?(e[n]=u,e[c]=r,n=c):(e[n]=l,e[o]=r,n=o);else{if(!(c<a&&0>s(u,r)))break e;e[n]=u,e[c]=r,n=c}}}return t}function s(e,t){var r=e.sortIndex-t.sortIndex;return 0!==r?r:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,f=3,m=!1,p=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,x="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=n(u);null!==t;){if(null===t.callback)a(u);else{if(!(t.startTime<=e))break;a(u),t.sortIndex=t.expirationTime,r(c,t)}t=n(u)}}function w(e){if(g=!1,b(e),!p)if(null!==n(c))p=!0,I(_);else{var t=n(u);null!==t&&A(w,t.startTime-e)}}function _(e,r){p=!1,g&&(g=!1,y(S),S=-1),m=!0;var s=f;try{for(b(r),h=n(c);null!==h&&(!(h.expirationTime>r)||e&&!T());){var i=h.callback;if("function"===typeof i){h.callback=null,f=h.priorityLevel;var o=i(h.expirationTime<=r);r=t.unstable_now(),"function"===typeof o?h.callback=o:h===n(c)&&a(c),b(r)}else a(c);h=n(c)}if(null!==h)var l=!0;else{var d=n(u);null!==d&&A(w,d.startTime-r),l=!1}return l}finally{h=null,f=s,m=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var j,k=!1,N=null,S=-1,C=5,E=-1;function T(){return!(t.unstable_now()-E<C)}function P(){if(null!==N){var e=t.unstable_now();E=e;var r=!0;try{r=N(!0,e)}finally{r?j():(k=!1,N=null)}}else k=!1}if("function"===typeof x)j=function(){x(P)};else if("undefined"!==typeof MessageChannel){var O=new MessageChannel,L=O.port2;O.port1.onmessage=P,j=function(){L.postMessage(null)}}else j=function(){v(P,0)};function I(e){N=e,k||(k=!0,j())}function A(e,r){S=v(function(){e(t.unstable_now())},r)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){p||m||(p=!0,I(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var r=f;f=t;try{return e()}finally{f=r}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=f;f=e;try{return t()}finally{f=r}},t.unstable_scheduleCallback=function(e,a,s){var i=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?i+s:i:s=i,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:d++,callback:a,priorityLevel:e,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>i?(e.sortIndex=s,r(u,e),null===n(c)&&e===n(u)&&(g?(y(S),S=-1):g=!0,A(w,s-i))):(e.sortIndex=o,r(c,e),p||m||(p=!0,I(_))),e},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(e){var t=f;return function(){var r=f;f=t;try{return e.apply(this,arguments)}finally{f=r}}}},286:function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=n(r(630)),s=n(r(611));t.default=class{constructor(e){var t,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=null!==(t=e.shouldThrowOnError)&&void 0!==t&&t,this.signal=e.signal,this.isMaybeSingle=null!==(r=e.isMaybeSingle)&&void 0!==r&&r,e.fetch?this.fetch=e.fetch:"undefined"===typeof fetch?this.fetch=a.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),"GET"!==this.method&&"HEAD"!==this.method&&this.headers.set("Content-Type","application/json");let r=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async e=>{var t,r,n,a;let i=null,o=null,l=null,c=e.status,u=e.statusText;if(e.ok){if("HEAD"!==this.method){const r=await e.text();""===r||(o="text/csv"===this.headers.get("Accept")||this.headers.get("Accept")&&(null===(t=this.headers.get("Accept"))||void 0===t?void 0:t.includes("application/vnd.pgrst.plan+text"))?r:JSON.parse(r))}const a=null===(r=this.headers.get("Prefer"))||void 0===r?void 0:r.match(/count=(exact|planned|estimated)/),s=null===(n=e.headers.get("content-range"))||void 0===n?void 0:n.split("/");a&&s&&s.length>1&&(l=parseInt(s[1])),this.isMaybeSingle&&"GET"===this.method&&Array.isArray(o)&&(o.length>1?(i={code:"PGRST116",details:"Results contain ".concat(o.length," rows, application/vnd.pgrst.object+json requires 1 row"),hint:null,message:"JSON object requested, multiple (or no) rows returned"},o=null,l=null,c=406,u="Not Acceptable"):o=1===o.length?o[0]:null)}else{const t=await e.text();try{i=JSON.parse(t),Array.isArray(i)&&404===e.status&&(o=[],i=null,c=200,u="OK")}catch(d){404===e.status&&""===t?(c=204,u="No Content"):i={message:t}}if(i&&this.isMaybeSingle&&(null===(a=null===i||void 0===i?void 0:i.details)||void 0===a?void 0:a.includes("0 rows"))&&(i=null,c=200,u="OK"),i&&this.shouldThrowOnError)throw new s.default(i)}return{error:i,data:o,count:l,status:c,statusText:u}});return this.shouldThrowOnError||(r=r.catch(e=>{var t,r,n;return{error:{message:"".concat(null!==(t=null===e||void 0===e?void 0:e.name)&&void 0!==t?t:"FetchError",": ").concat(null===e||void 0===e?void 0:e.message),details:"".concat(null!==(r=null===e||void 0===e?void 0:e.stack)&&void 0!==r?r:""),hint:"",code:"".concat(null!==(n=null===e||void 0===e?void 0:e.code)&&void 0!==n?n:"")},data:null,count:null,status:0,statusText:""}})),r.then(e,t)}returns(){return this}overrideTypes(){return this}}},374:function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=n(r(286));class s extends a.default{select(e){let t=!1;const r=(null!==e&&void 0!==e?e:"*").split("").map(e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e){let{ascending:t=!0,nullsFirst:r,foreignTable:n,referencedTable:a=n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=a?"".concat(a,".order"):"order",i=this.url.searchParams.get(s);return this.url.searchParams.set(s,"".concat(i?"".concat(i,","):"").concat(e,".").concat(t?"asc":"desc").concat(void 0===r?"":r?".nullsfirst":".nullslast")),this}limit(e){let{foreignTable:t,referencedTable:r=t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n="undefined"===typeof r?"limit":"".concat(r,".limit");return this.url.searchParams.set(n,"".concat(e)),this}range(e,t){let{foreignTable:r,referencedTable:n=r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a="undefined"===typeof n?"offset":"".concat(n,".offset"),s="undefined"===typeof n?"limit":"".concat(n,".limit");return this.url.searchParams.set(a,"".concat(e)),this.url.searchParams.set(s,"".concat(t-e+1)),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return"GET"===this.method?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain(){let{analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:n=!1,wal:a=!1,format:s="text"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var i;const o=[e?"analyze":null,t?"verbose":null,r?"settings":null,n?"buffers":null,a?"wal":null].filter(Boolean).join("|"),l=null!==(i=this.headers.get("Accept"))&&void 0!==i?i:"application/json";return this.headers.set("Accept","application/vnd.pgrst.plan+".concat(s,'; for="').concat(l,'"; options=').concat(o,";")),this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer","max-affected=".concat(e)),this}}t.default=s},391:(e,t,r)=>{var n=r(950);t.createRoot=n.createRoot,t.hydrateRoot=n.hydrateRoot},579:(e,t,r)=>{e.exports=r(153)},611:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});class r extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}t.default=r},630:(e,t,r)=>{r.r(t),r.d(t,{Headers:()=>i,Request:()=>o,Response:()=>l,default:()=>s,fetch:()=>a});var n=function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof r.g)return r.g;throw new Error("unable to locate global object")}();const a=n.fetch,s=n.fetch.bind(n),i=n.Headers,o=n.Request,l=n.Response},730:(e,t,r)=>{var n=r(43),a=r(853);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)i.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},m={};function p(e,t,r,n,a,s,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=i}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new p(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new p(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new p(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new p(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new p(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new p(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new p(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new p(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new p(e,5,!1,e.toLowerCase(),null,!1,!1)});var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function x(e,t,r,n){var a=g.hasOwnProperty(t)?g[t]:null;(null!==a?0!==a.type:n||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,r,n){if(null===t||"undefined"===typeof t||function(e,t,r,n){if(null!==r&&0===r.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!n&&(null!==r?!r.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,r,n))return!0;if(n)return!1;if(null!==r)switch(r.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,r,a,n)&&(r=null),n||null===a?function(e){return!!d.call(m,e)||!d.call(f,e)&&(h.test(e)?m[e]=!0:(f[e]=!0,!1))}(t)&&(null===r?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=null===r?3!==a.type&&"":r:(t=a.attributeName,n=a.attributeNamespace,null===r?e.removeAttribute(t):(r=3===(a=a.type)||4===a&&!0===r?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(v,y);g[t]=new p(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(v,y);g[t]=new p(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(v,y);g[t]=new p(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new p(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new p("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new p(e,1,!1,e.toLowerCase(),null,!0,!0)});var b=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),_=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),C=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),L=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var I=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var A=Symbol.iterator;function R(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=A&&e[A]||e["@@iterator"])?e:null}var D,M=Object.assign;function U(e){if(void 0===D)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);D=t&&t[1]||""}return"\n"+D+e}var z=!1;function F(e,t){if(!e||z)return"";z=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var n=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){n=c}e.call(t.prototype)}else{try{throw Error()}catch(c){n=c}e()}}catch(c){if(c&&n&&"string"===typeof c.stack){for(var a=c.stack.split("\n"),s=n.stack.split("\n"),i=a.length-1,o=s.length-1;1<=i&&0<=o&&a[i]!==s[o];)o--;for(;1<=i&&0<=o;i--,o--)if(a[i]!==s[o]){if(1!==i||1!==o)do{if(i--,0>--o||a[i]!==s[o]){var l="\n"+a[i].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=i&&0<=o);break}}}finally{z=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?U(e):""}function B(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=F(e.type,!1);case 11:return e=F(e.type.render,!1);case 1:return e=F(e.type,!0);default:return""}}function q(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case j:return"Fragment";case _:return"Portal";case N:return"Profiler";case k:return"StrictMode";case T:return"Suspense";case P:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case S:return(e._context.displayName||"Context")+".Provider";case E:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case O:return null!==(t=e.displayName||null)?t:q(e.type)||"Memo";case L:t=e._payload,e=e._init;try{return q(e(t))}catch(r){}}return null}function W(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return q(t);case 8:return t===k?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function V(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function G(e){e._valueTracker||(e._valueTracker=function(e){var t=V(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof r&&"function"===typeof r.get&&"function"===typeof r.set){var a=r.get,s=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){n=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=V(e)?e.checked?"true":"false":e.value),(e=n)!==r&&(t.setValue(e),!0)}function $(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function J(e,t){var r=t.checked;return M({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=r?r:e._wrapperState.initialChecked})}function Q(e,t){var r=null==t.defaultValue?"":t.defaultValue,n=null!=t.checked?t.checked:t.defaultChecked;r=H(null!=t.value?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Y(e,t){null!=(t=t.checked)&&x(e,"checked",t,!1)}function X(e,t){Y(e,t);var r=H(t.value),n=t.type;if(null!=r)"number"===n?(0===r&&""===e.value||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if("submit"===n||"reset"===n)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,r):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!("submit"!==n&&"reset"!==n||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}""!==(r=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==r&&(e.name=r)}function ee(e,t,r){"number"===t&&$(e.ownerDocument)===e||(null==r?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var te=Array.isArray;function re(e,t,r,n){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&n&&(e[r].defaultSelected=!0)}else{for(r=""+H(r),t=null,a=0;a<e.length;a++){if(e[a].value===r)return e[a].selected=!0,void(n&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function ne(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return M({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ae(e,t){var r=t.value;if(null==r){if(r=t.children,t=t.defaultValue,null!=r){if(null!=t)throw Error(s(92));if(te(r)){if(1<r.length)throw Error(s(93));r=r[0]}t=r}null==t&&(t=""),r=t}e._wrapperState={initialValue:H(r)}}function se(e,t){var r=H(t.value),n=H(t.defaultValue);null!=r&&((r=""+r)!==e.value&&(e.value=r),null==t.defaultValue&&e.defaultValue!==r&&(e.defaultValue=r)),null!=n&&(e.defaultValue=""+n)}function ie(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,r,n){MSApp.execUnsafeLocalFunction(function(){return ue(e,t)})}:ue);function he(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&3===r.nodeType)return void(r.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},me=["Webkit","ms","Moz","O"];function pe(e,t,r){return null==t||"boolean"===typeof t||""===t?"":r||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var r in e=e.style,t)if(t.hasOwnProperty(r)){var n=0===r.indexOf("--"),a=pe(r,t[r],n);"float"===r&&(r="cssFloat"),n?e.setProperty(r,a):e[r]=a}}Object.keys(fe).forEach(function(e){me.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]})});var ve=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function xe(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var _e=null,je=null,ke=null;function Ne(e){if(e=xa(e)){if("function"!==typeof _e)throw Error(s(280));var t=e.stateNode;t&&(t=wa(t),_e(e.stateNode,e.type,t))}}function Se(e){je?ke?ke.push(e):ke=[e]:je=e}function Ce(){if(je){var e=je,t=ke;if(ke=je=null,Ne(e),t)for(e=0;e<t.length;e++)Ne(t[e])}}function Ee(e,t){return e(t)}function Te(){}var Pe=!1;function Oe(e,t,r){if(Pe)return e(t,r);Pe=!0;try{return Ee(e,t,r)}finally{Pe=!1,(null!==je||null!==ke)&&(Te(),Ce())}}function Le(e,t){var r=e.stateNode;if(null===r)return null;var n=wa(r);if(null===n)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(n=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!n;break e;default:e=!1}if(e)return null;if(r&&"function"!==typeof r)throw Error(s(231,t,typeof r));return r}var Ie=!1;if(u)try{var Ae={};Object.defineProperty(Ae,"passive",{get:function(){Ie=!0}}),window.addEventListener("test",Ae,Ae),window.removeEventListener("test",Ae,Ae)}catch(ue){Ie=!1}function Re(e,t,r,n,a,s,i,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(r,c)}catch(u){this.onError(u)}}var De=!1,Me=null,Ue=!1,ze=null,Fe={onError:function(e){De=!0,Me=e}};function Be(e,t,r,n,a,s,i,o,l){De=!1,Me=null,Re.apply(Fe,arguments)}function qe(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(r=t.return),e=t.return}while(e)}return 3===t.tag?r:null}function We(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(qe(e)!==e)throw Error(s(188))}function Ve(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=qe(e)))throw Error(s(188));return t!==e?null:e}for(var r=e,n=t;;){var a=r.return;if(null===a)break;var i=a.alternate;if(null===i){if(null!==(n=a.return)){r=n;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===r)return He(a),e;if(i===n)return He(a),t;i=i.sibling}throw Error(s(188))}if(r.return!==n.return)r=a,n=i;else{for(var o=!1,l=a.child;l;){if(l===r){o=!0,r=a,n=i;break}if(l===n){o=!0,n=a,r=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===r){o=!0,r=i,n=a;break}if(l===n){o=!0,n=i,r=a;break}l=l.sibling}if(!o)throw Error(s(189))}}if(r.alternate!==n)throw Error(s(190))}if(3!==r.tag)throw Error(s(188));return r.stateNode.current===r?e:t}(e))?Ge(e):null}function Ge(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ge(e);if(null!==t)return t;e=e.sibling}return null}var Ke=a.unstable_scheduleCallback,$e=a.unstable_cancelCallback,Je=a.unstable_shouldYield,Qe=a.unstable_requestPaint,Ye=a.unstable_now,Xe=a.unstable_getCurrentPriorityLevel,Ze=a.unstable_ImmediatePriority,et=a.unstable_UserBlockingPriority,tt=a.unstable_NormalPriority,rt=a.unstable_LowPriority,nt=a.unstable_IdlePriority,at=null,st=null;var it=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var r=e.pendingLanes;if(0===r)return 0;var n=0,a=e.suspendedLanes,s=e.pingedLanes,i=268435455&r;if(0!==i){var o=i&~a;0!==o?n=dt(o):0!==(s&=i)&&(n=dt(s))}else 0!==(i=r&~a)?n=dt(i):0!==s&&(n=dt(s));if(0===n)return 0;if(0!==t&&t!==n&&0===(t&a)&&((a=n&-n)>=(s=t&-t)||16===a&&0!==(4194240&s)))return t;if(0!==(4&n)&&(n|=16&r),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=n;0<t;)a=1<<(r=31-it(t)),n|=e[r],t&=~a;return n}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function mt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function pt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function vt(e,t,r){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-it(t)]=r}function yt(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-it(r),a=1<<n;a&t|e[n]&t&&(e[n]|=t),r&=~a}}var xt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,_t,jt,kt,Nt,St=!1,Ct=[],Et=null,Tt=null,Pt=null,Ot=new Map,Lt=new Map,It=[],At="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Rt(e,t){switch(e){case"focusin":case"focusout":Et=null;break;case"dragenter":case"dragleave":Tt=null;break;case"mouseover":case"mouseout":Pt=null;break;case"pointerover":case"pointerout":Ot.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Lt.delete(t.pointerId)}}function Dt(e,t,r,n,a,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:s,targetContainers:[a]},null!==t&&(null!==(t=xa(t))&&_t(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function Mt(e){var t=ya(e.target);if(null!==t){var r=qe(t);if(null!==r)if(13===(t=r.tag)){if(null!==(t=We(r)))return e.blockedOn=t,void Nt(e.priority,function(){jt(r)})}else if(3===t&&r.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===r.tag?r.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var r=Jt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==r)return null!==(t=xa(r))&&_t(t),e.blockedOn=r,!1;var n=new(r=e.nativeEvent).constructor(r.type,r);be=n,r.target.dispatchEvent(n),be=null,t.shift()}return!0}function zt(e,t,r){Ut(e)&&r.delete(t)}function Ft(){St=!1,null!==Et&&Ut(Et)&&(Et=null),null!==Tt&&Ut(Tt)&&(Tt=null),null!==Pt&&Ut(Pt)&&(Pt=null),Ot.forEach(zt),Lt.forEach(zt)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,St||(St=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,Ft)))}function qt(e){function t(t){return Bt(t,e)}if(0<Ct.length){Bt(Ct[0],e);for(var r=1;r<Ct.length;r++){var n=Ct[r];n.blockedOn===e&&(n.blockedOn=null)}}for(null!==Et&&Bt(Et,e),null!==Tt&&Bt(Tt,e),null!==Pt&&Bt(Pt,e),Ot.forEach(t),Lt.forEach(t),r=0;r<It.length;r++)(n=It[r]).blockedOn===e&&(n.blockedOn=null);for(;0<It.length&&null===(r=It[0]).blockedOn;)Mt(r),null===r.blockedOn&&It.shift()}var Wt=b.ReactCurrentBatchConfig,Ht=!0;function Vt(e,t,r,n){var a=xt,s=Wt.transition;Wt.transition=null;try{xt=1,Kt(e,t,r,n)}finally{xt=a,Wt.transition=s}}function Gt(e,t,r,n){var a=xt,s=Wt.transition;Wt.transition=null;try{xt=4,Kt(e,t,r,n)}finally{xt=a,Wt.transition=s}}function Kt(e,t,r,n){if(Ht){var a=Jt(e,t,r,n);if(null===a)Hn(e,t,n,$t,r),Rt(e,n);else if(function(e,t,r,n,a){switch(t){case"focusin":return Et=Dt(Et,e,t,r,n,a),!0;case"dragenter":return Tt=Dt(Tt,e,t,r,n,a),!0;case"mouseover":return Pt=Dt(Pt,e,t,r,n,a),!0;case"pointerover":var s=a.pointerId;return Ot.set(s,Dt(Ot.get(s)||null,e,t,r,n,a)),!0;case"gotpointercapture":return s=a.pointerId,Lt.set(s,Dt(Lt.get(s)||null,e,t,r,n,a)),!0}return!1}(a,e,t,r,n))n.stopPropagation();else if(Rt(e,n),4&t&&-1<At.indexOf(e)){for(;null!==a;){var s=xa(a);if(null!==s&&wt(s),null===(s=Jt(e,t,r,n))&&Hn(e,t,n,$t,r),s===a)break;a=s}null!==a&&n.stopPropagation()}else Hn(e,t,n,null,r)}}var $t=null;function Jt(e,t,r,n){if($t=null,null!==(e=ya(e=we(n))))if(null===(t=qe(e)))e=null;else if(13===(r=t.tag)){if(null!==(e=We(t)))return e;e=null}else if(3===r){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return $t=e,null}function Qt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case rt:return 16;case nt:return 536870912;default:return 16}default:return 16}}var Yt=null,Xt=null,Zt=null;function er(){if(Zt)return Zt;var e,t,r=Xt,n=r.length,a="value"in Yt?Yt.value:Yt.textContent,s=a.length;for(e=0;e<n&&r[e]===a[e];e++);var i=n-e;for(t=1;t<=i&&r[n-t]===a[s-t];t++);return Zt=a.slice(e,1<t?1-t:void 0)}function tr(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function rr(){return!0}function nr(){return!1}function ar(e){function t(t,r,n,a,s){for(var i in this._reactName=t,this._targetInst=n,this.type=r,this.nativeEvent=a,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(i)&&(t=e[i],this[i]=t?t(a):a[i]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?rr:nr,this.isPropagationStopped=nr,this}return M(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=rr)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=rr)},persist:function(){},isPersistent:rr}),t}var sr,ir,or,lr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cr=ar(lr),ur=M({},lr,{view:0,detail:0}),dr=ar(ur),hr=M({},ur,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kr,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==or&&(or&&"mousemove"===e.type?(sr=e.screenX-or.screenX,ir=e.screenY-or.screenY):ir=sr=0,or=e),sr)},movementY:function(e){return"movementY"in e?e.movementY:ir}}),fr=ar(hr),mr=ar(M({},hr,{dataTransfer:0})),pr=ar(M({},ur,{relatedTarget:0})),gr=ar(M({},lr,{animationName:0,elapsedTime:0,pseudoElement:0})),vr=M({},lr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),yr=ar(vr),xr=ar(M({},lr,{data:0})),br={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_r={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jr(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=_r[e])&&!!t[e]}function kr(){return jr}var Nr=M({},ur,{key:function(e){if(e.key){var t=br[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tr(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?wr[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kr,charCode:function(e){return"keypress"===e.type?tr(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tr(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Sr=ar(Nr),Cr=ar(M({},hr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Er=ar(M({},ur,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kr})),Tr=ar(M({},lr,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pr=M({},hr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Or=ar(Pr),Lr=[9,13,27,32],Ir=u&&"CompositionEvent"in window,Ar=null;u&&"documentMode"in document&&(Ar=document.documentMode);var Rr=u&&"TextEvent"in window&&!Ar,Dr=u&&(!Ir||Ar&&8<Ar&&11>=Ar),Mr=String.fromCharCode(32),Ur=!1;function zr(e,t){switch(e){case"keyup":return-1!==Lr.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Fr(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Br=!1;var qr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qr[e.type]:"textarea"===t}function Hr(e,t,r,n){Se(n),0<(t=Gn(t,"onChange")).length&&(r=new cr("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Vr=null,Gr=null;function Kr(e){Un(e,0)}function $r(e){if(K(ba(e)))return e}function Jr(e,t){if("change"===e)return t}var Qr=!1;if(u){var Yr;if(u){var Xr="oninput"in document;if(!Xr){var Zr=document.createElement("div");Zr.setAttribute("oninput","return;"),Xr="function"===typeof Zr.oninput}Yr=Xr}else Yr=!1;Qr=Yr&&(!document.documentMode||9<document.documentMode)}function en(){Vr&&(Vr.detachEvent("onpropertychange",tn),Gr=Vr=null)}function tn(e){if("value"===e.propertyName&&$r(Gr)){var t=[];Hr(t,Gr,e,we(e)),Oe(Kr,t)}}function rn(e,t,r){"focusin"===e?(en(),Gr=r,(Vr=t).attachEvent("onpropertychange",tn)):"focusout"===e&&en()}function nn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return $r(Gr)}function an(e,t){if("click"===e)return $r(t)}function sn(e,t){if("input"===e||"change"===e)return $r(t)}var on="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ln(e,t){if(on(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!d.call(t,a)||!on(e[a],t[a]))return!1}return!0}function cn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function un(e,t){var r,n=cn(e);for(e=0;n;){if(3===n.nodeType){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=cn(n)}}function dn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hn(){for(var e=window,t=$();t instanceof e.HTMLIFrameElement;){try{var r="string"===typeof t.contentWindow.location.href}catch(n){r=!1}if(!r)break;t=$((e=t.contentWindow).document)}return t}function fn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function mn(e){var t=hn(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&dn(r.ownerDocument.documentElement,r)){if(null!==n&&fn(r))if(t=n.start,void 0===(e=n.end)&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if((e=(t=r.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var a=r.textContent.length,s=Math.min(n.start,a);n=void 0===n.end?s:Math.min(n.end,a),!e.extend&&s>n&&(a=n,n=s,s=a),a=un(r,s);var i=un(r,n);a&&i&&(1!==e.rangeCount||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&((t=t.createRange()).setStart(a.node,a.offset),e.removeAllRanges(),s>n?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}for(t=[],e=r;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof r.focus&&r.focus(),r=0;r<t.length;r++)(e=t[r]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var pn=u&&"documentMode"in document&&11>=document.documentMode,gn=null,vn=null,yn=null,xn=!1;function bn(e,t,r){var n=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;xn||null==gn||gn!==$(n)||("selectionStart"in(n=gn)&&fn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},yn&&ln(yn,n)||(yn=n,0<(n=Gn(vn,"onSelect")).length&&(t=new cr("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=gn)))}function wn(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var _n={animationend:wn("Animation","AnimationEnd"),animationiteration:wn("Animation","AnimationIteration"),animationstart:wn("Animation","AnimationStart"),transitionend:wn("Transition","TransitionEnd")},jn={},kn={};function Nn(e){if(jn[e])return jn[e];if(!_n[e])return e;var t,r=_n[e];for(t in r)if(r.hasOwnProperty(t)&&t in kn)return jn[e]=r[t];return e}u&&(kn=document.createElement("div").style,"AnimationEvent"in window||(delete _n.animationend.animation,delete _n.animationiteration.animation,delete _n.animationstart.animation),"TransitionEvent"in window||delete _n.transitionend.transition);var Sn=Nn("animationend"),Cn=Nn("animationiteration"),En=Nn("animationstart"),Tn=Nn("transitionend"),Pn=new Map,On="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ln(e,t){Pn.set(e,t),l(t,[e])}for(var In=0;In<On.length;In++){var An=On[In];Ln(An.toLowerCase(),"on"+(An[0].toUpperCase()+An.slice(1)))}Ln(Sn,"onAnimationEnd"),Ln(Cn,"onAnimationIteration"),Ln(En,"onAnimationStart"),Ln("dblclick","onDoubleClick"),Ln("focusin","onFocus"),Ln("focusout","onBlur"),Ln(Tn,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Dn=new Set("cancel close invalid load scroll toggle".split(" ").concat(Rn));function Mn(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,function(e,t,r,n,a,i,o,l,c){if(Be.apply(this,arguments),De){if(!De)throw Error(s(198));var u=Me;De=!1,Me=null,Ue||(Ue=!0,ze=u)}}(n,t,void 0,e),e.currentTarget=null}function Un(e,t){t=0!==(4&t);for(var r=0;r<e.length;r++){var n=e[r],a=n.event;n=n.listeners;e:{var s=void 0;if(t)for(var i=n.length-1;0<=i;i--){var o=n[i],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&a.isPropagationStopped())break e;Mn(a,o,c),s=l}else for(i=0;i<n.length;i++){if(l=(o=n[i]).instance,c=o.currentTarget,o=o.listener,l!==s&&a.isPropagationStopped())break e;Mn(a,o,c),s=l}}}if(Ue)throw e=ze,Ue=!1,ze=null,e}function zn(e,t){var r=t[pa];void 0===r&&(r=t[pa]=new Set);var n=e+"__bubble";r.has(n)||(Wn(t,e,2,!1),r.add(n))}function Fn(e,t,r){var n=0;t&&(n|=4),Wn(r,e,n,t)}var Bn="_reactListening"+Math.random().toString(36).slice(2);function qn(e){if(!e[Bn]){e[Bn]=!0,i.forEach(function(t){"selectionchange"!==t&&(Dn.has(t)||Fn(t,!1,e),Fn(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Bn]||(t[Bn]=!0,Fn("selectionchange",!1,t))}}function Wn(e,t,r,n){switch(Qt(t)){case 1:var a=Vt;break;case 4:a=Gt;break;default:a=Kt}r=a.bind(null,t,r,e),a=void 0,!Ie||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),n?void 0!==a?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):void 0!==a?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function Hn(e,t,r,n,a){var s=n;if(0===(1&t)&&0===(2&t)&&null!==n)e:for(;;){if(null===n)return;var i=n.tag;if(3===i||4===i){var o=n.stateNode.containerInfo;if(o===a||8===o.nodeType&&o.parentNode===a)break;if(4===i)for(i=n.return;null!==i;){var l=i.tag;if((3===l||4===l)&&((l=i.stateNode.containerInfo)===a||8===l.nodeType&&l.parentNode===a))return;i=i.return}for(;null!==o;){if(null===(i=ya(o)))return;if(5===(l=i.tag)||6===l){n=s=i;continue e}o=o.parentNode}}n=n.return}Oe(function(){var n=s,a=we(r),i=[];e:{var o=Pn.get(e);if(void 0!==o){var l=cr,c=e;switch(e){case"keypress":if(0===tr(r))break e;case"keydown":case"keyup":l=Sr;break;case"focusin":c="focus",l=pr;break;case"focusout":c="blur",l=pr;break;case"beforeblur":case"afterblur":l=pr;break;case"click":if(2===r.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=fr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Er;break;case Sn:case Cn:case En:l=gr;break;case Tn:l=Tr;break;case"scroll":l=dr;break;case"wheel":l=Or;break;case"copy":case"cut":case"paste":l=yr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Cr}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==o?o+"Capture":null:o;u=[];for(var f,m=n;null!==m;){var p=(f=m).stateNode;if(5===f.tag&&null!==p&&(f=p,null!==h&&(null!=(p=Le(m,h))&&u.push(Vn(m,p,f)))),d)break;m=m.return}0<u.length&&(o=new l(o,c,null,r,a),i.push({event:o,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||r===be||!(c=r.relatedTarget||r.fromElement)||!ya(c)&&!c[ma])&&(l||o)&&(o=a.window===a?a:(o=a.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=n,null!==(c=(c=r.relatedTarget||r.toElement)?ya(c):null)&&(c!==(d=qe(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=n),l!==c)){if(u=fr,p="onMouseLeave",h="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(u=Cr,p="onPointerLeave",h="onPointerEnter",m="pointer"),d=null==l?o:ba(l),f=null==c?o:ba(c),(o=new u(p,m+"leave",l,r,a)).target=d,o.relatedTarget=f,p=null,ya(a)===n&&((u=new u(h,m+"enter",c,r,a)).target=f,u.relatedTarget=d,p=u),d=p,l&&c)e:{for(h=c,m=0,f=u=l;f;f=Kn(f))m++;for(f=0,p=h;p;p=Kn(p))f++;for(;0<m-f;)u=Kn(u),m--;for(;0<f-m;)h=Kn(h),f--;for(;m--;){if(u===h||null!==h&&u===h.alternate)break e;u=Kn(u),h=Kn(h)}u=null}else u=null;null!==l&&$n(i,o,l,u,!1),null!==c&&null!==d&&$n(i,d,c,u,!0)}if("select"===(l=(o=n?ba(n):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=Jr;else if(Wr(o))if(Qr)g=sn;else{g=nn;var v=rn}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=an);switch(g&&(g=g(e,n))?Hr(i,g,r,a):(v&&v(e,o,n),"focusout"===e&&(v=o._wrapperState)&&v.controlled&&"number"===o.type&&ee(o,"number",o.value)),v=n?ba(n):window,e){case"focusin":(Wr(v)||"true"===v.contentEditable)&&(gn=v,vn=n,yn=null);break;case"focusout":yn=vn=gn=null;break;case"mousedown":xn=!0;break;case"contextmenu":case"mouseup":case"dragend":xn=!1,bn(i,r,a);break;case"selectionchange":if(pn)break;case"keydown":case"keyup":bn(i,r,a)}var y;if(Ir)e:{switch(e){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else Br?zr(e,r)&&(x="onCompositionEnd"):"keydown"===e&&229===r.keyCode&&(x="onCompositionStart");x&&(Dr&&"ko"!==r.locale&&(Br||"onCompositionStart"!==x?"onCompositionEnd"===x&&Br&&(y=er()):(Xt="value"in(Yt=a)?Yt.value:Yt.textContent,Br=!0)),0<(v=Gn(n,x)).length&&(x=new xr(x,e,null,r,a),i.push({event:x,listeners:v}),y?x.data=y:null!==(y=Fr(r))&&(x.data=y))),(y=Rr?function(e,t){switch(e){case"compositionend":return Fr(t);case"keypress":return 32!==t.which?null:(Ur=!0,Mr);case"textInput":return(e=t.data)===Mr&&Ur?null:e;default:return null}}(e,r):function(e,t){if(Br)return"compositionend"===e||!Ir&&zr(e,t)?(e=er(),Zt=Xt=Yt=null,Br=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Dr&&"ko"!==t.locale?null:t.data}}(e,r))&&(0<(n=Gn(n,"onBeforeInput")).length&&(a=new xr("onBeforeInput","beforeinput",null,r,a),i.push({event:a,listeners:n}),a.data=y))}Un(i,t)})}function Vn(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Gn(e,t){for(var r=t+"Capture",n=[];null!==e;){var a=e,s=a.stateNode;5===a.tag&&null!==s&&(a=s,null!=(s=Le(e,r))&&n.unshift(Vn(e,s,a)),null!=(s=Le(e,t))&&n.push(Vn(e,s,a))),e=e.return}return n}function Kn(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function $n(e,t,r,n,a){for(var s=t._reactName,i=[];null!==r&&r!==n;){var o=r,l=o.alternate,c=o.stateNode;if(null!==l&&l===n)break;5===o.tag&&null!==c&&(o=c,a?null!=(l=Le(r,s))&&i.unshift(Vn(r,l,o)):a||null!=(l=Le(r,s))&&i.push(Vn(r,l,o))),r=r.return}0!==i.length&&e.push({event:t,listeners:i})}var Jn=/\r\n?/g,Qn=/\u0000|\uFFFD/g;function Yn(e){return("string"===typeof e?e:""+e).replace(Jn,"\n").replace(Qn,"")}function Xn(e,t,r){if(t=Yn(t),Yn(e)!==t&&r)throw Error(s(425))}function Zn(){}var ea=null,ta=null;function ra(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var na="function"===typeof setTimeout?setTimeout:void 0,aa="function"===typeof clearTimeout?clearTimeout:void 0,sa="function"===typeof Promise?Promise:void 0,ia="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof sa?function(e){return sa.resolve(null).then(e).catch(oa)}:na;function oa(e){setTimeout(function(){throw e})}function la(e,t){var r=t,n=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&8===a.nodeType)if("/$"===(r=a.data)){if(0===n)return e.removeChild(a),void qt(t);n--}else"$"!==r&&"$?"!==r&&"$!"!==r||n++;r=a}while(r);qt(t)}function ca(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ua(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var r=e.data;if("$"===r||"$!"===r||"$?"===r){if(0===t)return e;t--}else"/$"===r&&t++}e=e.previousSibling}return null}var da=Math.random().toString(36).slice(2),ha="__reactFiber$"+da,fa="__reactProps$"+da,ma="__reactContainer$"+da,pa="__reactEvents$"+da,ga="__reactListeners$"+da,va="__reactHandles$"+da;function ya(e){var t=e[ha];if(t)return t;for(var r=e.parentNode;r;){if(t=r[ma]||r[ha]){if(r=t.alternate,null!==t.child||null!==r&&null!==r.child)for(e=ua(e);null!==e;){if(r=e[ha])return r;e=ua(e)}return t}r=(e=r).parentNode}return null}function xa(e){return!(e=e[ha]||e[ma])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ba(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function wa(e){return e[fa]||null}var _a=[],ja=-1;function ka(e){return{current:e}}function Na(e){0>ja||(e.current=_a[ja],_a[ja]=null,ja--)}function Sa(e,t){ja++,_a[ja]=e.current,e.current=t}var Ca={},Ea=ka(Ca),Ta=ka(!1),Pa=Ca;function Oa(e,t){var r=e.type.contextTypes;if(!r)return Ca;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var a,s={};for(a in r)s[a]=t[a];return n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function La(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ia(){Na(Ta),Na(Ea)}function Aa(e,t,r){if(Ea.current!==Ca)throw Error(s(168));Sa(Ea,t),Sa(Ta,r)}function Ra(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,"function"!==typeof n.getChildContext)return r;for(var a in n=n.getChildContext())if(!(a in t))throw Error(s(108,W(e)||"Unknown",a));return M({},r,n)}function Da(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ca,Pa=Ea.current,Sa(Ea,e),Sa(Ta,Ta.current),!0}function Ma(e,t,r){var n=e.stateNode;if(!n)throw Error(s(169));r?(e=Ra(e,t,Pa),n.__reactInternalMemoizedMergedChildContext=e,Na(Ta),Na(Ea),Sa(Ea,e)):Na(Ta),Sa(Ta,r)}var Ua=null,za=!1,Fa=!1;function Ba(e){null===Ua?Ua=[e]:Ua.push(e)}function qa(){if(!Fa&&null!==Ua){Fa=!0;var e=0,t=xt;try{var r=Ua;for(xt=1;e<r.length;e++){var n=r[e];do{n=n(!0)}while(null!==n)}Ua=null,za=!1}catch(a){throw null!==Ua&&(Ua=Ua.slice(e+1)),Ke(Ze,qa),a}finally{xt=t,Fa=!1}}return null}var Wa=[],Ha=0,Va=null,Ga=0,Ka=[],$a=0,Ja=null,Qa=1,Ya="";function Xa(e,t){Wa[Ha++]=Ga,Wa[Ha++]=Va,Va=e,Ga=t}function Za(e,t,r){Ka[$a++]=Qa,Ka[$a++]=Ya,Ka[$a++]=Ja,Ja=e;var n=Qa;e=Ya;var a=32-it(n)-1;n&=~(1<<a),r+=1;var s=32-it(t)+a;if(30<s){var i=a-a%5;s=(n&(1<<i)-1).toString(32),n>>=i,a-=i,Qa=1<<32-it(t)+a|r<<a|n,Ya=s+e}else Qa=1<<s|r<<a|n,Ya=e}function es(e){null!==e.return&&(Xa(e,1),Za(e,1,0))}function ts(e){for(;e===Va;)Va=Wa[--Ha],Wa[Ha]=null,Ga=Wa[--Ha],Wa[Ha]=null;for(;e===Ja;)Ja=Ka[--$a],Ka[$a]=null,Ya=Ka[--$a],Ka[$a]=null,Qa=Ka[--$a],Ka[$a]=null}var rs=null,ns=null,as=!1,ss=null;function is(e,t){var r=Oc(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,null===(t=e.deletions)?(e.deletions=[r],e.flags|=16):t.push(r)}function os(e,t){switch(e.tag){case 5:var r=e.type;return null!==(t=1!==t.nodeType||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,rs=e,ns=ca(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,rs=e,ns=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(r=null!==Ja?{id:Qa,overflow:Ya}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},(r=Oc(18,null,null,0)).stateNode=t,r.return=e,e.child=r,rs=e,ns=null,!0);default:return!1}}function ls(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function cs(e){if(as){var t=ns;if(t){var r=t;if(!os(e,t)){if(ls(e))throw Error(s(418));t=ca(r.nextSibling);var n=rs;t&&os(e,t)?is(n,r):(e.flags=-4097&e.flags|2,as=!1,rs=e)}}else{if(ls(e))throw Error(s(418));e.flags=-4097&e.flags|2,as=!1,rs=e}}}function us(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;rs=e}function ds(e){if(e!==rs)return!1;if(!as)return us(e),as=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ra(e.type,e.memoizedProps)),t&&(t=ns)){if(ls(e))throw hs(),Error(s(418));for(;t;)is(e,t),t=ca(t.nextSibling)}if(us(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var r=e.data;if("/$"===r){if(0===t){ns=ca(e.nextSibling);break e}t--}else"$"!==r&&"$!"!==r&&"$?"!==r||t++}e=e.nextSibling}ns=null}}else ns=rs?ca(e.stateNode.nextSibling):null;return!0}function hs(){for(var e=ns;e;)e=ca(e.nextSibling)}function fs(){ns=rs=null,as=!1}function ms(e){null===ss?ss=[e]:ss.push(e)}var ps=b.ReactCurrentBatchConfig;function gs(e,t,r){if(null!==(e=r.ref)&&"function"!==typeof e&&"object"!==typeof e){if(r._owner){if(r=r._owner){if(1!==r.tag)throw Error(s(309));var n=r.stateNode}if(!n)throw Error(s(147,e));var a=n,i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=a.refs;null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(s(284));if(!r._owner)throw Error(s(290,e))}return e}function vs(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ys(e){return(0,e._init)(e._payload)}function xs(e){function t(t,r){if(e){var n=t.deletions;null===n?(t.deletions=[r],t.flags|=16):n.push(r)}}function r(r,n){if(!e)return null;for(;null!==n;)t(r,n),n=n.sibling;return null}function n(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function a(e,t){return(e=Ic(e,t)).index=0,e.sibling=null,e}function i(t,r,n){return t.index=n,e?null!==(n=t.alternate)?(n=n.index)<r?(t.flags|=2,r):n:(t.flags|=2,r):(t.flags|=1048576,r)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,r,n){return null===t||6!==t.tag?((t=Mc(r,e.mode,n)).return=e,t):((t=a(t,r)).return=e,t)}function c(e,t,r,n){var s=r.type;return s===j?d(e,t,r.props.children,n,r.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===L&&ys(s)===t.type)?((n=a(t,r.props)).ref=gs(e,t,r),n.return=e,n):((n=Ac(r.type,r.key,r.props,null,e.mode,n)).ref=gs(e,t,r),n.return=e,n)}function u(e,t,r,n){return null===t||4!==t.tag||t.stateNode.containerInfo!==r.containerInfo||t.stateNode.implementation!==r.implementation?((t=Uc(r,e.mode,n)).return=e,t):((t=a(t,r.children||[])).return=e,t)}function d(e,t,r,n,s){return null===t||7!==t.tag?((t=Rc(r,e.mode,n,s)).return=e,t):((t=a(t,r)).return=e,t)}function h(e,t,r){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Mc(""+t,e.mode,r)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(r=Ac(t.type,t.key,t.props,null,e.mode,r)).ref=gs(e,null,t),r.return=e,r;case _:return(t=Uc(t,e.mode,r)).return=e,t;case L:return h(e,(0,t._init)(t._payload),r)}if(te(t)||R(t))return(t=Rc(t,e.mode,r,null)).return=e,t;vs(e,t)}return null}function f(e,t,r,n){var a=null!==t?t.key:null;if("string"===typeof r&&""!==r||"number"===typeof r)return null!==a?null:l(e,t,""+r,n);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return r.key===a?c(e,t,r,n):null;case _:return r.key===a?u(e,t,r,n):null;case L:return f(e,t,(a=r._init)(r._payload),n)}if(te(r)||R(r))return null!==a?null:d(e,t,r,n,null);vs(e,r)}return null}function m(e,t,r,n,a){if("string"===typeof n&&""!==n||"number"===typeof n)return l(t,e=e.get(r)||null,""+n,a);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return c(t,e=e.get(null===n.key?r:n.key)||null,n,a);case _:return u(t,e=e.get(null===n.key?r:n.key)||null,n,a);case L:return m(e,t,r,(0,n._init)(n._payload),a)}if(te(n)||R(n))return d(t,e=e.get(r)||null,n,a,null);vs(t,n)}return null}function p(a,s,o,l){for(var c=null,u=null,d=s,p=s=0,g=null;null!==d&&p<o.length;p++){d.index>p?(g=d,d=null):g=d.sibling;var v=f(a,d,o[p],l);if(null===v){null===d&&(d=g);break}e&&d&&null===v.alternate&&t(a,d),s=i(v,s,p),null===u?c=v:u.sibling=v,u=v,d=g}if(p===o.length)return r(a,d),as&&Xa(a,p),c;if(null===d){for(;p<o.length;p++)null!==(d=h(a,o[p],l))&&(s=i(d,s,p),null===u?c=d:u.sibling=d,u=d);return as&&Xa(a,p),c}for(d=n(a,d);p<o.length;p++)null!==(g=m(d,a,p,o[p],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?p:g.key),s=i(g,s,p),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach(function(e){return t(a,e)}),as&&Xa(a,p),c}function g(a,o,l,c){var u=R(l);if("function"!==typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var d=u=null,p=o,g=o=0,v=null,y=l.next();null!==p&&!y.done;g++,y=l.next()){p.index>g?(v=p,p=null):v=p.sibling;var x=f(a,p,y.value,c);if(null===x){null===p&&(p=v);break}e&&p&&null===x.alternate&&t(a,p),o=i(x,o,g),null===d?u=x:d.sibling=x,d=x,p=v}if(y.done)return r(a,p),as&&Xa(a,g),u;if(null===p){for(;!y.done;g++,y=l.next())null!==(y=h(a,y.value,c))&&(o=i(y,o,g),null===d?u=y:d.sibling=y,d=y);return as&&Xa(a,g),u}for(p=n(a,p);!y.done;g++,y=l.next())null!==(y=m(p,a,g,y.value,c))&&(e&&null!==y.alternate&&p.delete(null===y.key?g:y.key),o=i(y,o,g),null===d?u=y:d.sibling=y,d=y);return e&&p.forEach(function(e){return t(a,e)}),as&&Xa(a,g),u}return function e(n,s,i,l){if("object"===typeof i&&null!==i&&i.type===j&&null===i.key&&(i=i.props.children),"object"===typeof i&&null!==i){switch(i.$$typeof){case w:e:{for(var c=i.key,u=s;null!==u;){if(u.key===c){if((c=i.type)===j){if(7===u.tag){r(n,u.sibling),(s=a(u,i.props.children)).return=n,n=s;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===L&&ys(c)===u.type){r(n,u.sibling),(s=a(u,i.props)).ref=gs(n,u,i),s.return=n,n=s;break e}r(n,u);break}t(n,u),u=u.sibling}i.type===j?((s=Rc(i.props.children,n.mode,l,i.key)).return=n,n=s):((l=Ac(i.type,i.key,i.props,null,n.mode,l)).ref=gs(n,s,i),l.return=n,n=l)}return o(n);case _:e:{for(u=i.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===i.containerInfo&&s.stateNode.implementation===i.implementation){r(n,s.sibling),(s=a(s,i.children||[])).return=n,n=s;break e}r(n,s);break}t(n,s),s=s.sibling}(s=Uc(i,n.mode,l)).return=n,n=s}return o(n);case L:return e(n,s,(u=i._init)(i._payload),l)}if(te(i))return p(n,s,i,l);if(R(i))return g(n,s,i,l);vs(n,i)}return"string"===typeof i&&""!==i||"number"===typeof i?(i=""+i,null!==s&&6===s.tag?(r(n,s.sibling),(s=a(s,i)).return=n,n=s):(r(n,s),(s=Mc(i,n.mode,l)).return=n,n=s),o(n)):r(n,s)}}var bs=xs(!0),ws=xs(!1),_s=ka(null),js=null,ks=null,Ns=null;function Ss(){Ns=ks=js=null}function Cs(e){var t=_s.current;Na(_s),e._currentValue=t}function Es(e,t,r){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==n&&(n.childLanes|=t)):null!==n&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Ts(e,t){js=e,Ns=ks=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(xo=!0),e.firstContext=null)}function Ps(e){var t=e._currentValue;if(Ns!==e)if(e={context:e,memoizedValue:t,next:null},null===ks){if(null===js)throw Error(s(308));ks=e,js.dependencies={lanes:0,firstContext:e}}else ks=ks.next=e;return t}var Os=null;function Ls(e){null===Os?Os=[e]:Os.push(e)}function Is(e,t,r,n){var a=t.interleaved;return null===a?(r.next=r,Ls(t)):(r.next=a.next,a.next=r),t.interleaved=r,As(e,n)}function As(e,t){e.lanes|=t;var r=e.alternate;for(null!==r&&(r.lanes|=t),r=e,e=e.return;null!==e;)e.childLanes|=t,null!==(r=e.alternate)&&(r.childLanes|=t),r=e,e=e.return;return 3===r.tag?r.stateNode:null}var Rs=!1;function Ds(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ms(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Us(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function zs(e,t,r){var n=e.updateQueue;if(null===n)return null;if(n=n.shared,0!==(2&El)){var a=n.pending;return null===a?t.next=t:(t.next=a.next,a.next=t),n.pending=t,As(e,r)}return null===(a=n.interleaved)?(t.next=t,Ls(n)):(t.next=a.next,a.next=t),n.interleaved=t,As(e,r)}function Fs(e,t,r){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&r))){var n=t.lanes;r|=n&=e.pendingLanes,t.lanes=r,yt(e,r)}}function Bs(e,t){var r=e.updateQueue,n=e.alternate;if(null!==n&&r===(n=n.updateQueue)){var a=null,s=null;if(null!==(r=r.firstBaseUpdate)){do{var i={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};null===s?a=s=i:s=s.next=i,r=r.next}while(null!==r);null===s?a=s=t:s=s.next=t}else a=s=t;return r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:s,shared:n.shared,effects:n.effects},void(e.updateQueue=r)}null===(e=r.lastBaseUpdate)?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function qs(e,t,r,n){var a=e.updateQueue;Rs=!1;var s=a.firstBaseUpdate,i=a.lastBaseUpdate,o=a.shared.pending;if(null!==o){a.shared.pending=null;var l=o,c=l.next;l.next=null,null===i?s=c:i.next=c,i=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==i&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==s){var d=a.baseState;for(i=0,u=c=l=null,o=s;;){var h=o.lane,f=o.eventTime;if((n&h)===h){null!==u&&(u=u.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var m=e,p=o;switch(h=t,f=r,p.tag){case 1:if("function"===typeof(m=p.payload)){d=m.call(f,d,h);break e}d=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null===(h="function"===typeof(m=p.payload)?m.call(f,d,h):m)||void 0===h)break e;d=M({},d,h);break e;case 2:Rs=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(h=a.effects)?a.effects=[o]:h.push(o))}else f={eventTime:f,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=f,l=d):u=u.next=f,i|=h;if(null===(o=o.next)){if(null===(o=a.shared.pending))break;o=(h=o).next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}if(null===u&&(l=d),a.baseState=l,a.firstBaseUpdate=c,a.lastBaseUpdate=u,null!==(t=a.shared.interleaved)){a=t;do{i|=a.lane,a=a.next}while(a!==t)}else null===s&&(a.shared.lanes=0);Dl|=i,e.lanes=i,e.memoizedState=d}}function Ws(e,t,r){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var n=e[t],a=n.callback;if(null!==a){if(n.callback=null,n=r,"function"!==typeof a)throw Error(s(191,a));a.call(n)}}}var Hs={},Vs=ka(Hs),Gs=ka(Hs),Ks=ka(Hs);function $s(e){if(e===Hs)throw Error(s(174));return e}function Js(e,t){switch(Sa(Ks,t),Sa(Gs,e),Sa(Vs,Hs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Na(Vs),Sa(Vs,t)}function Qs(){Na(Vs),Na(Gs),Na(Ks)}function Ys(e){$s(Ks.current);var t=$s(Vs.current),r=le(t,e.type);t!==r&&(Sa(Gs,e),Sa(Vs,r))}function Xs(e){Gs.current===e&&(Na(Vs),Na(Gs))}var Zs=ka(0);function ei(e){for(var t=e;null!==t;){if(13===t.tag){var r=t.memoizedState;if(null!==r&&(null===(r=r.dehydrated)||"$?"===r.data||"$!"===r.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ti=[];function ri(){for(var e=0;e<ti.length;e++)ti[e]._workInProgressVersionPrimary=null;ti.length=0}var ni=b.ReactCurrentDispatcher,ai=b.ReactCurrentBatchConfig,si=0,ii=null,oi=null,li=null,ci=!1,ui=!1,di=0,hi=0;function fi(){throw Error(s(321))}function mi(e,t){if(null===t)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!on(e[r],t[r]))return!1;return!0}function pi(e,t,r,n,a,i){if(si=i,ii=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ni.current=null===e||null===e.memoizedState?Xi:Zi,e=r(n,a),ui){i=0;do{if(ui=!1,di=0,25<=i)throw Error(s(301));i+=1,li=oi=null,t.updateQueue=null,ni.current=eo,e=r(n,a)}while(ui)}if(ni.current=Yi,t=null!==oi&&null!==oi.next,si=0,li=oi=ii=null,ci=!1,t)throw Error(s(300));return e}function gi(){var e=0!==di;return di=0,e}function vi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===li?ii.memoizedState=li=e:li=li.next=e,li}function yi(){if(null===oi){var e=ii.alternate;e=null!==e?e.memoizedState:null}else e=oi.next;var t=null===li?ii.memoizedState:li.next;if(null!==t)li=t,oi=e;else{if(null===e)throw Error(s(310));e={memoizedState:(oi=e).memoizedState,baseState:oi.baseState,baseQueue:oi.baseQueue,queue:oi.queue,next:null},null===li?ii.memoizedState=li=e:li=li.next=e}return li}function xi(e,t){return"function"===typeof t?t(e):t}function bi(e){var t=yi(),r=t.queue;if(null===r)throw Error(s(311));r.lastRenderedReducer=e;var n=oi,a=n.baseQueue,i=r.pending;if(null!==i){if(null!==a){var o=a.next;a.next=i.next,i.next=o}n.baseQueue=a=i,r.pending=null}if(null!==a){i=a.next,n=n.baseState;var l=o=null,c=null,u=i;do{var d=u.lane;if((si&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,o=n):c=c.next=h,ii.lanes|=d,Dl|=d}u=u.next}while(null!==u&&u!==i);null===c?o=n:c.next=l,on(n,t.memoizedState)||(xo=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=c,r.lastRenderedState=n}if(null!==(e=r.interleaved)){a=e;do{i=a.lane,ii.lanes|=i,Dl|=i,a=a.next}while(a!==e)}else null===a&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function wi(e){var t=yi(),r=t.queue;if(null===r)throw Error(s(311));r.lastRenderedReducer=e;var n=r.dispatch,a=r.pending,i=t.memoizedState;if(null!==a){r.pending=null;var o=a=a.next;do{i=e(i,o.action),o=o.next}while(o!==a);on(i,t.memoizedState)||(xo=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function _i(){}function ji(e,t){var r=ii,n=yi(),a=t(),i=!on(n.memoizedState,a);if(i&&(n.memoizedState=a,xo=!0),n=n.queue,Ri(Si.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||null!==li&&1&li.memoizedState.tag){if(r.flags|=2048,Pi(9,Ni.bind(null,r,n,a,t),void 0,null),null===Tl)throw Error(s(349));0!==(30&si)||ki(r,t,a)}return a}function ki(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},null===(t=ii.updateQueue)?(t={lastEffect:null,stores:null},ii.updateQueue=t,t.stores=[e]):null===(r=t.stores)?t.stores=[e]:r.push(e)}function Ni(e,t,r,n){t.value=r,t.getSnapshot=n,Ci(t)&&Ei(e)}function Si(e,t,r){return r(function(){Ci(t)&&Ei(e)})}function Ci(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!on(e,r)}catch(n){return!0}}function Ei(e){var t=As(e,1);null!==t&&rc(t,e,1,-1)}function Ti(e){var t=vi();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xi,lastRenderedState:e},t.queue=e,e=e.dispatch=Ki.bind(null,ii,e),[t.memoizedState,e]}function Pi(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},null===(t=ii.updateQueue)?(t={lastEffect:null,stores:null},ii.updateQueue=t,t.lastEffect=e.next=e):null===(r=t.lastEffect)?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e),e}function Oi(){return yi().memoizedState}function Li(e,t,r,n){var a=vi();ii.flags|=e,a.memoizedState=Pi(1|t,r,void 0,void 0===n?null:n)}function Ii(e,t,r,n){var a=yi();n=void 0===n?null:n;var s=void 0;if(null!==oi){var i=oi.memoizedState;if(s=i.destroy,null!==n&&mi(n,i.deps))return void(a.memoizedState=Pi(t,r,s,n))}ii.flags|=e,a.memoizedState=Pi(1|t,r,s,n)}function Ai(e,t){return Li(8390656,8,e,t)}function Ri(e,t){return Ii(2048,8,e,t)}function Di(e,t){return Ii(4,2,e,t)}function Mi(e,t){return Ii(4,4,e,t)}function Ui(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function zi(e,t,r){return r=null!==r&&void 0!==r?r.concat([e]):null,Ii(4,4,Ui.bind(null,t,e),r)}function Fi(){}function Bi(e,t){var r=yi();t=void 0===t?null:t;var n=r.memoizedState;return null!==n&&null!==t&&mi(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function qi(e,t){var r=yi();t=void 0===t?null:t;var n=r.memoizedState;return null!==n&&null!==t&&mi(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function Wi(e,t,r){return 0===(21&si)?(e.baseState&&(e.baseState=!1,xo=!0),e.memoizedState=r):(on(r,t)||(r=pt(),ii.lanes|=r,Dl|=r,e.baseState=!0),t)}function Hi(e,t){var r=xt;xt=0!==r&&4>r?r:4,e(!0);var n=ai.transition;ai.transition={};try{e(!1),t()}finally{xt=r,ai.transition=n}}function Vi(){return yi().memoizedState}function Gi(e,t,r){var n=tc(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},$i(e))Ji(t,r);else if(null!==(r=Is(e,t,r,n))){rc(r,e,n,ec()),Qi(r,t,n)}}function Ki(e,t,r){var n=tc(e),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if($i(e))Ji(t,a);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var i=t.lastRenderedState,o=s(i,r);if(a.hasEagerState=!0,a.eagerState=o,on(o,i)){var l=t.interleaved;return null===l?(a.next=a,Ls(t)):(a.next=l.next,l.next=a),void(t.interleaved=a)}}catch(c){}null!==(r=Is(e,t,a,n))&&(rc(r,e,n,a=ec()),Qi(r,t,n))}}function $i(e){var t=e.alternate;return e===ii||null!==t&&t===ii}function Ji(e,t){ui=ci=!0;var r=e.pending;null===r?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Qi(e,t,r){if(0!==(4194240&r)){var n=t.lanes;r|=n&=e.pendingLanes,t.lanes=r,yt(e,r)}}var Yi={readContext:Ps,useCallback:fi,useContext:fi,useEffect:fi,useImperativeHandle:fi,useInsertionEffect:fi,useLayoutEffect:fi,useMemo:fi,useReducer:fi,useRef:fi,useState:fi,useDebugValue:fi,useDeferredValue:fi,useTransition:fi,useMutableSource:fi,useSyncExternalStore:fi,useId:fi,unstable_isNewReconciler:!1},Xi={readContext:Ps,useCallback:function(e,t){return vi().memoizedState=[e,void 0===t?null:t],e},useContext:Ps,useEffect:Ai,useImperativeHandle:function(e,t,r){return r=null!==r&&void 0!==r?r.concat([e]):null,Li(4194308,4,Ui.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Li(4194308,4,e,t)},useInsertionEffect:function(e,t){return Li(4,2,e,t)},useMemo:function(e,t){var r=vi();return t=void 0===t?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=vi();return t=void 0!==r?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=Gi.bind(null,ii,e),[n.memoizedState,e]},useRef:function(e){return e={current:e},vi().memoizedState=e},useState:Ti,useDebugValue:Fi,useDeferredValue:function(e){return vi().memoizedState=e},useTransition:function(){var e=Ti(!1),t=e[0];return e=Hi.bind(null,e[1]),vi().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=ii,a=vi();if(as){if(void 0===r)throw Error(s(407));r=r()}else{if(r=t(),null===Tl)throw Error(s(349));0!==(30&si)||ki(n,t,r)}a.memoizedState=r;var i={value:r,getSnapshot:t};return a.queue=i,Ai(Si.bind(null,n,i,e),[e]),n.flags|=2048,Pi(9,Ni.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=vi(),t=Tl.identifierPrefix;if(as){var r=Ya;t=":"+t+"R"+(r=(Qa&~(1<<32-it(Qa)-1)).toString(32)+r),0<(r=di++)&&(t+="H"+r.toString(32)),t+=":"}else t=":"+t+"r"+(r=hi++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Zi={readContext:Ps,useCallback:Bi,useContext:Ps,useEffect:Ri,useImperativeHandle:zi,useInsertionEffect:Di,useLayoutEffect:Mi,useMemo:qi,useReducer:bi,useRef:Oi,useState:function(){return bi(xi)},useDebugValue:Fi,useDeferredValue:function(e){return Wi(yi(),oi.memoizedState,e)},useTransition:function(){return[bi(xi)[0],yi().memoizedState]},useMutableSource:_i,useSyncExternalStore:ji,useId:Vi,unstable_isNewReconciler:!1},eo={readContext:Ps,useCallback:Bi,useContext:Ps,useEffect:Ri,useImperativeHandle:zi,useInsertionEffect:Di,useLayoutEffect:Mi,useMemo:qi,useReducer:wi,useRef:Oi,useState:function(){return wi(xi)},useDebugValue:Fi,useDeferredValue:function(e){var t=yi();return null===oi?t.memoizedState=e:Wi(t,oi.memoizedState,e)},useTransition:function(){return[wi(xi)[0],yi().memoizedState]},useMutableSource:_i,useSyncExternalStore:ji,useId:Vi,unstable_isNewReconciler:!1};function to(e,t){if(e&&e.defaultProps){for(var r in t=M({},t),e=e.defaultProps)void 0===t[r]&&(t[r]=e[r]);return t}return t}function ro(e,t,r,n){r=null===(r=r(n,t=e.memoizedState))||void 0===r?t:M({},t,r),e.memoizedState=r,0===e.lanes&&(e.updateQueue.baseState=r)}var no={isMounted:function(e){return!!(e=e._reactInternals)&&qe(e)===e},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=ec(),a=tc(e),s=Us(n,a);s.payload=t,void 0!==r&&null!==r&&(s.callback=r),null!==(t=zs(e,s,a))&&(rc(t,e,a,n),Fs(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=ec(),a=tc(e),s=Us(n,a);s.tag=1,s.payload=t,void 0!==r&&null!==r&&(s.callback=r),null!==(t=zs(e,s,a))&&(rc(t,e,a,n),Fs(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=ec(),n=tc(e),a=Us(r,n);a.tag=2,void 0!==t&&null!==t&&(a.callback=t),null!==(t=zs(e,a,n))&&(rc(t,e,n,r),Fs(t,e,n))}};function ao(e,t,r,n,a,s,i){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(n,s,i):!t.prototype||!t.prototype.isPureReactComponent||(!ln(r,n)||!ln(a,s))}function so(e,t,r){var n=!1,a=Ca,s=t.contextType;return"object"===typeof s&&null!==s?s=Ps(s):(a=La(t)?Pa:Ea.current,s=(n=null!==(n=t.contextTypes)&&void 0!==n)?Oa(e,a):Ca),t=new t(r,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=no,e.stateNode=t,t._reactInternals=e,n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=s),t}function io(e,t,r,n){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(r,n),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&no.enqueueReplaceState(t,t.state,null)}function oo(e,t,r,n){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},Ds(e);var s=t.contextType;"object"===typeof s&&null!==s?a.context=Ps(s):(s=La(t)?Pa:Ea.current,a.context=Oa(e,s)),a.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(ro(e,t,s,r),a.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof a.getSnapshotBeforeUpdate||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||(t=a.state,"function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),t!==a.state&&no.enqueueReplaceState(a,a.state,null),qs(e,r,a,n),a.state=e.memoizedState),"function"===typeof a.componentDidMount&&(e.flags|=4194308)}function lo(e,t){try{var r="",n=t;do{r+=B(n),n=n.return}while(n);var a=r}catch(s){a="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:a,digest:null}}function co(e,t,r){return{value:e,source:null,stack:null!=r?r:null,digest:null!=t?t:null}}function uo(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var ho="function"===typeof WeakMap?WeakMap:Map;function fo(e,t,r){(r=Us(-1,r)).tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Hl||(Hl=!0,Vl=n),uo(0,t)},r}function mo(e,t,r){(r=Us(-1,r)).tag=3;var n=e.type.getDerivedStateFromError;if("function"===typeof n){var a=t.value;r.payload=function(){return n(a)},r.callback=function(){uo(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(r.callback=function(){uo(0,t),"function"!==typeof n&&(null===Gl?Gl=new Set([this]):Gl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),r}function po(e,t,r){var n=e.pingCache;if(null===n){n=e.pingCache=new ho;var a=new Set;n.set(t,a)}else void 0===(a=n.get(t))&&(a=new Set,n.set(t,a));a.has(r)||(a.add(r),e=Nc.bind(null,e,t,r),t.then(e,e))}function go(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function vo(e,t,r,n,a){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,1===r.tag&&(null===r.alternate?r.tag=17:((t=Us(-1,1)).tag=2,zs(r,t,1))),r.lanes|=1),e):(e.flags|=65536,e.lanes=a,e)}var yo=b.ReactCurrentOwner,xo=!1;function bo(e,t,r,n){t.child=null===e?ws(t,null,r,n):bs(t,e.child,r,n)}function wo(e,t,r,n,a){r=r.render;var s=t.ref;return Ts(t,a),n=pi(e,t,r,n,s,a),r=gi(),null===e||xo?(as&&r&&es(t),t.flags|=1,bo(e,t,n,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Ho(e,t,a))}function _o(e,t,r,n,a){if(null===e){var s=r.type;return"function"!==typeof s||Lc(s)||void 0!==s.defaultProps||null!==r.compare||void 0!==r.defaultProps?((e=Ac(r.type,null,n,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,jo(e,t,s,n,a))}if(s=e.child,0===(e.lanes&a)){var i=s.memoizedProps;if((r=null!==(r=r.compare)?r:ln)(i,n)&&e.ref===t.ref)return Ho(e,t,a)}return t.flags|=1,(e=Ic(s,n)).ref=t.ref,e.return=t,t.child=e}function jo(e,t,r,n,a){if(null!==e){var s=e.memoizedProps;if(ln(s,n)&&e.ref===t.ref){if(xo=!1,t.pendingProps=n=s,0===(e.lanes&a))return t.lanes=e.lanes,Ho(e,t,a);0!==(131072&e.flags)&&(xo=!0)}}return So(e,t,r,n,a)}function ko(e,t,r){var n=t.pendingProps,a=n.children,s=null!==e?e.memoizedState:null;if("hidden"===n.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Sa(Il,Ll),Ll|=r;else{if(0===(1073741824&r))return e=null!==s?s.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Sa(Il,Ll),Ll|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=null!==s?s.baseLanes:r,Sa(Il,Ll),Ll|=n}else null!==s?(n=s.baseLanes|r,t.memoizedState=null):n=r,Sa(Il,Ll),Ll|=n;return bo(e,t,a,r),t.child}function No(e,t){var r=t.ref;(null===e&&null!==r||null!==e&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function So(e,t,r,n,a){var s=La(r)?Pa:Ea.current;return s=Oa(t,s),Ts(t,a),r=pi(e,t,r,n,s,a),n=gi(),null===e||xo?(as&&n&&es(t),t.flags|=1,bo(e,t,r,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Ho(e,t,a))}function Co(e,t,r,n,a){if(La(r)){var s=!0;Da(t)}else s=!1;if(Ts(t,a),null===t.stateNode)Wo(e,t),so(t,r,n),oo(t,r,n,a),n=!0;else if(null===e){var i=t.stateNode,o=t.memoizedProps;i.props=o;var l=i.context,c=r.contextType;"object"===typeof c&&null!==c?c=Ps(c):c=Oa(t,c=La(r)?Pa:Ea.current);var u=r.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof i.getSnapshotBeforeUpdate;d||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(o!==n||l!==c)&&io(t,i,n,c),Rs=!1;var h=t.memoizedState;i.state=h,qs(t,n,i,a),l=t.memoizedState,o!==n||h!==l||Ta.current||Rs?("function"===typeof u&&(ro(t,r,u,n),l=t.memoizedState),(o=Rs||ao(t,r,o,n,h,l,c))?(d||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(t.flags|=4194308)):("function"===typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=l),i.props=n,i.state=l,i.context=c,n=o):("function"===typeof i.componentDidMount&&(t.flags|=4194308),n=!1)}else{i=t.stateNode,Ms(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:to(t.type,o),i.props=c,d=t.pendingProps,h=i.context,"object"===typeof(l=r.contextType)&&null!==l?l=Ps(l):l=Oa(t,l=La(r)?Pa:Ea.current);var f=r.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(o!==d||h!==l)&&io(t,i,n,l),Rs=!1,h=t.memoizedState,i.state=h,qs(t,n,i,a);var m=t.memoizedState;o!==d||h!==m||Ta.current||Rs?("function"===typeof f&&(ro(t,r,f,n),m=t.memoizedState),(c=Rs||ao(t,r,c,n,h,m,l)||!1)?(u||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(n,m,l),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(n,m,l)),"function"===typeof i.componentDidUpdate&&(t.flags|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof i.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=m),i.props=n,i.state=m,i.context=l,n=c):("function"!==typeof i.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),n=!1)}return Eo(e,t,r,n,s,a)}function Eo(e,t,r,n,a,s){No(e,t);var i=0!==(128&t.flags);if(!n&&!i)return a&&Ma(t,r,!1),Ho(e,t,s);n=t.stateNode,yo.current=t;var o=i&&"function"!==typeof r.getDerivedStateFromError?null:n.render();return t.flags|=1,null!==e&&i?(t.child=bs(t,e.child,null,s),t.child=bs(t,null,o,s)):bo(e,t,o,s),t.memoizedState=n.state,a&&Ma(t,r,!0),t.child}function To(e){var t=e.stateNode;t.pendingContext?Aa(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Aa(0,t.context,!1),Js(e,t.containerInfo)}function Po(e,t,r,n,a){return fs(),ms(a),t.flags|=256,bo(e,t,r,n),t.child}var Oo,Lo,Io,Ao,Ro={dehydrated:null,treeContext:null,retryLane:0};function Do(e){return{baseLanes:e,cachePool:null,transitions:null}}function Mo(e,t,r){var n,a=t.pendingProps,i=Zs.current,o=!1,l=0!==(128&t.flags);if((n=l)||(n=(null===e||null!==e.memoizedState)&&0!==(2&i)),n?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(i|=1),Sa(Zs,1&i),null===e)return cs(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=a.children,e=a.fallback,o?(a=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&a)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Dc(l,a,0,null),e=Rc(e,a,r,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Do(r),t.memoizedState=Ro,e):Uo(t,l));if(null!==(i=e.memoizedState)&&null!==(n=i.dehydrated))return function(e,t,r,n,a,i,o){if(r)return 256&t.flags?(t.flags&=-257,zo(e,t,o,n=co(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(i=n.fallback,a=t.mode,n=Dc({mode:"visible",children:n.children},a,0,null),(i=Rc(i,a,o,null)).flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,0!==(1&t.mode)&&bs(t,e.child,null,o),t.child.memoizedState=Do(o),t.memoizedState=Ro,i);if(0===(1&t.mode))return zo(e,t,o,null);if("$!"===a.data){if(n=a.nextSibling&&a.nextSibling.dataset)var l=n.dgst;return n=l,zo(e,t,o,n=co(i=Error(s(419)),n,void 0))}if(l=0!==(o&e.childLanes),xo||l){if(null!==(n=Tl)){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}0!==(a=0!==(a&(n.suspendedLanes|o))?0:a)&&a!==i.retryLane&&(i.retryLane=a,As(e,a),rc(n,e,a,-1))}return pc(),zo(e,t,o,n=co(Error(s(421))))}return"$?"===a.data?(t.flags|=128,t.child=e.child,t=Cc.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,ns=ca(a.nextSibling),rs=t,as=!0,ss=null,null!==e&&(Ka[$a++]=Qa,Ka[$a++]=Ya,Ka[$a++]=Ja,Qa=e.id,Ya=e.overflow,Ja=t),t=Uo(t,n.children),t.flags|=4096,t)}(e,t,l,a,n,i,r);if(o){o=a.fallback,l=t.mode,n=(i=e.child).sibling;var c={mode:"hidden",children:a.children};return 0===(1&l)&&t.child!==i?((a=t.child).childLanes=0,a.pendingProps=c,t.deletions=null):(a=Ic(i,c)).subtreeFlags=14680064&i.subtreeFlags,null!==n?o=Ic(n,o):(o=Rc(o,l,r,null)).flags|=2,o.return=t,a.return=t,a.sibling=o,t.child=a,a=o,o=t.child,l=null===(l=e.child.memoizedState)?Do(r):{baseLanes:l.baseLanes|r,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~r,t.memoizedState=Ro,a}return e=(o=e.child).sibling,a=Ic(o,{mode:"visible",children:a.children}),0===(1&t.mode)&&(a.lanes=r),a.return=t,a.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=a,t.memoizedState=null,a}function Uo(e,t){return(t=Dc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function zo(e,t,r,n){return null!==n&&ms(n),bs(t,e.child,null,r),(e=Uo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Fo(e,t,r){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),Es(e.return,t,r)}function Bo(e,t,r,n,a){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=a)}function qo(e,t,r){var n=t.pendingProps,a=n.revealOrder,s=n.tail;if(bo(e,t,n.children,r),0!==(2&(n=Zs.current)))n=1&n|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Fo(e,r,t);else if(19===e.tag)Fo(e,r,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Sa(Zs,n),0===(1&t.mode))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;null!==r;)null!==(e=r.alternate)&&null===ei(e)&&(a=r),r=r.sibling;null===(r=a)?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),Bo(t,!1,a,r,s);break;case"backwards":for(r=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===ei(e)){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}Bo(t,!0,r,null,s);break;case"together":Bo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Wo(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ho(e,t,r){if(null!==e&&(t.dependencies=e.dependencies),Dl|=t.lanes,0===(r&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(r=Ic(e=t.child,e.pendingProps),t.child=r,r.return=t;null!==e.sibling;)e=e.sibling,(r=r.sibling=Ic(e,e.pendingProps)).return=t;r.sibling=null}return t.child}function Vo(e,t){if(!as)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;null!==t;)null!==t.alternate&&(r=t),t=t.sibling;null===r?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;null!==r;)null!==r.alternate&&(n=r),r=r.sibling;null===n?t||null===e.tail?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Go(e){var t=null!==e.alternate&&e.alternate.child===e.child,r=0,n=0;if(t)for(var a=e.child;null!==a;)r|=a.lanes|a.childLanes,n|=14680064&a.subtreeFlags,n|=14680064&a.flags,a.return=e,a=a.sibling;else for(a=e.child;null!==a;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function Ko(e,t,r){var n=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Go(t),null;case 1:case 17:return La(t.type)&&Ia(),Go(t),null;case 3:return n=t.stateNode,Qs(),Na(Ta),Na(Ea),ri(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(ds(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(ic(ss),ss=null))),Lo(e,t),Go(t),null;case 5:Xs(t);var a=$s(Ks.current);if(r=t.type,null!==e&&null!=t.stateNode)Io(e,t,r,n,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(null===t.stateNode)throw Error(s(166));return Go(t),null}if(e=$s(Vs.current),ds(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[ha]=t,n[fa]=i,e=0!==(1&t.mode),r){case"dialog":zn("cancel",n),zn("close",n);break;case"iframe":case"object":case"embed":zn("load",n);break;case"video":case"audio":for(a=0;a<Rn.length;a++)zn(Rn[a],n);break;case"source":zn("error",n);break;case"img":case"image":case"link":zn("error",n),zn("load",n);break;case"details":zn("toggle",n);break;case"input":Q(n,i),zn("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},zn("invalid",n);break;case"textarea":ae(n,i),zn("invalid",n)}for(var l in ye(r,i),a=null,i)if(i.hasOwnProperty(l)){var c=i[l];"children"===l?"string"===typeof c?n.textContent!==c&&(!0!==i.suppressHydrationWarning&&Xn(n.textContent,c,e),a=["children",c]):"number"===typeof c&&n.textContent!==""+c&&(!0!==i.suppressHydrationWarning&&Xn(n.textContent,c,e),a=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&zn("scroll",n)}switch(r){case"input":G(n),Z(n,i,!0);break;case"textarea":G(n),ie(n);break;case"select":case"option":break;default:"function"===typeof i.onClick&&(n.onclick=Zn)}n=a,t.updateQueue=n,null!==n&&(t.flags|=4)}else{l=9===a.nodeType?a:a.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(r)),"http://www.w3.org/1999/xhtml"===e?"script"===r?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof n.is?e=l.createElement(r,{is:n.is}):(e=l.createElement(r),"select"===r&&(l=e,n.multiple?l.multiple=!0:n.size&&(l.size=n.size))):e=l.createElementNS(e,r),e[ha]=t,e[fa]=n,Oo(e,t,!1,!1),t.stateNode=e;e:{switch(l=xe(r,n),r){case"dialog":zn("cancel",e),zn("close",e),a=n;break;case"iframe":case"object":case"embed":zn("load",e),a=n;break;case"video":case"audio":for(a=0;a<Rn.length;a++)zn(Rn[a],e);a=n;break;case"source":zn("error",e),a=n;break;case"img":case"image":case"link":zn("error",e),zn("load",e),a=n;break;case"details":zn("toggle",e),a=n;break;case"input":Q(e,n),a=J(e,n),zn("invalid",e);break;case"option":default:a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=M({},n,{value:void 0}),zn("invalid",e);break;case"textarea":ae(e,n),a=ne(e,n),zn("invalid",e)}for(i in ye(r,a),c=a)if(c.hasOwnProperty(i)){var u=c[i];"style"===i?ge(e,u):"dangerouslySetInnerHTML"===i?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===i?"string"===typeof u?("textarea"!==r||""!==u)&&he(e,u):"number"===typeof u&&he(e,""+u):"suppressContentEditableWarning"!==i&&"suppressHydrationWarning"!==i&&"autoFocus"!==i&&(o.hasOwnProperty(i)?null!=u&&"onScroll"===i&&zn("scroll",e):null!=u&&x(e,i,u,l))}switch(r){case"input":G(e),Z(e,n,!1);break;case"textarea":G(e),ie(e);break;case"option":null!=n.value&&e.setAttribute("value",""+H(n.value));break;case"select":e.multiple=!!n.multiple,null!=(i=n.value)?re(e,!!n.multiple,i,!1):null!=n.defaultValue&&re(e,!!n.multiple,n.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=Zn)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Go(t),null;case 6:if(e&&null!=t.stateNode)Ao(e,t,e.memoizedProps,n);else{if("string"!==typeof n&&null===t.stateNode)throw Error(s(166));if(r=$s(Ks.current),$s(Vs.current),ds(t)){if(n=t.stateNode,r=t.memoizedProps,n[ha]=t,(i=n.nodeValue!==r)&&null!==(e=rs))switch(e.tag){case 3:Xn(n.nodeValue,r,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xn(n.nodeValue,r,0!==(1&e.mode))}i&&(t.flags|=4)}else(n=(9===r.nodeType?r:r.ownerDocument).createTextNode(n))[ha]=t,t.stateNode=n}return Go(t),null;case 13:if(Na(Zs),n=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(as&&null!==ns&&0!==(1&t.mode)&&0===(128&t.flags))hs(),fs(),t.flags|=98560,i=!1;else if(i=ds(t),null!==n&&null!==n.dehydrated){if(null===e){if(!i)throw Error(s(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(s(317));i[ha]=t}else fs(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Go(t),i=!1}else null!==ss&&(ic(ss),ss=null),i=!0;if(!i)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=r,t):((n=null!==n)!==(null!==e&&null!==e.memoizedState)&&n&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Zs.current)?0===Al&&(Al=3):pc())),null!==t.updateQueue&&(t.flags|=4),Go(t),null);case 4:return Qs(),Lo(e,t),null===e&&qn(t.stateNode.containerInfo),Go(t),null;case 10:return Cs(t.type._context),Go(t),null;case 19:if(Na(Zs),null===(i=t.memoizedState))return Go(t),null;if(n=0!==(128&t.flags),null===(l=i.rendering))if(n)Vo(i,!1);else{if(0!==Al||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ei(e))){for(t.flags|=128,Vo(i,!1),null!==(n=l.updateQueue)&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;null!==r;)e=n,(i=r).flags&=14680066,null===(l=i.alternate)?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,e=l.dependencies,i.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Sa(Zs,1&Zs.current|2),t.child}e=e.sibling}null!==i.tail&&Ye()>ql&&(t.flags|=128,n=!0,Vo(i,!1),t.lanes=4194304)}else{if(!n)if(null!==(e=ei(l))){if(t.flags|=128,n=!0,null!==(r=e.updateQueue)&&(t.updateQueue=r,t.flags|=4),Vo(i,!0),null===i.tail&&"hidden"===i.tailMode&&!l.alternate&&!as)return Go(t),null}else 2*Ye()-i.renderingStartTime>ql&&1073741824!==r&&(t.flags|=128,n=!0,Vo(i,!1),t.lanes=4194304);i.isBackwards?(l.sibling=t.child,t.child=l):(null!==(r=i.last)?r.sibling=l:t.child=l,i.last=l)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Ye(),t.sibling=null,r=Zs.current,Sa(Zs,n?1&r|2:1&r),t):(Go(t),null);case 22:case 23:return dc(),n=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==n&&(t.flags|=8192),n&&0!==(1&t.mode)?0!==(1073741824&Ll)&&(Go(t),6&t.subtreeFlags&&(t.flags|=8192)):Go(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function $o(e,t){switch(ts(t),t.tag){case 1:return La(t.type)&&Ia(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Qs(),Na(Ta),Na(Ea),ri(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Xs(t),null;case 13:if(Na(Zs),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));fs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Na(Zs),null;case 4:return Qs(),null;case 10:return Cs(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}Oo=function(e,t){for(var r=t.child;null!==r;){if(5===r.tag||6===r.tag)e.appendChild(r.stateNode);else if(4!==r.tag&&null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},Lo=function(){},Io=function(e,t,r,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,$s(Vs.current);var s,i=null;switch(r){case"input":a=J(e,a),n=J(e,n),i=[];break;case"select":a=M({},a,{value:void 0}),n=M({},n,{value:void 0}),i=[];break;case"textarea":a=ne(e,a),n=ne(e,n),i=[];break;default:"function"!==typeof a.onClick&&"function"===typeof n.onClick&&(e.onclick=Zn)}for(u in ye(r,n),r=null,a)if(!n.hasOwnProperty(u)&&a.hasOwnProperty(u)&&null!=a[u])if("style"===u){var l=a[u];for(s in l)l.hasOwnProperty(s)&&(r||(r={}),r[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(o.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in n){var c=n[u];if(l=null!=a?a[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(r||(r={}),r[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(r||(r={}),r[s]=c[s])}else r||(i||(i=[]),i.push(u,r)),r=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(i=i||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(i=i||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(o.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&zn("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}r&&(i=i||[]).push("style",r);var u=i;(t.updateQueue=u)&&(t.flags|=4)}},Ao=function(e,t,r,n){r!==n&&(t.flags|=4)};var Jo=!1,Qo=!1,Yo="function"===typeof WeakSet?WeakSet:Set,Xo=null;function Zo(e,t){var r=e.ref;if(null!==r)if("function"===typeof r)try{r(null)}catch(n){kc(e,t,n)}else r.current=null}function el(e,t,r){try{r()}catch(n){kc(e,t,n)}}var tl=!1;function rl(e,t,r){var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var a=n=n.next;do{if((a.tag&e)===e){var s=a.destroy;a.destroy=void 0,void 0!==s&&el(t,r,s)}a=a.next}while(a!==n)}}function nl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function al(e){var t=e.ref;if(null!==t){var r=e.stateNode;e.tag,e=r,"function"===typeof t?t(e):t.current=e}}function sl(e){var t=e.alternate;null!==t&&(e.alternate=null,sl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[ha],delete t[fa],delete t[pa],delete t[ga],delete t[va])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function il(e){return 5===e.tag||3===e.tag||4===e.tag}function ol(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||il(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,r){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?8===r.nodeType?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(8===r.nodeType?(t=r.parentNode).insertBefore(e,r):(t=r).appendChild(e),null!==(r=r._reactRootContainer)&&void 0!==r||null!==t.onclick||(t.onclick=Zn));else if(4!==n&&null!==(e=e.child))for(ll(e,t,r),e=e.sibling;null!==e;)ll(e,t,r),e=e.sibling}function cl(e,t,r){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(4!==n&&null!==(e=e.child))for(cl(e,t,r),e=e.sibling;null!==e;)cl(e,t,r),e=e.sibling}var ul=null,dl=!1;function hl(e,t,r){for(r=r.child;null!==r;)fl(e,t,r),r=r.sibling}function fl(e,t,r){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(at,r)}catch(o){}switch(r.tag){case 5:Qo||Zo(r,t);case 6:var n=ul,a=dl;ul=null,hl(e,t,r),dl=a,null!==(ul=n)&&(dl?(e=ul,r=r.stateNode,8===e.nodeType?e.parentNode.removeChild(r):e.removeChild(r)):ul.removeChild(r.stateNode));break;case 18:null!==ul&&(dl?(e=ul,r=r.stateNode,8===e.nodeType?la(e.parentNode,r):1===e.nodeType&&la(e,r),qt(e)):la(ul,r.stateNode));break;case 4:n=ul,a=dl,ul=r.stateNode.containerInfo,dl=!0,hl(e,t,r),ul=n,dl=a;break;case 0:case 11:case 14:case 15:if(!Qo&&(null!==(n=r.updateQueue)&&null!==(n=n.lastEffect))){a=n=n.next;do{var s=a,i=s.destroy;s=s.tag,void 0!==i&&(0!==(2&s)||0!==(4&s))&&el(r,t,i),a=a.next}while(a!==n)}hl(e,t,r);break;case 1:if(!Qo&&(Zo(r,t),"function"===typeof(n=r.stateNode).componentWillUnmount))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(o){kc(r,t,o)}hl(e,t,r);break;case 21:hl(e,t,r);break;case 22:1&r.mode?(Qo=(n=Qo)||null!==r.memoizedState,hl(e,t,r),Qo=n):hl(e,t,r);break;default:hl(e,t,r)}}function ml(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var r=e.stateNode;null===r&&(r=e.stateNode=new Yo),t.forEach(function(t){var n=Ec.bind(null,e,t);r.has(t)||(r.add(t),t.then(n,n))})}}function pl(e,t){var r=t.deletions;if(null!==r)for(var n=0;n<r.length;n++){var a=r[n];try{var i=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,dl=!1;break e;case 3:case 4:ul=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===ul)throw Error(s(160));fl(i,o,a),ul=null,dl=!1;var c=a.alternate;null!==c&&(c.return=null),a.return=null}catch(u){kc(a,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(pl(t,e),vl(e),4&n){try{rl(3,e,e.return),nl(3,e)}catch(g){kc(e,e.return,g)}try{rl(5,e,e.return)}catch(g){kc(e,e.return,g)}}break;case 1:pl(t,e),vl(e),512&n&&null!==r&&Zo(r,r.return);break;case 5:if(pl(t,e),vl(e),512&n&&null!==r&&Zo(r,r.return),32&e.flags){var a=e.stateNode;try{he(a,"")}catch(g){kc(e,e.return,g)}}if(4&n&&null!=(a=e.stateNode)){var i=e.memoizedProps,o=null!==r?r.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===i.type&&null!=i.name&&Y(a,i),xe(l,o);var u=xe(l,i);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];"style"===d?ge(a,h):"dangerouslySetInnerHTML"===d?de(a,h):"children"===d?he(a,h):x(a,d,h,u)}switch(l){case"input":X(a,i);break;case"textarea":se(a,i);break;case"select":var f=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var m=i.value;null!=m?re(a,!!i.multiple,m,!1):f!==!!i.multiple&&(null!=i.defaultValue?re(a,!!i.multiple,i.defaultValue,!0):re(a,!!i.multiple,i.multiple?[]:"",!1))}a[fa]=i}catch(g){kc(e,e.return,g)}}break;case 6:if(pl(t,e),vl(e),4&n){if(null===e.stateNode)throw Error(s(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(g){kc(e,e.return,g)}}break;case 3:if(pl(t,e),vl(e),4&n&&null!==r&&r.memoizedState.isDehydrated)try{qt(t.containerInfo)}catch(g){kc(e,e.return,g)}break;case 4:default:pl(t,e),vl(e);break;case 13:pl(t,e),vl(e),8192&(a=e.child).flags&&(i=null!==a.memoizedState,a.stateNode.isHidden=i,!i||null!==a.alternate&&null!==a.alternate.memoizedState||(Bl=Ye())),4&n&&ml(e);break;case 22:if(d=null!==r&&null!==r.memoizedState,1&e.mode?(Qo=(u=Qo)||d,pl(t,e),Qo=u):pl(t,e),vl(e),8192&n){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(Xo=e,d=e.child;null!==d;){for(h=Xo=d;null!==Xo;){switch(m=(f=Xo).child,f.tag){case 0:case 11:case 14:case 15:rl(4,f,f.return);break;case 1:Zo(f,f.return);var p=f.stateNode;if("function"===typeof p.componentWillUnmount){n=f,r=f.return;try{t=n,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(g){kc(n,r,g)}}break;case 5:Zo(f,f.return);break;case 22:if(null!==f.memoizedState){wl(h);continue}}null!==m?(m.return=f,Xo=m):wl(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{a=h.stateNode,u?"function"===typeof(i=a.style).setProperty?i.setProperty("display","none","important"):i.display="none":(l=h.stateNode,o=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=pe("display",o))}catch(g){kc(e,e.return,g)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){kc(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:pl(t,e),vl(e),4&n&&ml(e);case 21:}}function vl(e){var t=e.flags;if(2&t){try{e:{for(var r=e.return;null!==r;){if(il(r)){var n=r;break e}r=r.return}throw Error(s(160))}switch(n.tag){case 5:var a=n.stateNode;32&n.flags&&(he(a,""),n.flags&=-33),cl(e,ol(e),a);break;case 3:case 4:var i=n.stateNode.containerInfo;ll(e,ol(e),i);break;default:throw Error(s(161))}}catch(o){kc(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yl(e,t,r){Xo=e,xl(e,t,r)}function xl(e,t,r){for(var n=0!==(1&e.mode);null!==Xo;){var a=Xo,s=a.child;if(22===a.tag&&n){var i=null!==a.memoizedState||Jo;if(!i){var o=a.alternate,l=null!==o&&null!==o.memoizedState||Qo;o=Jo;var c=Qo;if(Jo=i,(Qo=l)&&!c)for(Xo=a;null!==Xo;)l=(i=Xo).child,22===i.tag&&null!==i.memoizedState?_l(a):null!==l?(l.return=i,Xo=l):_l(a);for(;null!==s;)Xo=s,xl(s,t,r),s=s.sibling;Xo=a,Jo=o,Qo=c}bl(e)}else 0!==(8772&a.subtreeFlags)&&null!==s?(s.return=a,Xo=s):bl(e)}}function bl(e){for(;null!==Xo;){var t=Xo;if(0!==(8772&t.flags)){var r=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Qo||nl(5,t);break;case 1:var n=t.stateNode;if(4&t.flags&&!Qo)if(null===r)n.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:to(t.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;null!==i&&Ws(t,i,n);break;case 3:var o=t.updateQueue;if(null!==o){if(r=null,null!==t.child)switch(t.child.tag){case 5:case 1:r=t.child.stateNode}Ws(t,o,r)}break;case 5:var l=t.stateNode;if(null===r&&4&t.flags){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&qt(h)}}}break;default:throw Error(s(163))}Qo||512&t.flags&&al(t)}catch(f){kc(t,t.return,f)}}if(t===e){Xo=null;break}if(null!==(r=t.sibling)){r.return=t.return,Xo=r;break}Xo=t.return}}function wl(e){for(;null!==Xo;){var t=Xo;if(t===e){Xo=null;break}var r=t.sibling;if(null!==r){r.return=t.return,Xo=r;break}Xo=t.return}}function _l(e){for(;null!==Xo;){var t=Xo;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{nl(4,t)}catch(l){kc(t,r,l)}break;case 1:var n=t.stateNode;if("function"===typeof n.componentDidMount){var a=t.return;try{n.componentDidMount()}catch(l){kc(t,a,l)}}var s=t.return;try{al(t)}catch(l){kc(t,s,l)}break;case 5:var i=t.return;try{al(t)}catch(l){kc(t,i,l)}}}catch(l){kc(t,t.return,l)}if(t===e){Xo=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Xo=o;break}Xo=t.return}}var jl,kl=Math.ceil,Nl=b.ReactCurrentDispatcher,Sl=b.ReactCurrentOwner,Cl=b.ReactCurrentBatchConfig,El=0,Tl=null,Pl=null,Ol=0,Ll=0,Il=ka(0),Al=0,Rl=null,Dl=0,Ml=0,Ul=0,zl=null,Fl=null,Bl=0,ql=1/0,Wl=null,Hl=!1,Vl=null,Gl=null,Kl=!1,$l=null,Jl=0,Ql=0,Yl=null,Xl=-1,Zl=0;function ec(){return 0!==(6&El)?Ye():-1!==Xl?Xl:Xl=Ye()}function tc(e){return 0===(1&e.mode)?1:0!==(2&El)&&0!==Ol?Ol&-Ol:null!==ps.transition?(0===Zl&&(Zl=pt()),Zl):0!==(e=xt)?e:e=void 0===(e=window.event)?16:Qt(e.type)}function rc(e,t,r,n){if(50<Ql)throw Ql=0,Yl=null,Error(s(185));vt(e,r,n),0!==(2&El)&&e===Tl||(e===Tl&&(0===(2&El)&&(Ml|=r),4===Al&&oc(e,Ol)),nc(e,n),1===r&&0===El&&0===(1&t.mode)&&(ql=Ye()+500,za&&qa()))}function nc(e,t){var r=e.callbackNode;!function(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,s=e.pendingLanes;0<s;){var i=31-it(s),o=1<<i,l=a[i];-1===l?0!==(o&r)&&0===(o&n)||(a[i]=ft(o,t)):l<=t&&(e.expiredLanes|=o),s&=~o}}(e,t);var n=ht(e,e===Tl?Ol:0);if(0===n)null!==r&&$e(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(null!=r&&$e(r),1===t)0===e.tag?function(e){za=!0,Ba(e)}(lc.bind(null,e)):Ba(lc.bind(null,e)),ia(function(){0===(6&El)&&qa()}),r=null;else{switch(bt(n)){case 1:r=Ze;break;case 4:r=et;break;case 16:default:r=tt;break;case 536870912:r=nt}r=Tc(r,ac.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function ac(e,t){if(Xl=-1,Zl=0,0!==(6&El))throw Error(s(327));var r=e.callbackNode;if(_c()&&e.callbackNode!==r)return null;var n=ht(e,e===Tl?Ol:0);if(0===n)return null;if(0!==(30&n)||0!==(n&e.expiredLanes)||t)t=gc(e,n);else{t=n;var a=El;El|=2;var i=mc();for(Tl===e&&Ol===t||(Wl=null,ql=Ye()+500,hc(e,t));;)try{yc();break}catch(l){fc(e,l)}Ss(),Nl.current=i,El=a,null!==Pl?t=0:(Tl=null,Ol=0,t=Al)}if(0!==t){if(2===t&&(0!==(a=mt(e))&&(n=a,t=sc(e,a))),1===t)throw r=Rl,hc(e,0),oc(e,n),nc(e,Ye()),r;if(6===t)oc(e,n);else{if(a=e.current.alternate,0===(30&n)&&!function(e){for(var t=e;;){if(16384&t.flags){var r=t.updateQueue;if(null!==r&&null!==(r=r.stores))for(var n=0;n<r.length;n++){var a=r[n],s=a.getSnapshot;a=a.value;try{if(!on(s(),a))return!1}catch(o){return!1}}}if(r=t.child,16384&t.subtreeFlags&&null!==r)r.return=t,t=r;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(a)&&(2===(t=gc(e,n))&&(0!==(i=mt(e))&&(n=i,t=sc(e,i))),1===t))throw r=Rl,hc(e,0),oc(e,n),nc(e,Ye()),r;switch(e.finishedWork=a,e.finishedLanes=n,t){case 0:case 1:throw Error(s(345));case 2:case 5:wc(e,Fl,Wl);break;case 3:if(oc(e,n),(130023424&n)===n&&10<(t=Bl+500-Ye())){if(0!==ht(e,0))break;if(((a=e.suspendedLanes)&n)!==n){ec(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=na(wc.bind(null,e,Fl,Wl),t);break}wc(e,Fl,Wl);break;case 4:if(oc(e,n),(4194240&n)===n)break;for(t=e.eventTimes,a=-1;0<n;){var o=31-it(n);i=1<<o,(o=t[o])>a&&(a=o),n&=~i}if(n=a,10<(n=(120>(n=Ye()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*kl(n/1960))-n)){e.timeoutHandle=na(wc.bind(null,e,Fl,Wl),n);break}wc(e,Fl,Wl);break;default:throw Error(s(329))}}}return nc(e,Ye()),e.callbackNode===r?ac.bind(null,e):null}function sc(e,t){var r=zl;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=Fl,Fl=r,null!==t&&ic(t)),e}function ic(e){null===Fl?Fl=e:Fl.push.apply(Fl,e)}function oc(e,t){for(t&=~Ul,t&=~Ml,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-it(t),n=1<<r;e[r]=-1,t&=~n}}function lc(e){if(0!==(6&El))throw Error(s(327));_c();var t=ht(e,0);if(0===(1&t))return nc(e,Ye()),null;var r=gc(e,t);if(0!==e.tag&&2===r){var n=mt(e);0!==n&&(t=n,r=sc(e,n))}if(1===r)throw r=Rl,hc(e,0),oc(e,t),nc(e,Ye()),r;if(6===r)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,Fl,Wl),nc(e,Ye()),null}function cc(e,t){var r=El;El|=1;try{return e(t)}finally{0===(El=r)&&(ql=Ye()+500,za&&qa())}}function uc(e){null!==$l&&0===$l.tag&&0===(6&El)&&_c();var t=El;El|=1;var r=Cl.transition,n=xt;try{if(Cl.transition=null,xt=1,e)return e()}finally{xt=n,Cl.transition=r,0===(6&(El=t))&&qa()}}function dc(){Ll=Il.current,Na(Il)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(-1!==r&&(e.timeoutHandle=-1,aa(r)),null!==Pl)for(r=Pl.return;null!==r;){var n=r;switch(ts(n),n.tag){case 1:null!==(n=n.type.childContextTypes)&&void 0!==n&&Ia();break;case 3:Qs(),Na(Ta),Na(Ea),ri();break;case 5:Xs(n);break;case 4:Qs();break;case 13:case 19:Na(Zs);break;case 10:Cs(n.type._context);break;case 22:case 23:dc()}r=r.return}if(Tl=e,Pl=e=Ic(e.current,null),Ol=Ll=t,Al=0,Rl=null,Ul=Ml=Dl=0,Fl=zl=null,null!==Os){for(t=0;t<Os.length;t++)if(null!==(n=(r=Os[t]).interleaved)){r.interleaved=null;var a=n.next,s=r.pending;if(null!==s){var i=s.next;s.next=a,n.next=i}r.pending=n}Os=null}return e}function fc(e,t){for(;;){var r=Pl;try{if(Ss(),ni.current=Yi,ci){for(var n=ii.memoizedState;null!==n;){var a=n.queue;null!==a&&(a.pending=null),n=n.next}ci=!1}if(si=0,li=oi=ii=null,ui=!1,di=0,Sl.current=null,null===r||null===r.return){Al=1,Rl=t,Pl=null;break}e:{var i=e,o=r.return,l=r,c=t;if(t=Ol,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=go(o);if(null!==m){m.flags&=-257,vo(m,o,l,0,t),1&m.mode&&po(i,u,t),c=u;var p=(t=m).updateQueue;if(null===p){var g=new Set;g.add(c),t.updateQueue=g}else p.add(c);break e}if(0===(1&t)){po(i,u,t),pc();break e}c=Error(s(426))}else if(as&&1&l.mode){var v=go(o);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),vo(v,o,l,0,t),ms(lo(c,l));break e}}i=c=lo(c,l),4!==Al&&(Al=2),null===zl?zl=[i]:zl.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t,Bs(i,fo(0,c,t));break e;case 1:l=c;var y=i.type,x=i.stateNode;if(0===(128&i.flags)&&("function"===typeof y.getDerivedStateFromError||null!==x&&"function"===typeof x.componentDidCatch&&(null===Gl||!Gl.has(x)))){i.flags|=65536,t&=-t,i.lanes|=t,Bs(i,mo(i,l,t));break e}}i=i.return}while(null!==i)}bc(r)}catch(b){t=b,Pl===r&&null!==r&&(Pl=r=r.return);continue}break}}function mc(){var e=Nl.current;return Nl.current=Yi,null===e?Yi:e}function pc(){0!==Al&&3!==Al&&2!==Al||(Al=4),null===Tl||0===(268435455&Dl)&&0===(268435455&Ml)||oc(Tl,Ol)}function gc(e,t){var r=El;El|=2;var n=mc();for(Tl===e&&Ol===t||(Wl=null,hc(e,t));;)try{vc();break}catch(a){fc(e,a)}if(Ss(),El=r,Nl.current=n,null!==Pl)throw Error(s(261));return Tl=null,Ol=0,Al}function vc(){for(;null!==Pl;)xc(Pl)}function yc(){for(;null!==Pl&&!Je();)xc(Pl)}function xc(e){var t=jl(e.alternate,e,Ll);e.memoizedProps=e.pendingProps,null===t?bc(e):Pl=t,Sl.current=null}function bc(e){var t=e;do{var r=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(r=Ko(r,t,Ll)))return void(Pl=r)}else{if(null!==(r=$o(r,t)))return r.flags&=32767,void(Pl=r);if(null===e)return Al=6,void(Pl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Pl=t);Pl=t=e}while(null!==t);0===Al&&(Al=5)}function wc(e,t,r){var n=xt,a=Cl.transition;try{Cl.transition=null,xt=1,function(e,t,r,n){do{_c()}while(null!==$l);if(0!==(6&El))throw Error(s(327));r=e.finishedWork;var a=e.finishedLanes;if(null===r)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(function(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-it(r),s=1<<a;t[a]=0,n[a]=-1,e[a]=-1,r&=~s}}(e,i),e===Tl&&(Pl=Tl=null,Ol=0),0===(2064&r.subtreeFlags)&&0===(2064&r.flags)||Kl||(Kl=!0,Tc(tt,function(){return _c(),null})),i=0!==(15990&r.flags),0!==(15990&r.subtreeFlags)||i){i=Cl.transition,Cl.transition=null;var o=xt;xt=1;var l=El;El|=4,Sl.current=null,function(e,t){if(ea=Ht,fn(e=hn())){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{var n=(r=(r=e.ownerDocument)&&r.defaultView||window).getSelection&&r.getSelection();if(n&&0!==n.rangeCount){r=n.anchorNode;var a=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch(w){r=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var m;h!==r||0!==a&&3!==h.nodeType||(l=o+a),h!==i||0!==n&&3!==h.nodeType||(c=o+n),3===h.nodeType&&(o+=h.nodeValue.length),null!==(m=h.firstChild);)f=h,h=m;for(;;){if(h===e)break t;if(f===r&&++u===a&&(l=o),f===i&&++d===n&&(c=o),null!==(m=h.nextSibling))break;f=(h=f).parentNode}h=m}r=-1===l||-1===c?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(ta={focusedElem:e,selectionRange:r},Ht=!1,Xo=t;null!==Xo;)if(e=(t=Xo).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Xo=e;else for(;null!==Xo;){t=Xo;try{var p=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==p){var g=p.memoizedProps,v=p.memoizedState,y=t.stateNode,x=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:to(t.type,g),v);y.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(s(163))}}catch(w){kc(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Xo=e;break}Xo=t.return}p=tl,tl=!1}(e,r),gl(r,e),mn(ta),Ht=!!ea,ta=ea=null,e.current=r,yl(r,e,a),Qe(),El=l,xt=o,Cl.transition=i}else e.current=r;if(Kl&&(Kl=!1,$l=e,Jl=a),i=e.pendingLanes,0===i&&(Gl=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(at,e,void 0,128===(128&e.current.flags))}catch(t){}}(r.stateNode),nc(e,Ye()),null!==t)for(n=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(Hl)throw Hl=!1,e=Vl,Vl=null,e;0!==(1&Jl)&&0!==e.tag&&_c(),i=e.pendingLanes,0!==(1&i)?e===Yl?Ql++:(Ql=0,Yl=e):Ql=0,qa()}(e,t,r,n)}finally{Cl.transition=a,xt=n}return null}function _c(){if(null!==$l){var e=bt(Jl),t=Cl.transition,r=xt;try{if(Cl.transition=null,xt=16>e?16:e,null===$l)var n=!1;else{if(e=$l,$l=null,Jl=0,0!==(6&El))throw Error(s(331));var a=El;for(El|=4,Xo=e.current;null!==Xo;){var i=Xo,o=i.child;if(0!==(16&Xo.flags)){var l=i.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Xo=u;null!==Xo;){var d=Xo;switch(d.tag){case 0:case 11:case 15:rl(8,d,i)}var h=d.child;if(null!==h)h.return=d,Xo=h;else for(;null!==Xo;){var f=(d=Xo).sibling,m=d.return;if(sl(d),d===u){Xo=null;break}if(null!==f){f.return=m,Xo=f;break}Xo=m}}}var p=i.alternate;if(null!==p){var g=p.child;if(null!==g){p.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}Xo=i}}if(0!==(2064&i.subtreeFlags)&&null!==o)o.return=i,Xo=o;else e:for(;null!==Xo;){if(0!==(2048&(i=Xo).flags))switch(i.tag){case 0:case 11:case 15:rl(9,i,i.return)}var y=i.sibling;if(null!==y){y.return=i.return,Xo=y;break e}Xo=i.return}}var x=e.current;for(Xo=x;null!==Xo;){var b=(o=Xo).child;if(0!==(2064&o.subtreeFlags)&&null!==b)b.return=o,Xo=b;else e:for(o=x;null!==Xo;){if(0!==(2048&(l=Xo).flags))try{switch(l.tag){case 0:case 11:case 15:nl(9,l)}}catch(_){kc(l,l.return,_)}if(l===o){Xo=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,Xo=w;break e}Xo=l.return}}if(El=a,qa(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(at,e)}catch(_){}n=!0}return n}finally{xt=r,Cl.transition=t}}return!1}function jc(e,t,r){e=zs(e,t=fo(0,t=lo(r,t),1),1),t=ec(),null!==e&&(vt(e,1,t),nc(e,t))}function kc(e,t,r){if(3===e.tag)jc(e,e,r);else for(;null!==t;){if(3===t.tag){jc(t,e,r);break}if(1===t.tag){var n=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof n.componentDidCatch&&(null===Gl||!Gl.has(n))){t=zs(t,e=mo(t,e=lo(r,e),1),1),e=ec(),null!==t&&(vt(t,1,e),nc(t,e));break}}t=t.return}}function Nc(e,t,r){var n=e.pingCache;null!==n&&n.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&r,Tl===e&&(Ol&r)===r&&(4===Al||3===Al&&(130023424&Ol)===Ol&&500>Ye()-Bl?hc(e,0):Ul|=r),nc(e,t)}function Sc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var r=ec();null!==(e=As(e,t))&&(vt(e,t,r),nc(e,r))}function Cc(e){var t=e.memoizedState,r=0;null!==t&&(r=t.retryLane),Sc(e,r)}function Ec(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;null!==a&&(r=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(s(314))}null!==n&&n.delete(t),Sc(e,r)}function Tc(e,t){return Ke(e,t)}function Pc(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Oc(e,t,r,n){return new Pc(e,t,r,n)}function Lc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ic(e,t){var r=e.alternate;return null===r?((r=Oc(e.tag,t,e.key,e.mode)).elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=14680064&e.flags,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Ac(e,t,r,n,a,i){var o=2;if(n=e,"function"===typeof e)Lc(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case j:return Rc(r.children,a,i,t);case k:o=8,a|=8;break;case N:return(e=Oc(12,r,t,2|a)).elementType=N,e.lanes=i,e;case T:return(e=Oc(13,r,t,a)).elementType=T,e.lanes=i,e;case P:return(e=Oc(19,r,t,a)).elementType=P,e.lanes=i,e;case I:return Dc(r,a,i,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case S:o=10;break e;case C:o=9;break e;case E:o=11;break e;case O:o=14;break e;case L:o=16,n=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Oc(o,r,t,a)).elementType=e,t.type=n,t.lanes=i,t}function Rc(e,t,r,n){return(e=Oc(7,e,n,t)).lanes=r,e}function Dc(e,t,r,n){return(e=Oc(22,e,n,t)).elementType=I,e.lanes=r,e.stateNode={isHidden:!1},e}function Mc(e,t,r){return(e=Oc(6,e,null,t)).lanes=r,e}function Uc(e,t,r){return(t=Oc(4,null!==e.children?e.children:[],e.key,t)).lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zc(e,t,r,n,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Fc(e,t,r,n,a,s,i,o,l){return e=new zc(e,t,r,o,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Oc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ds(s),e}function Bc(e){if(!e)return Ca;e:{if(qe(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(La(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var r=e.type;if(La(r))return Ra(e,r,t)}return t}function qc(e,t,r,n,a,s,i,o,l){return(e=Fc(r,n,!0,e,0,s,0,o,l)).context=Bc(null),r=e.current,(s=Us(n=ec(),a=tc(r))).callback=void 0!==t&&null!==t?t:null,zs(r,s,a),e.current.lanes=a,vt(e,a,n),nc(e,n),e}function Wc(e,t,r,n){var a=t.current,s=ec(),i=tc(a);return r=Bc(r),null===t.context?t.context=r:t.pendingContext=r,(t=Us(s,i)).payload={element:e},null!==(n=void 0===n?null:n)&&(t.callback=n),null!==(e=zs(a,t,i))&&(rc(e,a,i,s),Fs(e,a,i)),i}function Hc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Vc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var r=e.retryLane;e.retryLane=0!==r&&r<t?r:t}}function Gc(e,t){Vc(e,t),(e=e.alternate)&&Vc(e,t)}jl=function(e,t,r){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ta.current)xo=!0;else{if(0===(e.lanes&r)&&0===(128&t.flags))return xo=!1,function(e,t,r){switch(t.tag){case 3:To(t),fs();break;case 5:Ys(t);break;case 1:La(t.type)&&Da(t);break;case 4:Js(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,a=t.memoizedProps.value;Sa(_s,n._currentValue),n._currentValue=a;break;case 13:if(null!==(n=t.memoizedState))return null!==n.dehydrated?(Sa(Zs,1&Zs.current),t.flags|=128,null):0!==(r&t.child.childLanes)?Mo(e,t,r):(Sa(Zs,1&Zs.current),null!==(e=Ho(e,t,r))?e.sibling:null);Sa(Zs,1&Zs.current);break;case 19:if(n=0!==(r&t.childLanes),0!==(128&e.flags)){if(n)return qo(e,t,r);t.flags|=128}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),Sa(Zs,Zs.current),n)break;return null;case 22:case 23:return t.lanes=0,ko(e,t,r)}return Ho(e,t,r)}(e,t,r);xo=0!==(131072&e.flags)}else xo=!1,as&&0!==(1048576&t.flags)&&Za(t,Ga,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Wo(e,t),e=t.pendingProps;var a=Oa(t,Ea.current);Ts(t,r),a=pi(null,t,n,e,a,r);var i=gi();return t.flags|=1,"object"===typeof a&&null!==a&&"function"===typeof a.render&&void 0===a.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,La(n)?(i=!0,Da(t)):i=!1,t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,Ds(t),a.updater=no,t.stateNode=a,a._reactInternals=t,oo(t,n,e,r),t=Eo(null,t,n,!0,i,r)):(t.tag=0,as&&i&&es(t),bo(null,t,a,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Wo(e,t),e=t.pendingProps,n=(a=n._init)(n._payload),t.type=n,a=t.tag=function(e){if("function"===typeof e)return Lc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===E)return 11;if(e===O)return 14}return 2}(n),e=to(n,e),a){case 0:t=So(null,t,n,e,r);break e;case 1:t=Co(null,t,n,e,r);break e;case 11:t=wo(null,t,n,e,r);break e;case 14:t=_o(null,t,n,to(n.type,e),r);break e}throw Error(s(306,n,""))}return t;case 0:return n=t.type,a=t.pendingProps,So(e,t,n,a=t.elementType===n?a:to(n,a),r);case 1:return n=t.type,a=t.pendingProps,Co(e,t,n,a=t.elementType===n?a:to(n,a),r);case 3:e:{if(To(t),null===e)throw Error(s(387));n=t.pendingProps,a=(i=t.memoizedState).element,Ms(e,t),qs(t,n,null,r);var o=t.memoizedState;if(n=o.element,i.isDehydrated){if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=Po(e,t,n,r,a=lo(Error(s(423)),t));break e}if(n!==a){t=Po(e,t,n,r,a=lo(Error(s(424)),t));break e}for(ns=ca(t.stateNode.containerInfo.firstChild),rs=t,as=!0,ss=null,r=ws(t,null,n,r),t.child=r;r;)r.flags=-3&r.flags|4096,r=r.sibling}else{if(fs(),n===a){t=Ho(e,t,r);break e}bo(e,t,n,r)}t=t.child}return t;case 5:return Ys(t),null===e&&cs(t),n=t.type,a=t.pendingProps,i=null!==e?e.memoizedProps:null,o=a.children,ra(n,a)?o=null:null!==i&&ra(n,i)&&(t.flags|=32),No(e,t),bo(e,t,o,r),t.child;case 6:return null===e&&cs(t),null;case 13:return Mo(e,t,r);case 4:return Js(t,t.stateNode.containerInfo),n=t.pendingProps,null===e?t.child=bs(t,null,n,r):bo(e,t,n,r),t.child;case 11:return n=t.type,a=t.pendingProps,wo(e,t,n,a=t.elementType===n?a:to(n,a),r);case 7:return bo(e,t,t.pendingProps,r),t.child;case 8:case 12:return bo(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,a=t.pendingProps,i=t.memoizedProps,o=a.value,Sa(_s,n._currentValue),n._currentValue=o,null!==i)if(on(i.value,o)){if(i.children===a.children&&!Ta.current){t=Ho(e,t,r);break e}}else for(null!==(i=t.child)&&(i.return=t);null!==i;){var l=i.dependencies;if(null!==l){o=i.child;for(var c=l.firstContext;null!==c;){if(c.context===n){if(1===i.tag){(c=Us(-1,r&-r)).tag=2;var u=i.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=r,null!==(c=i.alternate)&&(c.lanes|=r),Es(i.return,r,t),l.lanes|=r;break}c=c.next}}else if(10===i.tag)o=i.type===t.type?null:i.child;else if(18===i.tag){if(null===(o=i.return))throw Error(s(341));o.lanes|=r,null!==(l=o.alternate)&&(l.lanes|=r),Es(o,r,t),o=i.sibling}else o=i.child;if(null!==o)o.return=i;else for(o=i;null!==o;){if(o===t){o=null;break}if(null!==(i=o.sibling)){i.return=o.return,o=i;break}o=o.return}i=o}bo(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,n=t.pendingProps.children,Ts(t,r),n=n(a=Ps(a)),t.flags|=1,bo(e,t,n,r),t.child;case 14:return a=to(n=t.type,t.pendingProps),_o(e,t,n,a=to(n.type,a),r);case 15:return jo(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:to(n,a),Wo(e,t),t.tag=1,La(n)?(e=!0,Da(t)):e=!1,Ts(t,r),so(t,n,a),oo(t,n,a,r),Eo(null,t,n,!0,e,r);case 19:return qo(e,t,r);case 22:return ko(e,t,r)}throw Error(s(156,t.tag))};var Kc="function"===typeof reportError?reportError:function(e){console.error(e)};function $c(e){this._internalRoot=e}function Jc(e){this._internalRoot=e}function Qc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Yc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Xc(){}function Zc(e,t,r,n,a){var s=r._reactRootContainer;if(s){var i=s;if("function"===typeof a){var o=a;a=function(){var e=Hc(i);o.call(e)}}Wc(t,i,e,a)}else i=function(e,t,r,n,a){if(a){if("function"===typeof n){var s=n;n=function(){var e=Hc(i);s.call(e)}}var i=qc(t,n,e,0,null,!1,0,"",Xc);return e._reactRootContainer=i,e[ma]=i.current,qn(8===e.nodeType?e.parentNode:e),uc(),i}for(;a=e.lastChild;)e.removeChild(a);if("function"===typeof n){var o=n;n=function(){var e=Hc(l);o.call(e)}}var l=Fc(e,0,!1,null,0,!1,0,"",Xc);return e._reactRootContainer=l,e[ma]=l.current,qn(8===e.nodeType?e.parentNode:e),uc(function(){Wc(t,l,r,n)}),l}(r,t,e,a,n);return Hc(i)}Jc.prototype.render=$c.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Wc(e,t,null,null)},Jc.prototype.unmount=$c.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uc(function(){Wc(null,e,null,null)}),t[ma]=null}},Jc.prototype.unstable_scheduleHydration=function(e){if(e){var t=kt();e={blockedOn:null,target:e,priority:t};for(var r=0;r<It.length&&0!==t&&t<It[r].priority;r++);It.splice(r,0,e),0===r&&Mt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=dt(t.pendingLanes);0!==r&&(yt(t,1|r),nc(t,Ye()),0===(6&El)&&(ql=Ye()+500,qa()))}break;case 13:uc(function(){var t=As(e,1);if(null!==t){var r=ec();rc(t,e,1,r)}}),Gc(e,1)}},_t=function(e){if(13===e.tag){var t=As(e,134217728);if(null!==t)rc(t,e,134217728,ec());Gc(e,134217728)}},jt=function(e){if(13===e.tag){var t=tc(e),r=As(e,t);if(null!==r)rc(r,e,t,ec());Gc(e,t)}},kt=function(){return xt},Nt=function(e,t){var r=xt;try{return xt=e,t()}finally{xt=r}},_e=function(e,t,r){switch(t){case"input":if(X(e,r),t=r.name,"radio"===r.type&&null!=t){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var a=wa(n);if(!a)throw Error(s(90));K(n),X(n,a)}}}break;case"textarea":se(e,r);break;case"select":null!=(t=r.value)&&re(e,!!r.multiple,t,!1)}},Ee=cc,Te=uc;var eu={usingClientEntryPoint:!1,Events:[xa,ba,wa,Se,Ce,cc]},tu={findFiberByHostInstance:ya,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ru={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ve(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var nu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nu.isDisabled&&nu.supportsFiber)try{at=nu.inject(ru),st=nu}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Qc(t))throw Error(s(200));return function(e,t,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==n?null:""+n,children:e,containerInfo:t,implementation:r}}(e,t,null,r)},t.createRoot=function(e,t){if(!Qc(e))throw Error(s(299));var r=!1,n="",a=Kc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(r=!0),void 0!==t.identifierPrefix&&(n=t.identifierPrefix),void 0!==t.onRecoverableError&&(a=t.onRecoverableError)),t=Fc(e,1,!1,null,0,r,0,n,a),e[ma]=t.current,qn(8===e.nodeType?e.parentNode:e),new $c(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=Ve(t))?null:e.stateNode},t.flushSync=function(e){return uc(e)},t.hydrate=function(e,t,r){if(!Yc(t))throw Error(s(200));return Zc(null,e,t,!0,r)},t.hydrateRoot=function(e,t,r){if(!Qc(e))throw Error(s(405));var n=null!=r&&r.hydratedSources||null,a=!1,i="",o=Kc;if(null!==r&&void 0!==r&&(!0===r.unstable_strictMode&&(a=!0),void 0!==r.identifierPrefix&&(i=r.identifierPrefix),void 0!==r.onRecoverableError&&(o=r.onRecoverableError)),t=qc(t,null,e,1,null!=r?r:null,a,0,i,o),e[ma]=t.current,qn(e),n)for(e=0;e<n.length;e++)a=(a=(r=n[e])._getVersion)(r._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new Jc(t)},t.render=function(e,t,r){if(!Yc(t))throw Error(s(200));return Zc(null,e,t,!1,r)},t.unmountComponentAtNode=function(e){if(!Yc(e))throw Error(s(40));return!!e._reactRootContainer&&(uc(function(){Zc(null,null,e,!1,function(){e._reactRootContainer=null,e[ma]=null})}),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Yc(r))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return Zc(e,t,r,!1,n)},t.version="18.3.1-next-f1338f8080-20240426"},736:function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=n(r(374));class s extends a.default{eq(e,t){return this.url.searchParams.append(e,"eq.".concat(t)),this}neq(e,t){return this.url.searchParams.append(e,"neq.".concat(t)),this}gt(e,t){return this.url.searchParams.append(e,"gt.".concat(t)),this}gte(e,t){return this.url.searchParams.append(e,"gte.".concat(t)),this}lt(e,t){return this.url.searchParams.append(e,"lt.".concat(t)),this}lte(e,t){return this.url.searchParams.append(e,"lte.".concat(t)),this}like(e,t){return this.url.searchParams.append(e,"like.".concat(t)),this}likeAllOf(e,t){return this.url.searchParams.append(e,"like(all).{".concat(t.join(","),"}")),this}likeAnyOf(e,t){return this.url.searchParams.append(e,"like(any).{".concat(t.join(","),"}")),this}ilike(e,t){return this.url.searchParams.append(e,"ilike.".concat(t)),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,"ilike(all).{".concat(t.join(","),"}")),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,"ilike(any).{".concat(t.join(","),"}")),this}is(e,t){return this.url.searchParams.append(e,"is.".concat(t)),this}in(e,t){const r=Array.from(new Set(t)).map(e=>"string"===typeof e&&new RegExp("[,()]").test(e)?'"'.concat(e,'"'):"".concat(e)).join(",");return this.url.searchParams.append(e,"in.(".concat(r,")")),this}contains(e,t){return"string"===typeof t?this.url.searchParams.append(e,"cs.".concat(t)):Array.isArray(t)?this.url.searchParams.append(e,"cs.{".concat(t.join(","),"}")):this.url.searchParams.append(e,"cs.".concat(JSON.stringify(t))),this}containedBy(e,t){return"string"===typeof t?this.url.searchParams.append(e,"cd.".concat(t)):Array.isArray(t)?this.url.searchParams.append(e,"cd.{".concat(t.join(","),"}")):this.url.searchParams.append(e,"cd.".concat(JSON.stringify(t))),this}rangeGt(e,t){return this.url.searchParams.append(e,"sr.".concat(t)),this}rangeGte(e,t){return this.url.searchParams.append(e,"nxl.".concat(t)),this}rangeLt(e,t){return this.url.searchParams.append(e,"sl.".concat(t)),this}rangeLte(e,t){return this.url.searchParams.append(e,"nxr.".concat(t)),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,"adj.".concat(t)),this}overlaps(e,t){return"string"===typeof t?this.url.searchParams.append(e,"ov.".concat(t)):this.url.searchParams.append(e,"ov.{".concat(t.join(","),"}")),this}textSearch(e,t){let{config:r,type:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a="";"plain"===n?a="pl":"phrase"===n?a="ph":"websearch"===n&&(a="w");const s=void 0===r?"":"(".concat(r,")");return this.url.searchParams.append(e,"".concat(a,"fts").concat(s,".").concat(t)),this}match(e){return Object.entries(e).forEach(e=>{let[t,r]=e;this.url.searchParams.append(t,"eq.".concat(r))}),this}not(e,t,r){return this.url.searchParams.append(e,"not.".concat(t,".").concat(r)),this}or(e){let{foreignTable:t,referencedTable:r=t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=r?"".concat(r,".or"):"or";return this.url.searchParams.append(n,"(".concat(e,")")),this}filter(e,t,r){return this.url.searchParams.append(e,"".concat(t,".").concat(r)),this}}t.default=s},829:function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=n(r(736));t.default=class{constructor(e,t){let{headers:r={},schema:n,fetch:a}=t;this.url=e,this.headers=new Headers(r),this.schema=n,this.fetch=a}select(e){let{head:t=!1,count:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=t?"HEAD":"GET";let s=!1;const i=(null!==e&&void 0!==e?e:"*").split("").map(e=>/\s/.test(e)&&!s?"":('"'===e&&(s=!s),e)).join("");return this.url.searchParams.set("select",i),r&&this.headers.append("Prefer","count=".concat(r)),new a.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e){let{count:t,defaultToNull:r=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n;if(t&&this.headers.append("Prefer","count=".concat(t)),r||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>'"'.concat(e,'"'));this.url.searchParams.set("columns",e.join(","))}}return new a.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(n=this.fetch)&&void 0!==n?n:fetch})}upsert(e){let{onConflict:t,ignoreDuplicates:r=!1,count:n,defaultToNull:s=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var i;if(this.headers.append("Prefer","resolution=".concat(r?"ignore":"merge","-duplicates")),void 0!==t&&this.url.searchParams.set("on_conflict",t),n&&this.headers.append("Prefer","count=".concat(n)),s||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>'"'.concat(e,'"'));this.url.searchParams.set("columns",e.join(","))}}return new a.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(i=this.fetch)&&void 0!==i?i:fetch})}update(e){let{count:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var r;return t&&this.headers.append("Prefer","count=".concat(t)),new a.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(r=this.fetch)&&void 0!==r?r:fetch})}delete(){let{count:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t;return e&&this.headers.append("Prefer","count=".concat(e)),new a.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:null!==(t=this.fetch)&&void 0!==t?t:fetch})}}},853:(e,t,r)=>{e.exports=r(234)},950:(e,t,r)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=r(730)},980:function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PostgrestError=t.PostgrestBuilder=t.PostgrestTransformBuilder=t.PostgrestFilterBuilder=t.PostgrestQueryBuilder=t.PostgrestClient=void 0;const a=n(r(210));t.PostgrestClient=a.default;const s=n(r(829));t.PostgrestQueryBuilder=s.default;const i=n(r(736));t.PostgrestFilterBuilder=i.default;const o=n(r(374));t.PostgrestTransformBuilder=o.default;const l=n(r(286));t.PostgrestBuilder=l.default;const c=n(r(611));t.PostgrestError=c.default,t.default={PostgrestClient:a.default,PostgrestQueryBuilder:s.default,PostgrestFilterBuilder:i.default,PostgrestTransformBuilder:o.default,PostgrestBuilder:l.default,PostgrestError:c.default}}},t={};function r(n){var a=t[n];if(void 0!==a)return a.exports;var s=t[n]={exports:{}};return e[n].call(s.exports,s,s.exports,r),s.exports}(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;r.t=function(n,a){if(1&a&&(n=this(n)),8&a)return n;if("object"===typeof n&&n){if(4&a&&n.__esModule)return n;if(16&a&&"function"===typeof n.then)return n}var s=Object.create(null);r.r(s);var i={};e=e||[null,t({}),t([]),t(t)];for(var o=2&a&&n;("object"==typeof o||"function"==typeof o)&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach(e=>i[e]=()=>n[e]);return i.default=()=>n,r.d(s,i),s}})(),r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n,a=r(43),s=r.t(a,2),i=r(391),o=r(950),l=r.t(o,2);function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},c.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(n||(n={}));const u="popstate";function d(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function h(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(r){}}}function f(e,t){return{usr:e.state,key:e.key,idx:t}}function m(e,t,r,n){return void 0===r&&(r=null),c({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?g(t):t,{state:r,key:t&&t.key||n||Math.random().toString(36).substr(2,8)})}function p(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&"?"!==r&&(t+="?"===r.charAt(0)?r:"?"+r),n&&"#"!==n&&(t+="#"===n.charAt(0)?n:"#"+n),t}function g(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function v(e,t,r,a){void 0===a&&(a={});let{window:s=document.defaultView,v5Compat:i=!1}=a,o=s.history,l=n.Pop,h=null,g=v();function v(){return(o.state||{idx:null}).idx}function y(){l=n.Pop;let e=v(),t=null==e?null:e-g;g=e,h&&h({action:l,location:b.location,delta:t})}function x(e){let t="null"!==s.location.origin?s.location.origin:s.location.href,r="string"===typeof e?e:p(e);return r=r.replace(/ $/,"%20"),d(t,"No window.location.(origin|href) available to create URL for href: "+r),new URL(r,t)}null==g&&(g=0,o.replaceState(c({},o.state,{idx:g}),""));let b={get action(){return l},get location(){return e(s,o)},listen(e){if(h)throw new Error("A history only accepts one active listener");return s.addEventListener(u,y),h=e,()=>{s.removeEventListener(u,y),h=null}},createHref:e=>t(s,e),createURL:x,encodeLocation(e){let t=x(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){l=n.Push;let a=m(b.location,e,t);r&&r(a,e),g=v()+1;let c=f(a,g),u=b.createHref(a);try{o.pushState(c,"",u)}catch(d){if(d instanceof DOMException&&"DataCloneError"===d.name)throw d;s.location.assign(u)}i&&h&&h({action:l,location:b.location,delta:1})},replace:function(e,t){l=n.Replace;let a=m(b.location,e,t);r&&r(a,e),g=v();let s=f(a,g),c=b.createHref(a);o.replaceState(s,"",c),i&&h&&h({action:l,location:b.location,delta:0})},go:e=>o.go(e)};return b}var y;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(y||(y={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function x(e,t,r){return void 0===r&&(r="/"),b(e,t,r,!1)}function b(e,t,r,n){let a=A(("string"===typeof t?g(t):t).pathname||"/",r);if(null==a)return null;let s=w(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let r=e.length===t.length&&e.slice(0,-1).every((e,r)=>e===t[r]);return r?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(s);let i=null;for(let o=0;null==i&&o<s.length;++o){let e=I(a);i=O(s[o],e,n)}return i}function w(e,t,r,n){void 0===t&&(t=[]),void 0===r&&(r=[]),void 0===n&&(n="");let a=(e,a,s)=>{let i={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:a,route:e};i.relativePath.startsWith("/")&&(d(i.relativePath.startsWith(n),'Absolute route path "'+i.relativePath+'" nested under path "'+n+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),i.relativePath=i.relativePath.slice(n.length));let o=z([n,i.relativePath]),l=r.concat(i);e.children&&e.children.length>0&&(d(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+o+'".'),w(e.children,t,l,o)),(null!=e.path||e.index)&&t.push({path:o,score:P(o,e.index),routesMeta:l})};return e.forEach((e,t)=>{var r;if(""!==e.path&&null!=(r=e.path)&&r.includes("?"))for(let n of _(e.path))a(e,t,n);else a(e,t)}),t}function _(e){let t=e.split("/");if(0===t.length)return[];let[r,...n]=t,a=r.endsWith("?"),s=r.replace(/\?$/,"");if(0===n.length)return a?[s,""]:[s];let i=_(n.join("/")),o=[];return o.push(...i.map(e=>""===e?s:[s,e].join("/"))),a&&o.push(...i),o.map(t=>e.startsWith("/")&&""===t?"/":t)}const j=/^:[\w-]+$/,k=3,N=2,S=1,C=10,E=-2,T=e=>"*"===e;function P(e,t){let r=e.split("/"),n=r.length;return r.some(T)&&(n+=E),t&&(n+=N),r.filter(e=>!T(e)).reduce((e,t)=>e+(j.test(t)?k:""===t?S:C),n)}function O(e,t,r){void 0===r&&(r=!1);let{routesMeta:n}=e,a={},s="/",i=[];for(let o=0;o<n.length;++o){let e=n[o],l=o===n.length-1,c="/"===s?t:t.slice(s.length)||"/",u=L({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),d=e.route;if(!u&&l&&r&&!n[n.length-1].route.index&&(u=L({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(a,u.params),i.push({params:a,pathname:z([s,u.pathname]),pathnameBase:F(z([s,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(s=z([s,u.pathnameBase]))}return i}function L(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=function(e,t,r){void 0===t&&(t=!1);void 0===r&&(r=!0);h("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,r)=>(n.push({paramName:t,isOptional:null!=r}),r?"/?([^\\/]+)?":"/([^\\/]+)"));e.endsWith("*")?(n.push({paramName:"*"}),a+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":""!==e&&"/"!==e&&(a+="(?:(?=\\/|$))");let s=new RegExp(a,t?void 0:"i");return[s,n]}(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let s=a[0],i=s.replace(/(.)\/+$/,"$1"),o=a.slice(1);return{params:n.reduce((e,t,r)=>{let{paramName:n,isOptional:a}=t;if("*"===n){let e=o[r]||"";i=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[r];return e[n]=a&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{}),pathname:s,pathnameBase:i,pattern:e}}function I(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return h(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function A(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&"/"!==n?null:e.slice(r)||"/"}function R(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the `to."+r+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function D(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function M(e,t){let r=D(e);return t?r.map((e,t)=>t===r.length-1?e.pathname:e.pathnameBase):r.map(e=>e.pathnameBase)}function U(e,t,r,n){let a;void 0===n&&(n=!1),"string"===typeof e?a=g(e):(a=c({},e),d(!a.pathname||!a.pathname.includes("?"),R("?","pathname","search",a)),d(!a.pathname||!a.pathname.includes("#"),R("#","pathname","hash",a)),d(!a.search||!a.search.includes("#"),R("#","search","hash",a)));let s,i=""===e||""===a.pathname,o=i?"/":a.pathname;if(null==o)s=r;else{let e=t.length-1;if(!n&&o.startsWith("..")){let t=o.split("/");for(;".."===t[0];)t.shift(),e-=1;a.pathname=t.join("/")}s=e>=0?t[e]:"/"}let l=function(e,t){void 0===t&&(t="/");let{pathname:r,search:n="",hash:a=""}="string"===typeof e?g(e):e,s=r?r.startsWith("/")?r:function(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?r.length>1&&r.pop():"."!==e&&r.push(e)}),r.length>1?r.join("/"):"/"}(r,t):t;return{pathname:s,search:B(n),hash:q(a)}}(a,s),u=o&&"/"!==o&&o.endsWith("/"),h=(i||"."===o)&&r.endsWith("/");return l.pathname.endsWith("/")||!u&&!h||(l.pathname+="/"),l}const z=e=>e.join("/").replace(/\/\/+/g,"/"),F=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),B=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",q=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function W(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const H=["post","put","patch","delete"],V=(new Set(H),["get",...H]);new Set(V),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function G(){return G=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},G.apply(this,arguments)}const K=a.createContext(null);const $=a.createContext(null);const J=a.createContext(null);const Q=a.createContext(null);const Y=a.createContext({outlet:null,matches:[],isDataRoute:!1});const X=a.createContext(null);function Z(){return null!=a.useContext(Q)}function ee(){return Z()||d(!1),a.useContext(Q).location}function te(e){a.useContext(J).static||a.useLayoutEffect(e)}function re(){let{isDataRoute:e}=a.useContext(Y);return e?function(){let{router:e}=de(ce.UseNavigateStable),t=fe(ue.UseNavigateStable),r=a.useRef(!1);return te(()=>{r.current=!0}),a.useCallback(function(n,a){void 0===a&&(a={}),r.current&&("number"===typeof n?e.navigate(n):e.navigate(n,G({fromRouteId:t},a)))},[e,t])}():function(){Z()||d(!1);let e=a.useContext(K),{basename:t,future:r,navigator:n}=a.useContext(J),{matches:s}=a.useContext(Y),{pathname:i}=ee(),o=JSON.stringify(M(s,r.v7_relativeSplatPath)),l=a.useRef(!1);return te(()=>{l.current=!0}),a.useCallback(function(r,a){if(void 0===a&&(a={}),!l.current)return;if("number"===typeof r)return void n.go(r);let s=U(r,JSON.parse(o),i,"path"===a.relative);null==e&&"/"!==t&&(s.pathname="/"===s.pathname?t:z([t,s.pathname])),(a.replace?n.replace:n.push)(s,a.state,a)},[t,n,o,i,e])}()}function ne(e,t,r,s){Z()||d(!1);let{navigator:i}=a.useContext(J),{matches:o}=a.useContext(Y),l=o[o.length-1],c=l?l.params:{},u=(l&&l.pathname,l?l.pathnameBase:"/");l&&l.route;let h,f=ee();if(t){var m;let e="string"===typeof t?g(t):t;"/"===u||(null==(m=e.pathname)?void 0:m.startsWith(u))||d(!1),h=e}else h=f;let p=h.pathname||"/",v=p;if("/"!==u){let e=u.replace(/^\//,"").split("/");v="/"+p.replace(/^\//,"").split("/").slice(e.length).join("/")}let y=x(e,{pathname:v});let b=le(y&&y.map(e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:z([u,i.encodeLocation?i.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?u:z([u,i.encodeLocation?i.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),o,r,s);return t&&b?a.createElement(Q.Provider,{value:{location:G({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:n.Pop}},b):b}function ae(){let e=function(){var e;let t=a.useContext(X),r=he(ue.UseRouteError),n=fe(ue.UseRouteError);if(void 0!==t)return t;return null==(e=r.errors)?void 0:e[n]}(),t=W(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:n};return a.createElement(a.Fragment,null,a.createElement("h2",null,"Unexpected Application Error!"),a.createElement("h3",{style:{fontStyle:"italic"}},t),r?a.createElement("pre",{style:s},r):null,null)}const se=a.createElement(ae,null);class ie extends a.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?a.createElement(Y.Provider,{value:this.props.routeContext},a.createElement(X.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function oe(e){let{routeContext:t,match:r,children:n}=e,s=a.useContext(K);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),a.createElement(Y.Provider,{value:t},n)}function le(e,t,r,n){var s;if(void 0===t&&(t=[]),void 0===r&&(r=null),void 0===n&&(n=null),null==e){var i;if(!r)return null;if(r.errors)e=r.matches;else{if(!(null!=(i=n)&&i.v7_partialHydration&&0===t.length&&!r.initialized&&r.matches.length>0))return null;e=r.matches}}let o=e,l=null==(s=r)?void 0:s.errors;if(null!=l){let e=o.findIndex(e=>e.route.id&&void 0!==(null==l?void 0:l[e.route.id]));e>=0||d(!1),o=o.slice(0,Math.min(o.length,e+1))}let c=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let a=0;a<o.length;a++){let e=o[a];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(u=a),e.route.id){let{loaderData:t,errors:n}=r,a=e.route.loader&&void 0===t[e.route.id]&&(!n||void 0===n[e.route.id]);if(e.route.lazy||a){c=!0,o=u>=0?o.slice(0,u+1):[o[0]];break}}}return o.reduceRight((e,n,s)=>{let i,d=!1,h=null,f=null;var m;r&&(i=l&&n.route.id?l[n.route.id]:void 0,h=n.route.errorElement||se,c&&(u<0&&0===s?(m="route-fallback",!1||me[m]||(me[m]=!0),d=!0,f=null):u===s&&(d=!0,f=n.route.hydrateFallbackElement||null)));let p=t.concat(o.slice(0,s+1)),g=()=>{let t;return t=i?h:d?f:n.route.Component?a.createElement(n.route.Component,null):n.route.element?n.route.element:e,a.createElement(oe,{match:n,routeContext:{outlet:e,matches:p,isDataRoute:null!=r},children:t})};return r&&(n.route.ErrorBoundary||n.route.errorElement||0===s)?a.createElement(ie,{location:r.location,revalidation:r.revalidation,component:h,error:i,children:g(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):g()},null)}var ce=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(ce||{}),ue=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(ue||{});function de(e){let t=a.useContext(K);return t||d(!1),t}function he(e){let t=a.useContext($);return t||d(!1),t}function fe(e){let t=function(){let e=a.useContext(Y);return e||d(!1),e}(),r=t.matches[t.matches.length-1];return r.route.id||d(!1),r.route.id}const me={};function pe(e,t){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}s.startTransition;function ge(e){let{to:t,replace:r,state:n,relative:s}=e;Z()||d(!1);let{future:i,static:o}=a.useContext(J),{matches:l}=a.useContext(Y),{pathname:c}=ee(),u=re(),h=U(t,M(l,i.v7_relativeSplatPath),c,"path"===s),f=JSON.stringify(h);return a.useEffect(()=>u(JSON.parse(f),{replace:r,state:n,relative:s}),[u,f,s,r,n]),null}function ve(e){d(!1)}function ye(e){let{basename:t="/",children:r=null,location:s,navigationType:i=n.Pop,navigator:o,static:l=!1,future:c}=e;Z()&&d(!1);let u=t.replace(/^\/*/,"/"),h=a.useMemo(()=>({basename:u,navigator:o,static:l,future:G({v7_relativeSplatPath:!1},c)}),[u,c,o,l]);"string"===typeof s&&(s=g(s));let{pathname:f="/",search:m="",hash:p="",state:v=null,key:y="default"}=s,x=a.useMemo(()=>{let e=A(f,u);return null==e?null:{location:{pathname:e,search:m,hash:p,state:v,key:y},navigationType:i}},[u,f,m,p,v,y,i]);return null==x?null:a.createElement(J.Provider,{value:h},a.createElement(Q.Provider,{children:r,value:x}))}function xe(e){let{children:t,location:r}=e;return ne(be(t),r)}new Promise(()=>{});a.Component;function be(e,t){void 0===t&&(t=[]);let r=[];return a.Children.forEach(e,(e,n)=>{if(!a.isValidElement(e))return;let s=[...t,n];if(e.type===a.Fragment)return void r.push.apply(r,be(e.props.children,s));e.type!==ve&&d(!1),e.props.index&&e.props.children&&d(!1);let i={id:e.props.id||s.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(i.children=be(e.props.children,s)),r.push(i)}),r}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);try{window.__reactRouterVersion="6"}catch(ea){}new Map;const we=s.startTransition;l.flushSync,s.useId;function _e(e){let{basename:t,children:r,future:n,window:s}=e,i=a.useRef();var o;null==i.current&&(i.current=(void 0===(o={window:s,v5Compat:!0})&&(o={}),v(function(e,t){let{pathname:r="/",search:n="",hash:a=""}=g(e.location.hash.substr(1));return r.startsWith("/")||r.startsWith(".")||(r="/"+r),m("",{pathname:r,search:n,hash:a},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){let r=e.document.querySelector("base"),n="";if(r&&r.getAttribute("href")){let t=e.location.href,r=t.indexOf("#");n=-1===r?t:t.slice(0,r)}return n+"#"+("string"===typeof t?t:p(t))},function(e,t){h("/"===e.pathname.charAt(0),"relative pathnames are not supported in hash history.push("+JSON.stringify(t)+")")},o)));let l=i.current,[c,u]=a.useState({action:l.action,location:l.location}),{v7_startTransition:d}=n||{},f=a.useCallback(e=>{d&&we?we(()=>u(e)):u(e)},[u,d]);return a.useLayoutEffect(()=>l.listen(f),[l,f]),a.useEffect(()=>pe(n),[n]),a.createElement(ye,{basename:t,children:r,location:c.location,navigationType:c.action,navigator:l,future:n})}"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;var je,ke;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(je||(je={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(ke||(ke={}));function Ne(e){return Ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ne(e)}function Se(e){var t=function(e,t){if("object"!=Ne(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Ne(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ne(t)?t:t+""}function Ce(e,t,r){return(t=Se(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ee(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Te(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ee(Object(r),!0).forEach(function(t){Ce(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ee(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}class Pe extends Error{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"FunctionsError",r=arguments.length>2?arguments[2]:void 0;super(e),this.name=t,this.context=r}}class Oe extends Pe{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Le extends Pe{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Ie extends Pe{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Ae;!function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"}(Ae||(Ae={}));var Re=function(e,t,r,n){return new(r||(r=Promise))(function(a,s){function i(e){try{l(n.next(e))}catch(ea){s(ea)}}function o(e){try{l(n.throw(e))}catch(ea){s(ea)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,o)}l((n=n.apply(e,t||[])).next())})};class De{constructor(e){let{headers:t={},customFetch:n,region:a=Ae.Any}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.url=e,this.headers=t,this.region=a,this.fetch=(e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Promise.resolve().then(r.bind(r,630)).then(e=>{let{default:r}=e;return r(...t)})}:fetch),function(){return t(...arguments)}})(n)}setAuth(e){this.headers.Authorization="Bearer ".concat(e)}invoke(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var r;return Re(this,void 0,void 0,function*(){try{const{headers:n,method:a,body:s}=t;let i={},{region:o}=t;o||(o=this.region);const l=new URL("".concat(this.url,"/").concat(e));let c;o&&"any"!==o&&(i["x-region"]=o,l.searchParams.set("forceFunctionRegion",o)),s&&(n&&!Object.prototype.hasOwnProperty.call(n,"Content-Type")||!n)&&("undefined"!==typeof Blob&&s instanceof Blob||s instanceof ArrayBuffer?(i["Content-Type"]="application/octet-stream",c=s):"string"===typeof s?(i["Content-Type"]="text/plain",c=s):"undefined"!==typeof FormData&&s instanceof FormData?c=s:(i["Content-Type"]="application/json",c=JSON.stringify(s)));const u=yield this.fetch(l.toString(),{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},i),this.headers),n),body:c}).catch(e=>{throw new Oe(e)}),d=u.headers.get("x-relay-error");if(d&&"true"===d)throw new Le(u);if(!u.ok)throw new Ie(u);let h,f=(null!==(r=u.headers.get("Content-Type"))&&void 0!==r?r:"text/plain").split(";")[0].trim();return h="application/json"===f?yield u.json():"application/octet-stream"===f?yield u.blob():"text/event-stream"===f?u:"multipart/form-data"===f?yield u.formData():yield u.text(),{data:h,error:null,response:u}}catch(n){return{data:null,error:n,response:n instanceof Ie||n instanceof Le?n.context:void 0}}})}}var Me=r(980);const{PostgrestClient:Ue,PostgrestQueryBuilder:ze,PostgrestFilterBuilder:Fe,PostgrestTransformBuilder:Be,PostgrestBuilder:qe,PostgrestError:We}=Me;const He=class{static detectEnvironment(){var e;if("undefined"!==typeof WebSocket)return{type:"native",constructor:WebSocket};if("undefined"!==typeof globalThis&&"undefined"!==typeof globalThis.WebSocket)return{type:"native",constructor:globalThis.WebSocket};if("undefined"!==typeof r.g&&"undefined"!==typeof r.g.WebSocket)return{type:"native",constructor:r.g.WebSocket};if("undefined"!==typeof globalThis&&"undefined"!==typeof globalThis.WebSocketPair&&"undefined"===typeof globalThis.WebSocket)return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if("undefined"!==typeof globalThis&&globalThis.EdgeRuntime||"undefined"!==typeof navigator&&(null===(e=navigator.userAgent)||void 0===e?void 0:e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if("undefined"!==typeof process){const e=process.versions;if(e&&e.node){const t=e.node,r=parseInt(t.replace(/^v/,"").split(".")[0]);return r>=22?"undefined"!==typeof globalThis.WebSocket?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:"Node.js ".concat(r," detected but native WebSocket not found."),workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:"Node.js ".concat(r," detected without native WebSocket support."),workaround:'For Node.js < 22, install "ws" package and provide it via the transport option:\nimport ws from "ws"\nnew RealtimeClient(url, { transport: ws })'}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+="\n\nSuggested solution: ".concat(e.workaround)),new Error(t)}static createWebSocket(e,t){return new(this.getWebSocketConstructor())(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return"native"===e.type||"ws"===e.type}catch(e){return!1}}},Ve="realtime-js/".concat("2.15.5"),Ge=1e4;var Ke,$e,Je,Qe,Ye,Xe;!function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"}(Ke||(Ke={})),function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"}($e||($e={})),function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"}(Je||(Je={})),function(e){e.websocket="websocket"}(Qe||(Qe={})),function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"}(Ye||(Ye={}));class Ze{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t("string"===typeof e?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){const n=t.getUint8(1),a=t.getUint8(2);let s=this.HEADER_LENGTH+2;const i=r.decode(e.slice(s,s+n));s+=n;const o=r.decode(e.slice(s,s+a));s+=a;return{ref:null,topic:i,event:o,payload:JSON.parse(r.decode(e.slice(s,e.byteLength)))}}}class et{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}!function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"}(Xe||(Xe={}));const tt=function(e,t){var r;const n=null!==(r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).skipTypes)&&void 0!==r?r:[];return Object.keys(t).reduce((r,a)=>(r[a]=rt(a,e,t,n),r),{})},rt=(e,t,r,n)=>{const a=t.find(t=>t.name===e),s=null===a||void 0===a?void 0:a.type,i=r[e];return s&&!n.includes(s)?nt(s,i):at(i)},nt=(e,t)=>{if("_"===e.charAt(0)){const r=e.slice(1,e.length);return lt(t,r)}switch(e){case Xe.bool:return st(t);case Xe.float4:case Xe.float8:case Xe.int2:case Xe.int4:case Xe.int8:case Xe.numeric:case Xe.oid:return it(t);case Xe.json:case Xe.jsonb:return ot(t);case Xe.timestamp:return ct(t);case Xe.abstime:case Xe.date:case Xe.daterange:case Xe.int4range:case Xe.int8range:case Xe.money:case Xe.reltime:case Xe.text:case Xe.time:case Xe.timestamptz:case Xe.timetz:case Xe.tsrange:case Xe.tstzrange:default:return at(t)}},at=e=>e,st=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},it=e=>{if("string"===typeof e){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},ot=e=>{if("string"===typeof e)try{return JSON.parse(e)}catch(t){return console.log("JSON parse error: ".concat(t)),e}return e},lt=(e,t)=>{if("string"!==typeof e)return e;const r=e.length-1,n=e[r];if("{"===e[0]&&"}"===n){let n;const s=e.slice(1,r);try{n=JSON.parse("["+s+"]")}catch(a){n=s?s.split(","):[]}return n.map(e=>nt(t,e))}return e},ct=e=>"string"===typeof e?e.replace(" ","T"):e,ut=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class dt{constructor(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Ge;this.channel=e,this.event=t,this.payload=r,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t(null===(r=this.receivedResp)||void 0===r?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);this.channel._on(this.refEvent,{},e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive(e){let{status:t,response:r}=e;this.recHooks.filter(e=>e.status===t).forEach(e=>e.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var ht,ft,mt,pt;!function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"}(ht||(ht={}));class gt{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(null===t||void 0===t?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},e=>{const{onJoin:t,onLeave:r,onSync:n}=this.caller;this.joinRef=this.channel._joinRef(),this.state=gt.syncState(this.state,e,t,r),this.pendingDiffs.forEach(e=>{this.state=gt.syncDiff(this.state,e,t,r)}),this.pendingDiffs=[],n()}),this.channel._on(r.diff,{},e=>{const{onJoin:t,onLeave:r,onSync:n}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(e):(this.state=gt.syncDiff(this.state,e,t,r),n())}),this.onJoin((e,t,r)=>{this.channel._trigger("presence",{event:"join",key:e,currentPresences:t,newPresences:r})}),this.onLeave((e,t,r)=>{this.channel._trigger("presence",{event:"leave",key:e,currentPresences:t,leftPresences:r})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,n){const a=this.cloneDeep(e),s=this.transformState(t),i={},o={};return this.map(a,(e,t)=>{s[e]||(o[e]=t)}),this.map(s,(e,t)=>{const r=a[e];if(r){const n=t.map(e=>e.presence_ref),a=r.map(e=>e.presence_ref),s=t.filter(e=>a.indexOf(e.presence_ref)<0),l=r.filter(e=>n.indexOf(e.presence_ref)<0);s.length>0&&(i[e]=s),l.length>0&&(o[e]=l)}else i[e]=t}),this.syncDiff(a,{joins:i,leaves:o},r,n)}static syncDiff(e,t,r,n){const{joins:a,leaves:s}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),n||(n=()=>{}),this.map(a,(t,n)=>{var a;const s=null!==(a=e[t])&&void 0!==a?a:[];if(e[t]=this.cloneDeep(n),s.length>0){const r=e[t].map(e=>e.presence_ref),n=s.filter(e=>r.indexOf(e.presence_ref)<0);e[t].unshift(...n)}r(t,s,n)}),this.map(s,(t,r)=>{let a=e[t];if(!a)return;const s=r.map(e=>e.presence_ref);a=a.filter(e=>s.indexOf(e.presence_ref)<0),e[t]=a,n(t,a,r),0===a.length&&delete e[t]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const n=e[r];return t[r]="metas"in n?n.metas.map(e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e)):n,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}!function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"}(ft||(ft={})),function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"}(mt||(mt={})),function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"}(pt||(pt={}));class vt{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}},r=arguments.length>2?arguments[2]:void 0;this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=$e.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new dt(this,Je.join,this.params,this.timeout),this.rejoinTimer=new et(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=$e.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(e=>e.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel","close ".concat(this.topic," ").concat(this._joinRef())),this.state=$e.closed,this.socket._remove(this)}),this._onError(e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel","error ".concat(this.topic),e),this.state=$e.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel","timeout ".concat(this.topic),this.joinPush.timeout),this.state=$e.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel","error ".concat(this.topic),e),this.state=$e.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Je.reply,{},(e,t)=>{this._trigger(this._replyEventName(t),e)}),this.presence=new gt(this),this.broadcastEndpointURL=ut(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.timeout;var r,n,a;if(this.socket.isConnected()||this.socket.connect(),this.state==$e.closed){const{config:{broadcast:s,presence:i,private:o}}=this.params,l=null!==(n=null===(r=this.bindings.postgres_changes)||void 0===r?void 0:r.map(e=>e.filter))&&void 0!==n?n:[],c=!!this.bindings[mt.PRESENCE]&&this.bindings[mt.PRESENCE].length>0||!0===(null===(a=this.params.config.presence)||void 0===a?void 0:a.enabled),u={},d={broadcast:s,presence:Object.assign(Object.assign({},i),{enabled:c}),postgres_changes:l,private:o};this.socket.accessTokenValue&&(u.access_token=this.socket.accessTokenValue),this._onError(t=>null===e||void 0===e?void 0:e(pt.CHANNEL_ERROR,t)),this._onClose(()=>null===e||void 0===e?void 0:e(pt.CLOSED)),this.updateJoinPayload(Object.assign({config:d},u)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async t=>{let{postgres_changes:r}=t;var n;if(this.socket.setAuth(),void 0!==r){const t=this.bindings.postgres_changes,a=null!==(n=null===t||void 0===t?void 0:t.length)&&void 0!==n?n:0,s=[];for(let n=0;n<a;n++){const a=t[n],{filter:{event:i,schema:o,table:l,filter:c}}=a,u=r&&r[n];if(!u||u.event!==i||u.schema!==o||u.table!==l||u.filter!==c)return this.unsubscribe(),this.state=$e.errored,void(null===e||void 0===e||e(pt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes")));s.push(Object.assign(Object.assign({},a),{id:u.id}))}return this.bindings.postgres_changes=s,void(e&&e(pt.SUBSCRIBED))}null===e||void 0===e||e(pt.SUBSCRIBED)}).receive("error",t=>{this.state=$e.errored,null===e||void 0===e||e(pt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(t).join(", ")||"error")))}).receive("timeout",()=>{null===e||void 0===e||e(pt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this.state===$e.joined&&e===mt.PRESENCE&&(this.socket.log("channel","resubscribe to ".concat(this.topic," due to change in presence callbacks on joined channel")),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,r)}async send(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var r,n;if(this._canPush()||"broadcast"!==e.type)return new Promise(r=>{var n,a,s;const i=this._push(e.type,e,t.timeout||this.timeout);"broadcast"!==e.type||(null===(s=null===(a=null===(n=this.params)||void 0===n?void 0:n.config)||void 0===a?void 0:a.broadcast)||void 0===s?void 0:s.ack)||r("ok"),i.receive("ok",()=>r("ok")),i.receive("error",()=>r("error")),i.receive("timeout",()=>r("timed out"))});{const{event:s,payload:i}=e,o={method:"POST",headers:{Authorization:this.socket.accessTokenValue?"Bearer ".concat(this.socket.accessTokenValue):"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:i,private:this.private}]})};try{const e=await this._fetchWithTimeout(this.broadcastEndpointURL,o,null!==(r=t.timeout)&&void 0!==r?r:this.timeout);return await(null===(n=e.body)||void 0===n?void 0:n.cancel()),e.ok?"ok":"error"}catch(a){return"AbortError"===a.name?"timed out":"error"}}}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this.state=$e.leaving;const t=()=>{this.socket.log("channel","leave ".concat(this.topic)),this._trigger(Je.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(n=>{r=new dt(this,Je.leave,{},e),r.receive("ok",()=>{t(),n("ok")}).receive("timeout",()=>{t(),n("timed out")}).receive("error",()=>{n("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{null===r||void 0===r||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=$e.closed,this.bindings={}}async _fetchWithTimeout(e,t,r){const n=new AbortController,a=setTimeout(()=>n.abort(),r),s=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:n.signal}));return clearTimeout(a),s}_push(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.timeout;if(!this.joinedOnce)throw"tried to push '".concat(e,"' to '").concat(this.topic,"' before joining. Use channel.subscribe() before pushing events");let n=new dt(this,e,t,r);return this._canPush()?n.send():this._addToPushBuffer(n),n}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>100){const e=this.pushBuffer.shift();e&&(e.destroy(),this.socket.log("channel","discarded push due to buffer overflow: ".concat(e.event),e.payload))}}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var n,a;const s=e.toLocaleLowerCase(),{close:i,error:o,leave:l,join:c}=Je;if(r&&[i,o,l,c].indexOf(s)>=0&&r!==this._joinRef())return;let u=this._onMessage(s,t,r);if(t&&!u)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(s)?null===(n=this.bindings.postgres_changes)||void 0===n||n.filter(e=>{var t,r,n;return"*"===(null===(t=e.filter)||void 0===t?void 0:t.event)||(null===(n=null===(r=e.filter)||void 0===r?void 0:r.event)||void 0===n?void 0:n.toLocaleLowerCase())===s}).map(e=>e.callback(u,r)):null===(a=this.bindings[s])||void 0===a||a.filter(e=>{var r,n,a,i,o,l;if(["broadcast","presence","postgres_changes"].includes(s)){if("id"in e){const s=e.id,i=null===(r=e.filter)||void 0===r?void 0:r.event;return s&&(null===(n=t.ids)||void 0===n?void 0:n.includes(s))&&("*"===i||(null===i||void 0===i?void 0:i.toLocaleLowerCase())===(null===(a=t.data)||void 0===a?void 0:a.type.toLocaleLowerCase()))}{const r=null===(o=null===(i=null===e||void 0===e?void 0:e.filter)||void 0===i?void 0:i.event)||void 0===o?void 0:o.toLocaleLowerCase();return"*"===r||r===(null===(l=null===t||void 0===t?void 0:t.event)||void 0===l?void 0:l.toLocaleLowerCase())}}return e.type.toLocaleLowerCase()===s}).map(e=>{if("object"===typeof u&&"ids"in u){const e=u.data,{schema:t,table:r,commit_timestamp:n,type:a,errors:s}=e,i={schema:t,table:r,commit_timestamp:n,eventType:a,new:{},old:{},errors:s};u=Object.assign(Object.assign({},i),this._getPayloadRecords(e))}e.callback(u,r)})}_isClosed(){return this.state===$e.closed}_isJoined(){return this.state===$e.joined}_isJoining(){return this.state===$e.joining}_isLeaving(){return this.state===$e.leaving}_replyEventName(e){return"chan_reply_".concat(e)}_on(e,t,r){const n=e.toLocaleLowerCase(),a={type:n,filter:t,callback:r};return this.bindings[n]?this.bindings[n].push(a):this.bindings[n]=[a],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(e=>{var n;return!((null===(n=e.type)||void 0===n?void 0:n.toLocaleLowerCase())===r&&vt.isEqual(e.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Je.close,{},e)}_onError(e){this._on(Je.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=$e.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return"INSERT"!==e.type&&"UPDATE"!==e.type||(t.new=tt(e.columns,e.record)),"UPDATE"!==e.type&&"DELETE"!==e.type||(t.old=tt(e.columns,e.old_record)),t}}const yt=()=>{},xt=25e3,bt=10,wt=100,_t=[1e3,2e3,5e3,1e4];class jt{constructor(e,t){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Ge,this.transport=null,this.heartbeatIntervalMs=xt,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=yt,this.ref=0,this.reconnectTimer=null,this.logger=yt,this.conn=null,this.sendBuffer=[],this.serializer=new Ze,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Promise.resolve().then(r.bind(r,630)).then(e=>{let{default:r}=e;return r(...t)}).catch(e=>{throw new Error("Failed to load @supabase/node-fetch: ".concat(e.message,". ")+"This is required for HTTP requests in Node.js environments without native fetch.")})}:fetch),function(){return t(...arguments)}},!(null===(n=null===t||void 0===t?void 0:t.params)||void 0===n?void 0:n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint="".concat(e,"/").concat(Qe.websocket),this.httpEndpoint=ut(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(null===t||void 0===t?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||null!==this.conn&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=He.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;if(t.includes("Node.js"))throw new Error("".concat(t,"\n\n")+'To use Realtime in Node.js, you need to provide a WebSocket implementation:\n\nOption 1: Use Node.js 22+ which has native WebSocket support\nOption 2: Install and provide the "ws" package:\n\n  npm install ws\n\n  import ws from "ws"\n  const client = new RealtimeClient(url, {\n    ...options,\n    transport: ws\n  })');throw new Error("WebSocket not available: ".concat(t))}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},e?this.conn.close(e,null!==t&&void 0!==t?t:""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return 0===this.channels.length&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(e=>e.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Ke.connecting:return Ye.Connecting;case Ke.open:return Ye.Open;case Ke.closing:return Ye.Closing;default:return Ye.Closed}}isConnected(){return this.connectionState()===Ye.Open}isConnecting(){return"connecting"===this._connectionState}isDisconnecting(){return"disconnecting"===this._connectionState}channel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}};const r="realtime:".concat(e),n=this.getChannels().find(e=>e.topic===r);if(n)return n;{const r=new vt("realtime:".concat(e),t,this);return this.channels.push(r),r}}push(e){const{topic:t,event:r,payload:n,ref:a}=e,s=()=>{this.encode(e,e=>{var t;null===(t=this.conn)||void 0===t||t.send(e)})};this.log("push","".concat(t," ").concat(r," (").concat(a,")"),n),this.isConnected()?s():this.sendBuffer.push(s)}async setAuth(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(ea){this.log("error","error in heartbeat callback",ea)}return this._wasManualDisconnect=!1,null===(e=this.conn)||void 0===e||e.close(1e3,"heartbeat timeout"),void setTimeout(()=>{var e;this.isConnected()||null===(e=this.reconnectTimer)||void 0===e||e.scheduleTimeout()},wt)}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(ea){this.log("error","error in heartbeat callback",ea)}this._setAuthSafely("heartbeat")}else try{this.heartbeatCallback("disconnected")}catch(ea){this.log("error","error in heartbeat callback",ea)}}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(t=>t.topic===e&&(t._isJoined()||t._isJoining()));t&&(this.log("transport",'leaving duplicate topic "'.concat(e,'"')),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,e=>{if("phoenix"===e.topic&&"phx_reply"===e.event)try{this.heartbeatCallback("ok"===e.payload.status?"ok":"error")}catch(ea){this.log("error","error in heartbeat callback",ea)}e.ref&&e.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:t,event:r,payload:n,ref:a}=e,s=a?"(".concat(a,")"):"",i=n.status||"";this.log("receive","".concat(i," ").concat(t," ").concat(r," ").concat(s).trim(),n),this.channels.filter(e=>e._isMember(t)).forEach(e=>e._trigger(r,n,a)),this._triggerStateCallbacks("message",e)})}_clearTimer(e){var t;"heartbeat"===e&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):"reconnect"===e&&(null===(t=this.reconnectTimer)||void 0===t||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport","connected to ".concat(this.endpointURL())),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker","starting worker for from ".concat(this.workerUrl)):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{"keepAlive"===e.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||null===(t=this.reconnectTimer)||void 0===t||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport","".concat(e)),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Je.error))}_appendParams(e,t){if(0===Object.keys(t).length)return e;const r=e.match(/\?/)?"&":"?",n=new URLSearchParams(t);return"".concat(e).concat(r).concat(n)}_workerObjectUrl(e){let t;if(e)t=e;else{const e=new Blob(['\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });'],{type:"application/javascript"});t=URL.createObjectURL(e)}return t}_setConnectionState(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._connectionState=e,"connecting"===e?this._wasManualDisconnect=!1:"disconnecting"===e&&(this._wasManualDisconnect=t)}async _performAuth(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e=t||(this.accessToken?await this.accessToken():this.accessTokenValue),this.accessTokenValue!=e&&(this.accessTokenValue=e,this.channels.forEach(t=>{const r={access_token:e,version:Ve};e&&t.updateJoinPayload(r),t.joinedOnce&&t._isJoined()&&t._push(Je.access_token,{access_token:e})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"general";this.setAuth().catch(t=>{this.log("error","error setting auth in ".concat(e),t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(t)}catch(ea){this.log("error","error in ".concat(e," callback"),ea)}})}catch(ea){this.log("error","error triggering ".concat(e," callbacks"),ea)}}_setupReconnectionTimer(){this.reconnectTimer=new et(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},bt)},this.reconnectAfterMs)}_initializeOptions(e){var t,r,n,a,s,i,o,l,c;if(this.transport=null!==(t=null===e||void 0===e?void 0:e.transport)&&void 0!==t?t:null,this.timeout=null!==(r=null===e||void 0===e?void 0:e.timeout)&&void 0!==r?r:Ge,this.heartbeatIntervalMs=null!==(n=null===e||void 0===e?void 0:e.heartbeatIntervalMs)&&void 0!==n?n:xt,this.worker=null!==(a=null===e||void 0===e?void 0:e.worker)&&void 0!==a&&a,this.accessToken=null!==(s=null===e||void 0===e?void 0:e.accessToken)&&void 0!==s?s:null,this.heartbeatCallback=null!==(i=null===e||void 0===e?void 0:e.heartbeatCallback)&&void 0!==i?i:yt,(null===e||void 0===e?void 0:e.params)&&(this.params=e.params),(null===e||void 0===e?void 0:e.logger)&&(this.logger=e.logger),((null===e||void 0===e?void 0:e.logLevel)||(null===e||void 0===e?void 0:e.log_level))&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=null!==(o=null===e||void 0===e?void 0:e.reconnectAfterMs)&&void 0!==o?o:e=>_t[e-1]||1e4,this.encode=null!==(l=null===e||void 0===e?void 0:e.encode)&&void 0!==l?l:(e,t)=>t(JSON.stringify(e)),this.decode=null!==(c=null===e||void 0===e?void 0:e.decode)&&void 0!==c?c:this.serializer.decode.bind(this.serializer),this.worker){if("undefined"!==typeof window&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=null===e||void 0===e?void 0:e.workerUrl}}}class kt extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Nt(e){return"object"===typeof e&&null!==e&&"__isStorageError"in e}class St extends kt{constructor(e,t,r){super(e),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Ct extends kt{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var Et=function(e,t,r,n){return new(r||(r=Promise))(function(a,s){function i(e){try{l(n.next(e))}catch(ea){s(ea)}}function o(e){try{l(n.throw(e))}catch(ea){s(ea)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,o)}l((n=n.apply(e,t||[])).next())})};const Tt=e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Promise.resolve().then(r.bind(r,630)).then(e=>{let{default:r}=e;return r(...t)})}:fetch),function(){return t(...arguments)}},Pt=e=>{if(Array.isArray(e))return e.map(e=>Pt(e));if("function"===typeof e||e!==Object(e))return e;const t={};return Object.entries(e).forEach(e=>{let[r,n]=e;const a=r.replace(/([-_][a-z])/gi,e=>e.toUpperCase().replace(/[-_]/g,""));t[a]=Pt(n)}),t};var Ot=function(e,t,r,n){return new(r||(r=Promise))(function(a,s){function i(e){try{l(n.next(e))}catch(ea){s(ea)}}function o(e){try{l(n.throw(e))}catch(ea){s(ea)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,o)}l((n=n.apply(e,t||[])).next())})};const Lt=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),It=(e,t,n)=>Ot(void 0,void 0,void 0,function*(){const a=yield Et(void 0,void 0,void 0,function*(){return"undefined"===typeof Response?(yield Promise.resolve().then(r.bind(r,630))).Response:Response});e instanceof a&&!(null===n||void 0===n?void 0:n.noResolveJson)?e.json().then(r=>{const n=e.status||500,a=(null===r||void 0===r?void 0:r.statusCode)||n+"";t(new St(Lt(r),n,a))}).catch(e=>{t(new Ct(Lt(e),e))}):t(new Ct(Lt(e),e))}),At=(e,t,r,n)=>{const a={method:e,headers:(null===t||void 0===t?void 0:t.headers)||{}};return"GET"!==e&&n?((e=>{if("object"!==typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)})(n)?(a.headers=Object.assign({"Content-Type":"application/json"},null===t||void 0===t?void 0:t.headers),a.body=JSON.stringify(n)):a.body=n,(null===t||void 0===t?void 0:t.duplex)&&(a.duplex=t.duplex),Object.assign(Object.assign({},a),r)):a};function Rt(e,t,r,n,a,s){return Ot(this,void 0,void 0,function*(){return new Promise((i,o)=>{e(r,At(t,n,a,s)).then(e=>{if(!e.ok)throw e;return(null===n||void 0===n?void 0:n.noResolveJson)?e:e.json()}).then(e=>i(e)).catch(e=>It(e,o,n))})})}function Dt(e,t,r,n){return Ot(this,void 0,void 0,function*(){return Rt(e,"GET",t,r,n)})}function Mt(e,t,r,n,a){return Ot(this,void 0,void 0,function*(){return Rt(e,"POST",t,n,a,r)})}function Ut(e,t,r,n,a){return Ot(this,void 0,void 0,function*(){return Rt(e,"PUT",t,n,a,r)})}function zt(e,t,r,n,a){return Ot(this,void 0,void 0,function*(){return Rt(e,"DELETE",t,n,a,r)})}var Ft=function(e,t,r,n){return new(r||(r=Promise))(function(a,s){function i(e){try{l(n.next(e))}catch(ea){s(ea)}}function o(e){try{l(n.throw(e))}catch(ea){s(ea)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,o)}l((n=n.apply(e,t||[])).next())})};const Bt={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},qt={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Wt{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=r,this.fetch=Tt(n)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,t,r,n){return Ft(this,void 0,void 0,function*(){try{let a;const s=Object.assign(Object.assign({},qt),n);let i=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(s.upsert)});const o=s.metadata;"undefined"!==typeof Blob&&r instanceof Blob?(a=new FormData,a.append("cacheControl",s.cacheControl),o&&a.append("metadata",this.encodeMetadata(o)),a.append("",r)):"undefined"!==typeof FormData&&r instanceof FormData?(a=r,a.append("cacheControl",s.cacheControl),o&&a.append("metadata",this.encodeMetadata(o))):(a=r,i["cache-control"]="max-age=".concat(s.cacheControl),i["content-type"]=s.contentType,o&&(i["x-metadata"]=this.toBase64(this.encodeMetadata(o)))),(null===n||void 0===n?void 0:n.headers)&&(i=Object.assign(Object.assign({},i),n.headers));const l=this._removeEmptyFolders(t),c=this._getFinalPath(l),u=yield("PUT"==e?Ut:Mt)(this.fetch,"".concat(this.url,"/object/").concat(c),a,Object.assign({headers:i},(null===s||void 0===s?void 0:s.duplex)?{duplex:s.duplex}:{}));return{data:{path:l,id:u.Id,fullPath:u.Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Nt(a))return{data:null,error:a};throw a}})}upload(e,t,r){return Ft(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,n){return Ft(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(e),s=this._getFinalPath(a),i=new URL(this.url+"/object/upload/sign/".concat(s));i.searchParams.set("token",t);try{let e;const t=Object.assign({upsert:qt.upsert},n),s=Object.assign(Object.assign({},this.headers),{"x-upsert":String(t.upsert)});"undefined"!==typeof Blob&&r instanceof Blob?(e=new FormData,e.append("cacheControl",t.cacheControl),e.append("",r)):"undefined"!==typeof FormData&&r instanceof FormData?(e=r,e.append("cacheControl",t.cacheControl)):(e=r,s["cache-control"]="max-age=".concat(t.cacheControl),s["content-type"]=t.contentType);return{data:{path:a,fullPath:(yield Ut(this.fetch,i.toString(),e,{headers:s})).Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Nt(o))return{data:null,error:o};throw o}})}createSignedUploadUrl(e,t){return Ft(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const n=Object.assign({},this.headers);(null===t||void 0===t?void 0:t.upsert)&&(n["x-upsert"]="true");const a=yield Mt(this.fetch,"".concat(this.url,"/object/upload/sign/").concat(r),{},{headers:n}),s=new URL(this.url+a.url),i=s.searchParams.get("token");if(!i)throw new kt("No token returned by API");return{data:{signedUrl:s.toString(),path:e,token:i},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Nt(r))return{data:null,error:r};throw r}})}update(e,t,r){return Ft(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return Ft(this,void 0,void 0,function*(){try{return{data:yield Mt(this.fetch,"".concat(this.url,"/object/move"),{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null===r||void 0===r?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Nt(n))return{data:null,error:n};throw n}})}copy(e,t,r){return Ft(this,void 0,void 0,function*(){try{return{data:{path:(yield Mt(this.fetch,"".concat(this.url,"/object/copy"),{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null===r||void 0===r?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Nt(n))return{data:null,error:n};throw n}})}createSignedUrl(e,t,r){return Ft(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e),a=yield Mt(this.fetch,"".concat(this.url,"/object/sign/").concat(n),Object.assign({expiresIn:t},(null===r||void 0===r?void 0:r.transform)?{transform:r.transform}:{}),{headers:this.headers});const s=(null===r||void 0===r?void 0:r.download)?"&download=".concat(!0===r.download?"":r.download):"";return a={signedUrl:encodeURI("".concat(this.url).concat(a.signedURL).concat(s))},{data:a,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Nt(n))return{data:null,error:n};throw n}})}createSignedUrls(e,t,r){return Ft(this,void 0,void 0,function*(){try{const n=yield Mt(this.fetch,"".concat(this.url,"/object/sign/").concat(this.bucketId),{expiresIn:t,paths:e},{headers:this.headers}),a=(null===r||void 0===r?void 0:r.download)?"&download=".concat(!0===r.download?"":r.download):"";return{data:n.map(e=>Object.assign(Object.assign({},e),{signedUrl:e.signedURL?encodeURI("".concat(this.url).concat(e.signedURL).concat(a)):null})),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Nt(n))return{data:null,error:n};throw n}})}download(e,t){return Ft(this,void 0,void 0,function*(){const r="undefined"!==typeof(null===t||void 0===t?void 0:t.transform)?"render/image/authenticated":"object",n=this.transformOptsToQueryString((null===t||void 0===t?void 0:t.transform)||{}),a=n?"?".concat(n):"";try{const t=this._getFinalPath(e),n=yield Dt(this.fetch,"".concat(this.url,"/").concat(r,"/").concat(t).concat(a),{headers:this.headers,noResolveJson:!0});return{data:yield n.blob(),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Nt(s))return{data:null,error:s};throw s}})}info(e){return Ft(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const e=yield Dt(this.fetch,"".concat(this.url,"/object/info/").concat(t),{headers:this.headers});return{data:Pt(e),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Nt(r))return{data:null,error:r};throw r}})}exists(e){return Ft(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield function(e,t,r,n){return Ot(this,void 0,void 0,function*(){return Rt(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}(this.fetch,"".concat(this.url,"/object/").concat(t),{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Nt(r)&&r instanceof Ct){const e=r.originalError;if([400,404].includes(null===e||void 0===e?void 0:e.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,t){const r=this._getFinalPath(e),n=[],a=(null===t||void 0===t?void 0:t.download)?"download=".concat(!0===t.download?"":t.download):"";""!==a&&n.push(a);const s="undefined"!==typeof(null===t||void 0===t?void 0:t.transform)?"render/image":"object",i=this.transformOptsToQueryString((null===t||void 0===t?void 0:t.transform)||{});""!==i&&n.push(i);let o=n.join("&");return""!==o&&(o="?".concat(o)),{data:{publicUrl:encodeURI("".concat(this.url,"/").concat(s,"/public/").concat(r).concat(o))}}}remove(e){return Ft(this,void 0,void 0,function*(){try{return{data:yield zt(this.fetch,"".concat(this.url,"/object/").concat(this.bucketId),{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Nt(t))return{data:null,error:t};throw t}})}list(e,t,r){return Ft(this,void 0,void 0,function*(){try{const n=Object.assign(Object.assign(Object.assign({},Bt),t),{prefix:e||""});return{data:yield Mt(this.fetch,"".concat(this.url,"/object/list/").concat(this.bucketId),n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Nt(n))return{data:null,error:n};throw n}})}listV2(e,t){return Ft(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield Mt(this.fetch,"".concat(this.url,"/object/list-v2/").concat(this.bucketId),r,{headers:this.headers},t),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Nt(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return"undefined"!==typeof Buffer?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return"".concat(this.bucketId,"/").concat(e.replace(/^\/+/,""))}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push("width=".concat(e.width)),e.height&&t.push("height=".concat(e.height)),e.resize&&t.push("resize=".concat(e.resize)),e.format&&t.push("format=".concat(e.format)),e.quality&&t.push("quality=".concat(e.quality)),t.join("&")}}const Ht={"X-Client-Info":"storage-js/".concat("2.12.1")};var Vt=function(e,t,r,n){return new(r||(r=Promise))(function(a,s){function i(e){try{l(n.next(e))}catch(ea){s(ea)}}function o(e){try{l(n.throw(e))}catch(ea){s(ea)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,o)}l((n=n.apply(e,t||[])).next())})};class Gt{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;this.shouldThrowOnError=!1;const a=new URL(e);if(null===n||void 0===n?void 0:n.useNewHostname){/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase."))}this.url=a.href,this.headers=Object.assign(Object.assign({},Ht),t),this.fetch=Tt(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return Vt(this,void 0,void 0,function*(){try{return{data:yield Dt(this.fetch,"".concat(this.url,"/bucket"),{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Nt(e))return{data:null,error:e};throw e}})}getBucket(e){return Vt(this,void 0,void 0,function*(){try{return{data:yield Dt(this.fetch,"".concat(this.url,"/bucket/").concat(e),{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Nt(t))return{data:null,error:t};throw t}})}createBucket(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{public:!1};return Vt(this,void 0,void 0,function*(){try{return{data:yield Mt(this.fetch,"".concat(this.url,"/bucket"),{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Nt(r))return{data:null,error:r};throw r}})}updateBucket(e,t){return Vt(this,void 0,void 0,function*(){try{return{data:yield Ut(this.fetch,"".concat(this.url,"/bucket/").concat(e),{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Nt(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Vt(this,void 0,void 0,function*(){try{return{data:yield Mt(this.fetch,"".concat(this.url,"/bucket/").concat(e,"/empty"),{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Nt(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Vt(this,void 0,void 0,function*(){try{return{data:yield zt(this.fetch,"".concat(this.url,"/bucket/").concat(e),{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Nt(t))return{data:null,error:t};throw t}})}}class Kt extends Gt{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},arguments.length>2?arguments[2]:void 0,arguments.length>3?arguments[3]:void 0)}from(e){return new Wt(this.url,this.headers,e,this.fetch)}}let $t="";$t="undefined"!==typeof Deno?"deno":"undefined"!==typeof document?"web":"undefined"!==typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";const Jt={headers:{"X-Client-Info":"supabase-js-".concat($t,"/").concat("2.57.4")}},Qt={schema:"public"},Yt={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Xt={};var Zt=r(630),er=function(e,t,r,n){return new(r||(r=Promise))(function(a,s){function i(e){try{l(n.next(e))}catch(ea){s(ea)}}function o(e){try{l(n.throw(e))}catch(ea){s(ea)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,o)}l((n=n.apply(e,t||[])).next())})};const tr=e=>{let t;return t=e||("undefined"===typeof fetch?Zt.default:fetch),function(){return t(...arguments)}},rr=(e,t,r)=>{const n=tr(r),a="undefined"===typeof Headers?Zt.Headers:Headers;return(r,s)=>er(void 0,void 0,void 0,function*(){var i;const o=null!==(i=yield t())&&void 0!==i?i:e;let l=new a(null===s||void 0===s?void 0:s.headers);return l.has("apikey")||l.set("apikey",e),l.has("Authorization")||l.set("Authorization","Bearer ".concat(o)),n(r,Object.assign(Object.assign({},s),{headers:l}))})};var nr=function(e,t,r,n){return new(r||(r=Promise))(function(a,s){function i(e){try{l(n.next(e))}catch(ea){s(ea)}}function o(e){try{l(n.throw(e))}catch(ea){s(ea)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,o)}l((n=n.apply(e,t||[])).next())})};const ar="2.71.1",sr=3e4,ir=9e4,or={"X-Client-Info":"gotrue-js/".concat(ar)},lr="X-Supabase-Api-Version",cr={timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"},ur=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i;class dr extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}}function hr(e){return"object"===typeof e&&null!==e&&"__isAuthError"in e}class fr extends dr{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}}class mr extends dr{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class pr extends dr{constructor(e,t,r,n){super(e,r,n),this.name=t,this.status=r}}class gr extends pr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class vr extends pr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class yr extends pr{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class xr extends pr{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class br extends pr{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class wr extends pr{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function _r(e){return hr(e)&&"AuthRetryableFetchError"===e.name}class jr extends pr{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}}class kr extends pr{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Nr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Sr=" \t\n\r=".split(""),Cr=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Sr.length;t+=1)e[Sr[t].charCodeAt(0)]=-2;for(let t=0;t<Nr.length;t+=1)e[Nr[t].charCodeAt(0)]=t;return e})();function Er(e,t,r){if(null!==e)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;r(Nr[e]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;r(Nr[e]),t.queuedBits-=6}}function Tr(e,t,r){const n=Cr[e];if(!(n>-1)){if(-2===n)return;throw new Error('Invalid Base64-URL character "'.concat(String.fromCharCode(e),'"'))}for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8}function Pr(e){const t=[],r=e=>{t.push(String.fromCodePoint(e))},n={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},s=e=>{!function(e,t,r){if(0===t.utf8seq){if(e<=127)return void r(e);for(let r=1;r<6;r+=1)if(0===(e>>7-r&1)){t.utf8seq=r;break}if(2===t.utf8seq)t.codepoint=31&e;else if(3===t.utf8seq)t.codepoint=15&e;else{if(4!==t.utf8seq)throw new Error("Invalid UTF-8 sequence");t.codepoint=7&e}t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|63&e,t.utf8seq-=1,0===t.utf8seq&&r(t.codepoint)}}(e,n,r)};for(let i=0;i<e.length;i+=1)Tr(e.charCodeAt(i),a,s);return t.join("")}function Or(e,t){if(!(e<=127)){if(e<=2047)return t(192|e>>6),void t(128|63&e);if(e<=65535)return t(224|e>>12),t(128|e>>6&63),void t(128|63&e);if(e<=1114111)return t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),void t(128|63&e);throw new Error("Unrecognized Unicode codepoint: ".concat(e.toString(16)))}t(e)}function Lr(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const t=1024*(n-55296)&65535;n=65536+(e.charCodeAt(r+1)-56320&65535|t),r+=1}Or(n,t)}}function Ir(e){const t=[],r={queue:0,queuedBits:0},n=e=>{t.push(e)};for(let a=0;a<e.length;a+=1)Tr(e.charCodeAt(a),r,n);return new Uint8Array(t)}function Ar(e){const t=[],r={queue:0,queuedBits:0},n=e=>{t.push(e)};return e.forEach(e=>Er(e,r,n)),Er(null,r,n),t.join("")}const Rr=()=>"undefined"!==typeof window&&"undefined"!==typeof document,Dr={tested:!1,writable:!1},Mr=()=>{if(!Rr())return!1;try{if("object"!==typeof globalThis.localStorage)return!1}catch(ea){return!1}if(Dr.tested)return Dr.writable;const e="lswt-".concat(Math.random()).concat(Math.random());try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Dr.tested=!0,Dr.writable=!0}catch(ea){Dr.tested=!0,Dr.writable=!1}return Dr.writable};const Ur=e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Promise.resolve().then(r.bind(r,630)).then(e=>{let{default:r}=e;return r(...t)})}:fetch),function(){return t(...arguments)}},zr=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},Fr=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch(n){return r}},Br=async(e,t)=>{await e.removeItem(t)};class qr{constructor(){this.promise=new qr.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}function Wr(e){const t=e.split(".");if(3!==t.length)throw new kr("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!ur.test(t[r]))throw new kr("JWT not in base64url format");return{header:JSON.parse(Pr(t[0])),payload:JSON.parse(Pr(t[1])),signature:Ir(t[2]),raw:{header:t[0],payload:t[1]}}}function Hr(e){return("0"+e.toString(16)).substr(-2)}async function Vr(e){if(!("undefined"!==typeof crypto&&"undefined"!==typeof crypto.subtle&&"undefined"!==typeof TextEncoder))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const t=await async function(e){const t=(new TextEncoder).encode(e),r=await crypto.subtle.digest("SHA-256",t),n=new Uint8Array(r);return Array.from(n).map(e=>String.fromCharCode(e)).join("")}(e);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Gr(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=function(){const e=new Uint32Array(56);if("undefined"===typeof crypto){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=e.length;let r="";for(let n=0;n<56;n++)r+=e.charAt(Math.floor(Math.random()*t));return r}return crypto.getRandomValues(e),Array.from(e,Hr).join("")}();let a=n;r&&(a+="/PASSWORD_RECOVERY"),await zr(e,"".concat(t,"-code-verifier"),a);const s=await Vr(n);return[s,n===s?"plain":"s256"]}qr.promiseConstructor=Promise;const Kr=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;const $r=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Jr(e){if(!$r.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Qr(){return new Proxy({},{get:(e,t)=>{if("__isUserNotAvailableProxy"===t)return!0;if("symbol"===typeof t){const e=t.toString();if("Symbol(Symbol.toPrimitive)"===e||"Symbol(Symbol.toStringTag)"===e||"Symbol(util.inspect.custom)"===e)return}throw new Error('@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "'.concat(t,'" property of the session object is not supported. Please use getUser() instead.'))},set:(e,t)=>{throw new Error('@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "'.concat(t,'" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.'))},deleteProperty:(e,t)=>{throw new Error('@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "'.concat(t,'" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.'))}})}function Yr(e){return JSON.parse(JSON.stringify(e))}var Xr=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r};const Zr=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),en=[502,503,504];async function tn(e){var t,r;if(!("object"===typeof(r=e)&&null!==r&&"status"in r&&"ok"in r&&"json"in r&&"function"===typeof r.json))throw new wr(Zr(e),0);if(en.includes(e.status))throw new wr(Zr(e),e.status);let n,a;try{n=await e.json()}catch(ea){throw new mr(Zr(ea),ea)}const s=function(e){const t=e.headers.get(lr);if(!t)return null;if(!t.match(Kr))return null;try{return new Date("".concat(t,"T00:00:00.0Z"))}catch(ea){return null}}(e);if(s&&s.getTime()>=cr.timestamp&&"object"===typeof n&&n&&"string"===typeof n.code?a=n.code:"object"===typeof n&&n&&"string"===typeof n.error_code&&(a=n.error_code),a){if("weak_password"===a)throw new jr(Zr(n),e.status,(null===(t=n.weak_password)||void 0===t?void 0:t.reasons)||[]);if("session_not_found"===a)throw new gr}else if("object"===typeof n&&n&&"object"===typeof n.weak_password&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((e,t)=>e&&"string"===typeof t,!0))throw new jr(Zr(n),e.status,n.weak_password.reasons);throw new fr(Zr(n),e.status||500,a)}async function rn(e,t,r,n){var a;const s=Object.assign({},null===n||void 0===n?void 0:n.headers);s[lr]||(s[lr]=cr.name),(null===n||void 0===n?void 0:n.jwt)&&(s.Authorization="Bearer ".concat(n.jwt));const i=null!==(a=null===n||void 0===n?void 0:n.query)&&void 0!==a?a:{};(null===n||void 0===n?void 0:n.redirectTo)&&(i.redirect_to=n.redirectTo);const o=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",l=await async function(e,t,r,n,a,s){const i=((e,t,r,n)=>{const a={method:e,headers:(null===t||void 0===t?void 0:t.headers)||{}};return"GET"===e?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null===t||void 0===t?void 0:t.headers),a.body=JSON.stringify(n),Object.assign(Object.assign({},a),r))})(t,n,a,s);let o;try{o=await e(r,Object.assign({},i))}catch(ea){throw console.error(ea),new wr(Zr(ea),0)}o.ok||await tn(o);if(null===n||void 0===n?void 0:n.noResolveJson)return o;try{return await o.json()}catch(ea){await tn(ea)}}(e,t,r+o,{headers:s,noResolveJson:null===n||void 0===n?void 0:n.noResolveJson},{},null===n||void 0===n?void 0:n.body);return(null===n||void 0===n?void 0:n.xform)?null===n||void 0===n?void 0:n.xform(l):{data:Object.assign({},l),error:null}}function nn(e){var t;let r=null;var n;(function(e){return e.access_token&&e.refresh_token&&e.expires_in})(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=(n=e.expires_in,Math.round(Date.now()/1e3)+n)));return{data:{session:r,user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function an(e){const t=nn(e);return!t.error&&e.weak_password&&"object"===typeof e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&"string"===typeof e.weak_password.message&&e.weak_password.reasons.reduce((e,t)=>e&&"string"===typeof t,!0)&&(t.data.weak_password=e.weak_password),t}function sn(e){var t;return{data:{user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function on(e){return{data:e,error:null}}function ln(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:s}=e,i=Xr(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:s},user:Object.assign({},i)},error:null}}function cn(e){return e}const un=["global","local","others"];var dn=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r};class hn{constructor(e){let{url:t="",headers:r={},fetch:n}=e;this.url=t,this.headers=r,this.fetch=Ur(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:un[0];if(un.indexOf(t)<0)throw new Error("@supabase/auth-js: Parameter scope must be one of ".concat(un.join(", ")));try{return await rn(this.fetch,"POST","".concat(this.url,"/logout?scope=").concat(t),{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(hr(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return await rn(this.fetch,"POST","".concat(this.url,"/invite"),{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:sn})}catch(r){if(hr(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=dn(e,["options"]),n=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(n.new_email=null===r||void 0===r?void 0:r.newEmail,delete n.newEmail),await rn(this.fetch,"POST","".concat(this.url,"/admin/generate_link"),{body:n,headers:this.headers,xform:ln,redirectTo:null===t||void 0===t?void 0:t.redirectTo})}catch(t){if(hr(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await rn(this.fetch,"POST","".concat(this.url,"/admin/users"),{body:e,headers:this.headers,xform:sn})}catch(t){if(hr(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,n,a,s,i,o;try{const l={nextPage:null,lastPage:0,total:0},c=await rn(this.fetch,"GET","".concat(this.url,"/admin/users"),{headers:this.headers,noResolveJson:!0,query:{page:null!==(r=null===(t=null===e||void 0===e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==r?r:"",per_page:null!==(a=null===(n=null===e||void 0===e?void 0:e.perPage)||void 0===n?void 0:n.toString())&&void 0!==a?a:""},xform:cn});if(c.error)throw c.error;const u=await c.json(),d=null!==(s=c.headers.get("x-total-count"))&&void 0!==s?s:0,h=null!==(o=null===(i=c.headers.get("link"))||void 0===i?void 0:i.split(","))&&void 0!==o?o:[];return h.length>0&&(h.forEach(e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),r=JSON.parse(e.split(";")[1].split("=")[1]);l["".concat(r,"Page")]=t}),l.total=parseInt(d)),{data:Object.assign(Object.assign({},u),l),error:null}}catch(l){if(hr(l))return{data:{users:[]},error:l};throw l}}async getUserById(e){Jr(e);try{return await rn(this.fetch,"GET","".concat(this.url,"/admin/users/").concat(e),{headers:this.headers,xform:sn})}catch(t){if(hr(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){Jr(e);try{return await rn(this.fetch,"PUT","".concat(this.url,"/admin/users/").concat(e),{body:t,headers:this.headers,xform:sn})}catch(r){if(hr(r))return{data:{user:null},error:r};throw r}}async deleteUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Jr(e);try{return await rn(this.fetch,"DELETE","".concat(this.url,"/admin/users/").concat(e),{headers:this.headers,body:{should_soft_delete:t},xform:sn})}catch(r){if(hr(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Jr(e.userId);try{const{data:t,error:r}=await rn(this.fetch,"GET","".concat(this.url,"/admin/users/").concat(e.userId,"/factors"),{headers:this.headers,xform:e=>({data:{factors:e},error:null})});return{data:t,error:r}}catch(t){if(hr(t))return{data:null,error:t};throw t}}async _deleteFactor(e){Jr(e.userId),Jr(e.id);try{return{data:await rn(this.fetch,"DELETE","".concat(this.url,"/admin/users/").concat(e.userId,"/factors/").concat(e.id),{headers:this.headers}),error:null}}catch(t){if(hr(t))return{data:null,error:t};throw t}}}function fn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const mn=!!(globalThis&&Mr()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"));class pn extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class gn extends pn{}async function vn(e,t,r){mn&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),mn&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,0===t?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async n=>{if(!n){if(0===t)throw mn&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new gn('Acquiring an exclusive Navigator LockManager lock "'.concat(e,'" immediately failed'));if(mn)try{const e=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(e,null,"  "))}catch(ea){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",ea)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}mn&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,n.name);try{return await r()}finally{mn&&console.log("@supabase/gotrue-js: navigatorLock: released",e,n.name)}}))}!function(){if("object"!==typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(ea){"undefined"!==typeof self&&(self.globalThis=self)}}();const yn={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:or,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function xn(e,t,r){return await r()}const bn={};class wn{constructor(e){var t,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=wn.nextInstanceID,wn.nextInstanceID+=1,this.instanceID>0&&Rr()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const n=Object.assign(Object.assign({},yn),e);if(this.logDebugMessages=!!n.debug,"function"===typeof n.debug&&(this.logger=n.debug),this.persistSession=n.persistSession,this.storageKey=n.storageKey,this.autoRefreshToken=n.autoRefreshToken,this.admin=new hn({url:n.url,headers:n.headers,fetch:n.fetch}),this.url=n.url,this.headers=n.headers,this.fetch=Ur(n.fetch),this.lock=n.lock||xn,this.detectSessionInUrl=n.detectSessionInUrl,this.flowType=n.flowType,this.hasCustomAuthorizationHeader=n.hasCustomAuthorizationHeader,n.lock?this.lock=n.lock:Rr()&&(null===(t=null===globalThis||void 0===globalThis?void 0:globalThis.navigator)||void 0===t?void 0:t.locks)?this.lock=vn:this.lock=xn,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(n.storage?this.storage=n.storage:Mr()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=fn(this.memoryStorage)),n.userStorage&&(this.userStorage=n.userStorage)):(this.memoryStorage={},this.storage=fn(this.memoryStorage)),Rr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(ea){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",ea)}null===(r=this.broadcastChannel)||void 0===r||r.addEventListener("message",async e=>{this._debug("received broadcast notification from other tab or client",e),await this._notifyAllSubscribers(e.data.event,e.data.session,!1)})}this.initialize()}get jwks(){var e,t;return null!==(t=null===(e=bn[this.storageKey])||void 0===e?void 0:e.jwks)&&void 0!==t?t:{keys:[]}}set jwks(e){bn[this.storageKey]=Object.assign(Object.assign({},bn[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return null!==(t=null===(e=bn[this.storageKey])||void 0===e?void 0:e.cachedAt)&&void 0!==t?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){bn[this.storageKey]=Object.assign(Object.assign({},bn[this.storageKey]),{cachedAt:e})}_debug(){if(this.logDebugMessages){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger("GoTrueClient@".concat(this.instanceID," (").concat(ar,") ").concat((new Date).toISOString()),...t)}return this}async initialize(){return this.initializePromise||(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))()),await this.initializePromise}async _initialize(){var e;try{const t=function(e){const t={},r=new URL(e);if(r.hash&&"#"===r.hash[0])try{new URLSearchParams(r.hash.substring(1)).forEach((e,r)=>{t[r]=e})}catch(ea){}return r.searchParams.forEach((e,r)=>{t[r]=e}),t}(window.location.href);let r="none";if(this._isImplicitGrantCallback(t)?r="implicit":await this._isPKCECallback(t)&&(r="pkce"),Rr()&&this.detectSessionInUrl&&"none"!==r){const{data:n,error:a}=await this._getSessionFromURL(t,r);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),function(e){return hr(e)&&"AuthImplicitGrantRedirectError"===e.name}(a)){const t=null===(e=a.details)||void 0===e?void 0:e.code;if("identity_already_exists"===t||"identity_not_found"===t||"single_identity_not_deletable"===t)return{error:a}}return await this._removeSession(),{error:a}}const{session:s,redirectType:i}=n;return this._debug("#_initialize()","detected session in URL",s,"redirect type",i),await this._saveSession(s),setTimeout(async()=>{"recovery"===i?await this._notifyAllSubscribers("PASSWORD_RECOVERY",s):await this._notifyAllSubscribers("SIGNED_IN",s)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return hr(t)?{error:t}:{error:new mr("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,n;try{const a=await rn(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,body:{data:null!==(r=null===(t=null===e||void 0===e?void 0:e.options)||void 0===t?void 0:t.data)&&void 0!==r?r:{},gotrue_meta_security:{captcha_token:null===(n=null===e||void 0===e?void 0:e.options)||void 0===n?void 0:n.captchaToken}},xform:nn}),{data:s,error:i}=a;if(i||!s)return{data:{user:null,session:null},error:i};const o=s.session,l=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(a){if(hr(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(e){var t,r,n;try{let a;if("email"in e){const{email:r,password:n,options:s}=e;let i=null,o=null;"pkce"===this.flowType&&([i,o]=await Gr(this.storage,this.storageKey)),a=await rn(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,redirectTo:null===s||void 0===s?void 0:s.emailRedirectTo,body:{email:r,password:n,data:null!==(t=null===s||void 0===s?void 0:s.data)&&void 0!==t?t:{},gotrue_meta_security:{captcha_token:null===s||void 0===s?void 0:s.captchaToken},code_challenge:i,code_challenge_method:o},xform:nn})}else{if(!("phone"in e))throw new yr("You must provide either an email or phone number and a password");{const{phone:t,password:s,options:i}=e;a=await rn(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,body:{phone:t,password:s,data:null!==(r=null===i||void 0===i?void 0:i.data)&&void 0!==r?r:{},channel:null!==(n=null===i||void 0===i?void 0:i.channel)&&void 0!==n?n:"sms",gotrue_meta_security:{captcha_token:null===i||void 0===i?void 0:i.captchaToken}},xform:nn})}}const{data:s,error:i}=a;if(i||!s)return{data:{user:null,session:null},error:i};const o=s.session,l=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(a){if(hr(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(e){try{let t;if("email"in e){const{email:r,password:n,options:a}=e;t=await rn(this.fetch,"POST","".concat(this.url,"/token?grant_type=password"),{headers:this.headers,body:{email:r,password:n,gotrue_meta_security:{captcha_token:null===a||void 0===a?void 0:a.captchaToken}},xform:an})}else{if(!("phone"in e))throw new yr("You must provide either an email or phone number and a password");{const{phone:r,password:n,options:a}=e;t=await rn(this.fetch,"POST","".concat(this.url,"/token?grant_type=password"),{headers:this.headers,body:{phone:r,password:n,gotrue_meta_security:{captcha_token:null===a||void 0===a?void 0:a.captchaToken}},xform:an})}}const{data:r,error:n}=t;return n?{data:{user:null,session:null},error:n}:r&&r.session&&r.user?(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:n}):{data:{user:null,session:null},error:new vr}}catch(t){if(hr(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,r,n,a;return await this._handleProviderSignIn(e.provider,{redirectTo:null===(t=e.options)||void 0===t?void 0:t.redirectTo,scopes:null===(r=e.options)||void 0===r?void 0:r.scopes,queryParams:null===(n=e.options)||void 0===n?void 0:n.queryParams,skipBrowserRedirect:null===(a=e.options)||void 0===a?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if("solana"===t)return await this.signInWithSolana(e);throw new Error('@supabase/auth-js: Unsupported chain "'.concat(t,'"'))}async signInWithSolana(e){var t,r,n,a,s,i,o,l,c,u,d,h;let f,m;if("message"in e)f=e.message,m=e.signature;else{const{chain:d,wallet:h,statement:p,options:g}=e;let v;if(Rr())if("object"===typeof h)v=h;else{const e=window;if(!("solana"in e)||"object"!==typeof e.solana||!("signIn"in e.solana&&"function"===typeof e.solana.signIn||"signMessage"in e.solana&&"function"===typeof e.solana.signMessage))throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.");v=e.solana}else{if("object"!==typeof h||!(null===g||void 0===g?void 0:g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");v=h}const y=new URL(null!==(t=null===g||void 0===g?void 0:g.url)&&void 0!==t?t:window.location.href);if("signIn"in v&&v.signIn){const e=await v.signIn(Object.assign(Object.assign(Object.assign({issuedAt:(new Date).toISOString()},null===g||void 0===g?void 0:g.signInWithSolana),{version:"1",domain:y.host,uri:y.href}),p?{statement:p}:null));let t;if(Array.isArray(e)&&e[0]&&"object"===typeof e[0])t=e[0];else{if(!(e&&"object"===typeof e&&"signedMessage"in e&&"signature"in e))throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");t=e}if(!("signedMessage"in t&&"signature"in t&&("string"===typeof t.signedMessage||t.signedMessage instanceof Uint8Array)&&t.signature instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields");f="string"===typeof t.signedMessage?t.signedMessage:(new TextDecoder).decode(t.signedMessage),m=t.signature}else{if(!("signMessage"in v)||"function"!==typeof v.signMessage||!("publicKey"in v)||"object"!==typeof v||!v.publicKey||!("toBase58"in v.publicKey)||"function"!==typeof v.publicKey.toBase58)throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");f=["".concat(y.host," wants you to sign in with your Solana account:"),v.publicKey.toBase58(),...p?["",p,""]:[""],"Version: 1","URI: ".concat(y.href),"Issued At: ".concat(null!==(n=null===(r=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===r?void 0:r.issuedAt)&&void 0!==n?n:(new Date).toISOString()),...(null===(a=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===a?void 0:a.notBefore)?["Not Before: ".concat(g.signInWithSolana.notBefore)]:[],...(null===(s=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===s?void 0:s.expirationTime)?["Expiration Time: ".concat(g.signInWithSolana.expirationTime)]:[],...(null===(i=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===i?void 0:i.chainId)?["Chain ID: ".concat(g.signInWithSolana.chainId)]:[],...(null===(o=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===o?void 0:o.nonce)?["Nonce: ".concat(g.signInWithSolana.nonce)]:[],...(null===(l=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===l?void 0:l.requestId)?["Request ID: ".concat(g.signInWithSolana.requestId)]:[],...(null===(u=null===(c=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===c?void 0:c.resources)||void 0===u?void 0:u.length)?["Resources",...g.signInWithSolana.resources.map(e=>"- ".concat(e))]:[]].join("\n");const e=await v.signMessage((new TextEncoder).encode(f),"utf8");if(!e||!(e instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");m=e}}try{const{data:t,error:r}=await rn(this.fetch,"POST","".concat(this.url,"/token?grant_type=web3"),{headers:this.headers,body:Object.assign({chain:"solana",message:f,signature:Ar(m)},(null===(d=e.options)||void 0===d?void 0:d.captchaToken)?{gotrue_meta_security:{captcha_token:null===(h=e.options)||void 0===h?void 0:h.captchaToken}}:null),xform:nn});if(r)throw r;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign({},t),error:r}):{data:{user:null,session:null},error:new vr}}catch(p){if(hr(p))return{data:{user:null,session:null},error:p};throw p}}async _exchangeCodeForSession(e){const t=await Fr(this.storage,"".concat(this.storageKey,"-code-verifier")),[r,n]=(null!==t&&void 0!==t?t:"").split("/");try{const{data:t,error:a}=await rn(this.fetch,"POST","".concat(this.url,"/token?grant_type=pkce"),{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:nn});if(await Br(this.storage,"".concat(this.storageKey,"-code-verifier")),a)throw a;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign(Object.assign({},t),{redirectType:null!==n&&void 0!==n?n:null}),error:a}):{data:{user:null,session:null,redirectType:null},error:new vr}}catch(a){if(hr(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(e){try{const{options:t,provider:r,token:n,access_token:a,nonce:s}=e,i=await rn(this.fetch,"POST","".concat(this.url,"/token?grant_type=id_token"),{headers:this.headers,body:{provider:r,id_token:n,access_token:a,nonce:s,gotrue_meta_security:{captcha_token:null===t||void 0===t?void 0:t.captchaToken}},xform:nn}),{data:o,error:l}=i;return l?{data:{user:null,session:null},error:l}:o&&o.session&&o.user?(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:o,error:l}):{data:{user:null,session:null},error:new vr}}catch(t){if(hr(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,r,n,a,s;try{if("email"in e){const{email:n,options:a}=e;let s=null,i=null;"pkce"===this.flowType&&([s,i]=await Gr(this.storage,this.storageKey));const{error:o}=await rn(this.fetch,"POST","".concat(this.url,"/otp"),{headers:this.headers,body:{email:n,data:null!==(t=null===a||void 0===a?void 0:a.data)&&void 0!==t?t:{},create_user:null===(r=null===a||void 0===a?void 0:a.shouldCreateUser)||void 0===r||r,gotrue_meta_security:{captcha_token:null===a||void 0===a?void 0:a.captchaToken},code_challenge:s,code_challenge_method:i},redirectTo:null===a||void 0===a?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:o}}if("phone"in e){const{phone:t,options:r}=e,{data:i,error:o}=await rn(this.fetch,"POST","".concat(this.url,"/otp"),{headers:this.headers,body:{phone:t,data:null!==(n=null===r||void 0===r?void 0:r.data)&&void 0!==n?n:{},create_user:null===(a=null===r||void 0===r?void 0:r.shouldCreateUser)||void 0===a||a,gotrue_meta_security:{captcha_token:null===r||void 0===r?void 0:r.captchaToken},channel:null!==(s=null===r||void 0===r?void 0:r.channel)&&void 0!==s?s:"sms"}});return{data:{user:null,session:null,messageId:null===i||void 0===i?void 0:i.message_id},error:o}}throw new yr("You must provide either an email or phone number.")}catch(i){if(hr(i))return{data:{user:null,session:null},error:i};throw i}}async verifyOtp(e){var t,r;try{let n,a;"options"in e&&(n=null===(t=e.options)||void 0===t?void 0:t.redirectTo,a=null===(r=e.options)||void 0===r?void 0:r.captchaToken);const{data:s,error:i}=await rn(this.fetch,"POST","".concat(this.url,"/verify"),{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:n,xform:nn});if(i)throw i;if(!s)throw new Error("An error occurred on token verification.");const o=s.session,l=s.user;return(null===o||void 0===o?void 0:o.access_token)&&(await this._saveSession(o),await this._notifyAllSubscribers("recovery"==e.type?"PASSWORD_RECOVERY":"SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(n){if(hr(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithSSO(e){var t,r,n;try{let a=null,s=null;return"pkce"===this.flowType&&([a,s]=await Gr(this.storage,this.storageKey)),await rn(this.fetch,"POST","".concat(this.url,"/sso"),{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(r=null===(t=e.options)||void 0===t?void 0:t.redirectTo)&&void 0!==r?r:void 0}),(null===(n=null===e||void 0===e?void 0:e.options)||void 0===n?void 0:n.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:s}),headers:this.headers,xform:on})}catch(a){if(hr(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new gr;const{error:n}=await rn(this.fetch,"GET","".concat(this.url,"/reauthenticate"),{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:n}})}catch(e){if(hr(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t="".concat(this.url,"/resend");if("email"in e){const{email:r,type:n,options:a}=e,{error:s}=await rn(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:n,gotrue_meta_security:{captcha_token:null===a||void 0===a?void 0:a.captchaToken}},redirectTo:null===a||void 0===a?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:s}}if("phone"in e){const{phone:r,type:n,options:a}=e,{data:s,error:i}=await rn(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:n,gotrue_meta_security:{captcha_token:null===a||void 0===a?void 0:a.captchaToken}}});return{data:{user:null,session:null,messageId:null===s||void 0===s?void 0:s.message_id},error:i}}throw new yr("You must provide either an email or phone number and a type")}catch(t){if(hr(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){await this.initializePromise;return await this._acquireLock(-1,async()=>this._useSession(async e=>e))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const e=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await e,await t()))();return this.pendingInLock.push((async()=>{try{await r}catch(ea){}})()),r}return await this.lock("lock:".concat(this.storageKey),e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const e=t();for(this.pendingInLock.push((async()=>{try{await e}catch(ea){}})()),await e;this.pendingInLock.length;){const e=[...this.pendingInLock];await Promise.all(e),this.pendingInLock.splice(0,e.length)}return await e}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let e=null;const t=await Fr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),null!==t&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=!!e.expires_at&&1e3*e.expires_at-Date.now()<ir;if(this._debug("#__loadSession()","session has".concat(r?"":" not"," expired"),"expires_at",e.expires_at),!r){if(this.userStorage){const t=await Fr(this.userStorage,this.storageKey+"-user");(null===t||void 0===t?void 0:t.user)?e.user=t.user:e.user=Qr()}if(this.storage.isServer&&e.user){let t=this.suppressGetSessionWarning;e=new Proxy(e,{get:(e,r,n)=>(t||"user"!==r||(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t=!0,this.suppressGetSessionWarning=!0),Reflect.get(e,r,n))})}return{data:{session:e},error:null}}const{session:n,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{session:null},error:a}:{data:{session:n},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;return await this._acquireLock(-1,async()=>await this._getUser())}async _getUser(e){try{return e?await rn(this.fetch,"GET","".concat(this.url,"/user"),{headers:this.headers,jwt:e,xform:sn}):await this._useSession(async e=>{var t,r,n;const{data:a,error:s}=e;if(s)throw s;return(null===(t=a.session)||void 0===t?void 0:t.access_token)||this.hasCustomAuthorizationHeader?await rn(this.fetch,"GET","".concat(this.url,"/user"),{headers:this.headers,jwt:null!==(n=null===(r=a.session)||void 0===r?void 0:r.access_token)&&void 0!==n?n:void 0,xform:sn}):{data:{user:null},error:new gr}})}catch(t){if(hr(t))return function(e){return hr(e)&&"AuthSessionMissingError"===e.name}(t)&&(await this._removeSession(),await Br(this.storage,"".concat(this.storageKey,"-code-verifier"))),{data:{user:null},error:t};throw t}}async updateUser(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return await this._useSession(async r=>{const{data:n,error:a}=r;if(a)throw a;if(!n.session)throw new gr;const s=n.session;let i=null,o=null;"pkce"===this.flowType&&null!=e.email&&([i,o]=await Gr(this.storage,this.storageKey));const{data:l,error:c}=await rn(this.fetch,"PUT","".concat(this.url,"/user"),{headers:this.headers,redirectTo:null===t||void 0===t?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:i,code_challenge_method:o}),jwt:s.access_token,xform:sn});if(c)throw c;return s.user=l.user,await this._saveSession(s),await this._notifyAllSubscribers("USER_UPDATED",s),{data:{user:s.user},error:null}})}catch(r){if(hr(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new gr;const t=Date.now()/1e3;let r=t,n=!0,a=null;const{payload:s}=Wr(e.access_token);if(s.exp&&(r=s.exp,n=r<=t),n){const{session:t,error:r}=await this._callRefreshToken(e.refresh_token);if(r)return{data:{user:null,session:null},error:r};if(!t)return{data:{user:null,session:null},error:null};a=t}else{const{data:n,error:s}=await this._getUser(e.access_token);if(s)throw s;a={access_token:e.access_token,refresh_token:e.refresh_token,user:n.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(t){if(hr(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){const{data:n,error:a}=t;if(a)throw a;e=null!==(r=n.session)&&void 0!==r?r:void 0}if(!(null===e||void 0===e?void 0:e.refresh_token))throw new gr;const{session:n,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{user:null,session:null},error:a}:n?{data:{user:n.user,session:n},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(hr(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!Rr())throw new xr("No browser detected.");if(e.error||e.error_description||e.error_code)throw new xr(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if("pkce"===this.flowType)throw new br("Not a valid PKCE flow url.");break;case"pkce":if("implicit"===this.flowType)throw new xr("Not a valid implicit grant flow url.")}if("pkce"===t){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new br("No code detected.");const{data:t,error:r}=await this._exchangeCodeForSession(e.code);if(r)throw r;const n=new URL(window.location.href);return n.searchParams.delete("code"),window.history.replaceState(window.history.state,"",n.toString()),{data:{session:t.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:n,access_token:a,refresh_token:s,expires_in:i,expires_at:o,token_type:l}=e;if(!a||!i||!s||!l)throw new xr("No session defined in URL");const c=Math.round(Date.now()/1e3),u=parseInt(i);let d=c+u;o&&(d=parseInt(o));const h=d-c;1e3*h<=sr&&console.warn("@supabase/gotrue-js: Session as retrieved from URL expires in ".concat(h,"s, should have been closer to ").concat(u,"s"));const f=d-u;c-f>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",f,d,c):c-f<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",f,d,c);const{data:m,error:p}=await this._getUser(a);if(p)throw p;const g={provider_token:r,provider_refresh_token:n,access_token:a,expires_in:u,expires_at:d,refresh_token:s,token_type:l,user:m.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:g,redirectType:e.type},error:null}}catch(r){if(hr(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return Boolean(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await Fr(this.storage,"".concat(this.storageKey,"-code-verifier"));return!(!e.code||!t)}async signOut(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{scope:"global"};return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut(){let{scope:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{scope:"global"};return await this._useSession(async t=>{var r;const{data:n,error:a}=t;if(a)return{error:a};const s=null===(r=n.session)||void 0===r?void 0:r.access_token;if(s){const{error:t}=await this.admin.signOut(s,e);if(t&&(!function(e){return hr(e)&&"AuthApiError"===e.name}(t)||404!==t.status&&401!==t.status&&403!==t.status))return{error:t}}return"others"!==e&&(await this._removeSession(),await Br(this.storage,"".concat(this.storageKey,"-code-verifier"))),{error:null}})}onAuthStateChange(e){const t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>{await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})})(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,n;try{const{data:{session:n},error:a}=t;if(a)throw a;await(null===(r=this.stateChangeEmitters.get(e))||void 0===r?void 0:r.callback("INITIAL_SESSION",n)),this._debug("INITIAL_SESSION","callback id",e,"session",n)}catch(a){await(null===(n=this.stateChangeEmitters.get(e))||void 0===n?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=null,n=null;"pkce"===this.flowType&&([r,n]=await Gr(this.storage,this.storageKey,!0));try{return await rn(this.fetch,"POST","".concat(this.url,"/recover"),{body:{email:e,code_challenge:r,code_challenge_method:n,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(a){if(hr(a))return{data:null,error:a};throw a}}async getUserIdentities(){var e;try{const{data:t,error:r}=await this.getUser();if(r)throw r;return{data:{identities:null!==(e=t.user.identities)&&void 0!==e?e:[]},error:null}}catch(t){if(hr(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:r,error:n}=await this._useSession(async t=>{var r,n,a,s,i;const{data:o,error:l}=t;if(l)throw l;const c=await this._getUrlForProvider("".concat(this.url,"/user/identities/authorize"),e.provider,{redirectTo:null===(r=e.options)||void 0===r?void 0:r.redirectTo,scopes:null===(n=e.options)||void 0===n?void 0:n.scopes,queryParams:null===(a=e.options)||void 0===a?void 0:a.queryParams,skipBrowserRedirect:!0});return await rn(this.fetch,"GET",c,{headers:this.headers,jwt:null!==(i=null===(s=o.session)||void 0===s?void 0:s.access_token)&&void 0!==i?i:void 0})});if(n)throw n;return Rr()&&!(null===(t=e.options)||void 0===t?void 0:t.skipBrowserRedirect)&&window.location.assign(null===r||void 0===r?void 0:r.url),{data:{provider:e.provider,url:null===r||void 0===r?void 0:r.url},error:null}}catch(r){if(hr(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,n;const{data:a,error:s}=t;if(s)throw s;return await rn(this.fetch,"DELETE","".concat(this.url,"/user/identities/").concat(e.identity_id),{headers:this.headers,jwt:null!==(n=null===(r=a.session)||void 0===r?void 0:r.access_token)&&void 0!==n?n:void 0})})}catch(t){if(hr(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t="#_refreshAccessToken(".concat(e.substring(0,5),"...)");this._debug(t,"begin");try{const a=Date.now();return await(r=async r=>(r>0&&await async function(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}(200*Math.pow(2,r-1)),this._debug(t,"refreshing attempt",r),await rn(this.fetch,"POST","".concat(this.url,"/token?grant_type=refresh_token"),{body:{refresh_token:e},headers:this.headers,xform:nn})),n=(e,t)=>{const r=200*Math.pow(2,e);return t&&_r(t)&&Date.now()+r-a<sr},new Promise((e,t)=>{(async()=>{for(let a=0;a<1/0;a++)try{const t=await r(a);if(!n(a,null,t))return void e(t)}catch(ea){if(!n(a,ea))return void t(ea)}})()}))}catch(a){if(this._debug(t,"error",a),hr(a))return{data:{session:null,user:null},error:a};throw a}finally{this._debug(t,"end")}var r,n}_isValidSession(e){return"object"===typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider("".concat(this.url,"/authorize"),e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),Rr()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const a=await Fr(this.storage,this.storageKey);if(a&&this.userStorage){let t=await Fr(this.userStorage,this.storageKey+"-user");this.storage.isServer||!Object.is(this.storage,this.userStorage)||t||(t={user:a.user},await zr(this.userStorage,this.storageKey+"-user",t)),a.user=null!==(e=null===t||void 0===t?void 0:t.user)&&void 0!==e?e:Qr()}else if(a&&!a.user&&!a.user){const e=await Fr(this.storage,this.storageKey+"-user");e&&(null===e||void 0===e?void 0:e.user)?(a.user=e.user,await Br(this.storage,this.storageKey+"-user"),await zr(this.storage,this.storageKey,a)):a.user=Qr()}if(this._debug(r,"session from storage",a),!this._isValidSession(a))return this._debug(r,"session is not valid"),void(null!==a&&await this._removeSession());const s=1e3*(null!==(t=a.expires_at)&&void 0!==t?t:1/0)-Date.now()<ir;if(this._debug(r,"session has".concat(s?"":" not"," expired with margin of ").concat(ir,"s")),s){if(this.autoRefreshToken&&a.refresh_token){const{error:e}=await this._callRefreshToken(a.refresh_token);e&&(console.error(e),_r(e)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",e),await this._removeSession()))}}else if(a.user&&!0===a.user.__isUserNotAvailableProxy)try{const{data:e,error:t}=await this._getUser(a.access_token);!t&&(null===e||void 0===e?void 0:e.user)?(a.user=e.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(n){console.error("Error getting user data:",n),this._debug(r,"error getting user data, skipping SIGNED_IN notification",n)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){return this._debug(r,"error",a),void console.error(a)}finally{this._debug(r,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new gr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n="#_callRefreshToken(".concat(e.substring(0,5),"...)");this._debug(n,"begin");try{this.refreshingDeferred=new qr;const{data:t,error:r}=await this._refreshAccessToken(e);if(r)throw r;if(!t.session)throw new gr;await this._saveSession(t.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",t.session);const n={session:t.session,error:null};return this.refreshingDeferred.resolve(n),n}catch(a){if(this._debug(n,"error",a),hr(a)){const e={session:null,error:a};return _r(a)||await this._removeSession(),null===(t=this.refreshingDeferred)||void 0===t||t.resolve(e),e}throw null===(r=this.refreshingDeferred)||void 0===r||r.reject(a),a}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const n="#_notifyAllSubscribers(".concat(e,")");this._debug(n,"begin",t,"broadcast = ".concat(r));try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const n=[],a=Array.from(this.stateChangeEmitters.values()).map(async r=>{try{await r.callback(e,t)}catch(ea){n.push(ea)}});if(await Promise.all(a),n.length>0){for(let e=0;e<n.length;e+=1)console.error(n[e]);throw n[0]}}finally{this._debug(n,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),r=t.user&&!0===t.user.__isUserNotAvailableProxy;if(this.userStorage){!r&&t.user&&await zr(this.userStorage,this.storageKey+"-user",{user:t.user});const e=Object.assign({},t);delete e.user;const n=Yr(e);await zr(this.storage,this.storageKey,n)}else{const e=Yr(t);await zr(this.storage,this.storageKey,e)}}async _removeSession(){this._debug("#_removeSession()"),await Br(this.storage,this.storageKey),await Br(this.storage,this.storageKey+"-code-verifier"),await Br(this.storage,this.storageKey+"-user"),this.userStorage&&await Br(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Rr()&&(null===window||void 0===window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(ea){console.error("removing visibilitychange callback failed",ea)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),sr);this.autoRefreshTicker=e,e&&"object"===typeof e&&"function"===typeof e.unref?e.unref():"undefined"!==typeof Deno&&"function"===typeof Deno.unrefTimer&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");const n=Math.floor((1e3*r.expires_at-e)/sr);this._debug("#_autoRefreshTokenTick()","access token expires in ".concat(n," ticks, a tick lasts ").concat(sr,"ms, refresh threshold is ").concat(3," ticks")),n<=3&&await this._callRefreshToken(r.refresh_token)})}catch(ea){console.error("Auto refresh tick failed with error. This is likely a transient error.",ea)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(ea){if(!(ea.isAcquireTimeout||ea instanceof pn))throw ea;this._debug("auto refresh token tick lock not available")}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Rr()||!(null===window||void 0===window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),null===window||void 0===window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t="#_onVisibilityChanged(".concat(e,")");this._debug(t,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{"visible"===document.visibilityState?await this._recoverAndRefresh():this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")}))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){const n=["provider=".concat(encodeURIComponent(t))];if((null===r||void 0===r?void 0:r.redirectTo)&&n.push("redirect_to=".concat(encodeURIComponent(r.redirectTo))),(null===r||void 0===r?void 0:r.scopes)&&n.push("scopes=".concat(encodeURIComponent(r.scopes))),"pkce"===this.flowType){const[e,t]=await Gr(this.storage,this.storageKey),r=new URLSearchParams({code_challenge:"".concat(encodeURIComponent(e)),code_challenge_method:"".concat(encodeURIComponent(t))});n.push(r.toString())}if(null===r||void 0===r?void 0:r.queryParams){const e=new URLSearchParams(r.queryParams);n.push(e.toString())}return(null===r||void 0===r?void 0:r.skipBrowserRedirect)&&n.push("skip_http_redirect=".concat(r.skipBrowserRedirect)),"".concat(e,"?").concat(n.join("&"))}async _unenroll(e){try{return await this._useSession(async t=>{var r;const{data:n,error:a}=t;return a?{data:null,error:a}:await rn(this.fetch,"DELETE","".concat(this.url,"/factors/").concat(e.factorId),{headers:this.headers,jwt:null===(r=null===n||void 0===n?void 0:n.session)||void 0===r?void 0:r.access_token})})}catch(t){if(hr(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,n;const{data:a,error:s}=t;if(s)return{data:null,error:s};const i=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},"phone"===e.factorType?{phone:e.phone}:{issuer:e.issuer}),{data:o,error:l}=await rn(this.fetch,"POST","".concat(this.url,"/factors"),{body:i,headers:this.headers,jwt:null===(r=null===a||void 0===a?void 0:a.session)||void 0===r?void 0:r.access_token});return l?{data:null,error:l}:("totp"===e.factorType&&(null===(n=null===o||void 0===o?void 0:o.totp)||void 0===n?void 0:n.qr_code)&&(o.totp.qr_code="data:image/svg+xml;utf-8,".concat(o.totp.qr_code)),{data:o,error:null})})}catch(t){if(hr(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:n,error:a}=t;if(a)return{data:null,error:a};const{data:s,error:i}=await rn(this.fetch,"POST","".concat(this.url,"/factors/").concat(e.factorId,"/verify"),{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:null===(r=null===n||void 0===n?void 0:n.session)||void 0===r?void 0:r.access_token});return i?{data:null,error:i}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+s.expires_in},s)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",s),{data:s,error:i})})}catch(t){if(hr(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:n,error:a}=t;return a?{data:null,error:a}:await rn(this.fetch,"POST","".concat(this.url,"/factors/").concat(e.factorId,"/challenge"),{body:{channel:e.channel},headers:this.headers,jwt:null===(r=null===n||void 0===n?void 0:n.session)||void 0===r?void 0:r.access_token})})}catch(t){if(hr(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const r=(null===e||void 0===e?void 0:e.factors)||[],n=r.filter(e=>"totp"===e.factor_type&&"verified"===e.status),a=r.filter(e=>"phone"===e.factor_type&&"verified"===e.status);return{data:{all:r,totp:n,phone:a},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,r;const{data:{session:n},error:a}=e;if(a)return{data:null,error:a};if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:s}=Wr(n.access_token);let i=null;s.aal&&(i=s.aal);let o=i;(null!==(r=null===(t=n.user.factors)||void 0===t?void 0:t.filter(e=>"verified"===e.status))&&void 0!==r?r:[]).length>0&&(o="aal2");return{data:{currentLevel:i,nextLevel:o,currentAuthenticationMethods:s.amr||[]},error:null}}))}async fetchJwk(e){let t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{keys:[]}).keys.find(t=>t.kid===e);if(t)return t;const r=Date.now();if(t=this.jwks.keys.find(t=>t.kid===e),t&&this.jwks_cached_at+6e5>r)return t;const{data:n,error:a}=await rn(this.fetch,"GET","".concat(this.url,"/.well-known/jwks.json"),{headers:this.headers});if(a)throw a;return n.keys&&0!==n.keys.length?(this.jwks=n,this.jwks_cached_at=r,t=n.keys.find(t=>t.kid===e),t||null):null}async getClaims(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{let r=e;if(!r){const{data:e,error:t}=await this.getSession();if(t||!e.session)return{data:null,error:t};r=e.session.access_token}const{header:n,payload:a,signature:s,raw:{header:i,payload:o}}=Wr(r);(null===t||void 0===t?void 0:t.allowExpired)||function(e){if(!e)throw new Error("Missing exp claim");if(e<=Math.floor(Date.now()/1e3))throw new Error("JWT has expired")}(a.exp);const l=n.alg&&!n.alg.startsWith("HS")&&n.kid&&"crypto"in globalThis&&"subtle"in globalThis.crypto?await this.fetchJwk(n.kid,(null===t||void 0===t?void 0:t.keys)?{keys:t.keys}:null===t||void 0===t?void 0:t.jwks):null;if(!l){const{error:e}=await this.getUser(r);if(e)throw e;return{data:{claims:a,header:n,signature:s},error:null}}const c=function(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}(n.alg),u=await crypto.subtle.importKey("jwk",l,c,!0,["verify"]);if(!await crypto.subtle.verify(c,u,s,function(e){const t=[];return Lr(e,e=>t.push(e)),new Uint8Array(t)}("".concat(i,".").concat(o))))throw new kr("Invalid JWT signature");return{data:{claims:a,header:n,signature:s},error:null}}catch(r){if(hr(r))return{data:null,error:r};throw r}}}wn.nextInstanceID=0;const _n=wn;class jn extends _n{constructor(e){super(e)}}var kn=function(e,t,r,n){return new(r||(r=Promise))(function(a,s){function i(e){try{l(n.next(e))}catch(ea){s(ea)}}function o(e){try{l(n.throw(e))}catch(ea){s(ea)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,o)}l((n=n.apply(e,t||[])).next())})};class Nn{constructor(e,t,r){var n,a,s;this.supabaseUrl=e,this.supabaseKey=t;const i=function(e){const t=null===e||void 0===e?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL((r=t).endsWith("/")?r:r+"/")}catch(n){throw Error("Invalid supabaseUrl: Provided URL is malformed.")}var r}(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",i),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",i),this.storageUrl=new URL("storage/v1",i),this.functionsUrl=new URL("functions/v1",i);const o="sb-".concat(i.hostname.split(".")[0],"-auth-token"),l=function(e,t){var r,n;const{db:a,auth:s,realtime:i,global:o}=e,{db:l,auth:c,realtime:u,global:d}=t,h={db:Object.assign(Object.assign({},l),a),auth:Object.assign(Object.assign({},c),s),realtime:Object.assign(Object.assign({},u),i),storage:{},global:Object.assign(Object.assign(Object.assign({},d),o),{headers:Object.assign(Object.assign({},null!==(r=null===d||void 0===d?void 0:d.headers)&&void 0!==r?r:{}),null!==(n=null===o||void 0===o?void 0:o.headers)&&void 0!==n?n:{})}),accessToken:()=>nr(this,void 0,void 0,function*(){return""})};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}(null!==r&&void 0!==r?r:{},{db:Qt,realtime:Xt,auth:Object.assign(Object.assign({},Yt),{storageKey:o}),global:Jt});this.storageKey=null!==(n=l.auth.storageKey)&&void 0!==n?n:"",this.headers=null!==(a=l.global.headers)&&void 0!==a?a:{},l.accessToken?(this.accessToken=l.accessToken,this.auth=new Proxy({},{get:(e,t)=>{throw new Error("@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.".concat(String(t)," is not possible"))}})):this.auth=this._initSupabaseAuthClient(null!==(s=l.auth)&&void 0!==s?s:{},this.headers,l.global.fetch),this.fetch=rr(t,this._getAccessToken.bind(this),l.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},l.realtime)),this.rest=new Ue(new URL("rest/v1",i).href,{headers:this.headers,schema:l.db.schema,fetch:this.fetch}),this.storage=new Kt(this.storageUrl.href,this.headers,this.fetch,null===r||void 0===r?void 0:r.storage),l.accessToken||this._listenForAuthEvents()}get functions(){return new De(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.rest.rpc(e,t,r)}channel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}};return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return kn(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return null!==(t=null===(e=r.session)||void 0===e?void 0:e.access_token)&&void 0!==t?t:this.supabaseKey})}_initSupabaseAuthClient(e,t,r){let{autoRefreshToken:n,persistSession:a,detectSessionInUrl:s,storage:i,userStorage:o,storageKey:l,flowType:c,lock:u,debug:d}=e;const h={Authorization:"Bearer ".concat(this.supabaseKey),apikey:"".concat(this.supabaseKey)};return new jn({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),t),storageKey:l,autoRefreshToken:n,persistSession:a,detectSessionInUrl:s,storage:i,userStorage:o,flowType:c,lock:u,debug:d,fetch:r,hasCustomAuthorizationHeader:Object.keys(this.headers).some(e=>"authorization"===e.toLowerCase())})}_initRealtimeClient(e){return new jt(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},null===e||void 0===e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",null===t||void 0===t?void 0:t.access_token)})}_handleTokenChanged(e,t,r){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===r?"SIGNED_OUT"===e&&(this.realtime.setAuth(),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0):this.changedAccessToken=r}}(function(){if("undefined"!==typeof window)return!1;if("undefined"===typeof process)return!1;const e=process.version;if(void 0===e||null===e)return!1;const t=e.match(/^v(\d+)\./);return!!t&&parseInt(t[1],10)<=18})()&&console.warn("\u26a0\ufe0f  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Sn="https://ugphaeiqbfejnzpiqdty.supabase.co",Cn="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVncGhhZWlxYmZlam56cGlxZHR5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQyMTMwNDcsImV4cCI6MjA2OTc4OTA0N30.-OcW0or7v6krUQJUG0Jb8VoPbpbGjbdbjsMKn6KplM8";const En=((e,t,r)=>new Nn(e,t,r))(Sn||"https://placeholder.supabase.co",Cn||"placeholder-key",{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}});var Tn=r(579);const Pn=(0,a.createContext)({}),On=e=>{let{children:t}=e;const[r,n]=(0,a.useState)(null),[s,i]=(0,a.useState)(!0),[o,l]=(0,a.useState)(null),c=(0,a.useRef)(!1),u="learned_admin_verified",d="learned_admin_profile";(0,a.useEffect)(()=>{let e=!0;const{data:{subscription:t}}=En.auth.onAuthStateChange(async(t,r)=>{e&&(c.current||("SIGNED_OUT"===t?(localStorage.removeItem(u),localStorage.removeItem(d),n(null),l(null),i(!1)):"TOKEN_REFRESHED"===t&&null!==r&&void 0!==r&&r.user&&n(e=>e?Te(Te({},e),r.user):null)))});(async()=>{try{if(c.current)return;const{data:{session:t},error:r}=await En.auth.getSession();if(r)return console.error("Session error:",r),void(e&&(n(null),i(!1)));if(null===t||void 0===t||!t.user)return localStorage.removeItem(u),localStorage.removeItem(d),void(e&&(n(null),i(!1)));const a=localStorage.getItem(d);if(a)try{const r=JSON.parse(a);if("admin"===(null===r||void 0===r?void 0:r.user_type)&&(null===r||void 0===r?void 0:r.id)===t.user.id)return void(e&&(n(Te(Te({},t.user),r)),i(!1)))}catch(ea){localStorage.removeItem(d)}const s=await(async e=>{try{const{data:t,error:r}=await En.from("users").select("*").eq("id",e.id).single();return r?(console.error("Error verifying admin:",r),null):"admin"===(null===t||void 0===t?void 0:t.user_type)?t:null}catch(t){return console.error("Admin verification error:",t),null}})(t.user);s?(localStorage.setItem(u,"true"),localStorage.setItem(d,JSON.stringify(s)),e&&n(Te(Te({},t.user),s))):(localStorage.removeItem(u),localStorage.removeItem(d),await En.auth.signOut(),e&&(n(null),l("Access denied. Admin privileges required.")))}catch(t){console.error("Auth initialization error:",t),e&&(n(null),l((null===t||void 0===t?void 0:t.message)||"Authentication failed"))}finally{e&&i(!1)}})();const r=setTimeout(()=>{e&&(console.warn("Auth loading timeout - showing login"),i(!1))},8e3);return()=>{e=!1,clearTimeout(r),null===t||void 0===t||t.unsubscribe()}},[]);return(0,Tn.jsx)(Pn.Provider,{value:{user:r,loading:s,login:async(e,t)=>{c.current=!0,localStorage.removeItem(u),localStorage.removeItem(d),l(null);try{const{data:r,error:a}=await En.auth.signInWithPassword({email:e,password:t});if(a)throw console.error("Login error:",a),new Error("Invalid email or password");const{data:s,error:i}=await En.from("users").select("*").eq("id",r.user.id).single();if(i||!s)throw console.error("User table fetch error:",i),await En.auth.signOut(),new Error("User not found in database");if("admin"!==s.user_type)throw await En.auth.signOut(),new Error("Access denied. Admin privileges required.");return localStorage.setItem(u,"true"),localStorage.setItem(d,JSON.stringify(s)),n(Te(Te({},r.user),s)),Te(Te({},r.user),s)}catch(r){throw l(r.message),r}finally{c.current=!1}},logout:async()=>{try{await En.auth.signOut()}catch(ea){console.error("Logout error:",ea)}localStorage.removeItem(u),localStorage.removeItem(d),n(null),l(null)},authError:o},children:t})},Ln=()=>(0,a.useContext)(Pn),In=(0,a.createContext)(),An=()=>{const e=(0,a.useContext)(In);if(!e)throw new Error("useAdmin must be used within AdminProvider");return e},Rn=e=>{let{children:t}=e;const r=e=>({"plan-1m":1,"plan-3m":3,"plan-6m":6,"plan-12m":12}[e]||1),[n,s]=(0,a.useState)({classrooms:[],teachers:[],students:[],studentsWithClassrooms:[],payments:[],pricingRates:[],recentActivity:[],stats:{totalClassrooms:0,totalTeachers:0,totalStudents:0,activeSessions:0}}),[i,o]=(0,a.useState)(!1),[l,c]=(0,a.useState)(!1),u=(0,a.useCallback)(async function(){if(arguments.length>0&&void 0!==arguments[0]&&arguments[0]||!l||i)try{o(!0);const[e,t,n,a,i,l,u]=await Promise.all([En.from("classrooms").select("\n            *, \n            classroom_pricing(price, payment_plan_id, id, payment_plans(id, name, billing_cycle)),\n            teachers(user_id, users(first_name, last_name))\n          ").order("created_at",{ascending:!1}),En.from("teachers").select("\n            *,\n            users(first_name, last_name, email, phone)\n          "),En.from("students").select("\n            *,\n            users(first_name, last_name, email, phone)\n          ").eq("status","active"),En.rpc("admin_get_students_with_classrooms"),En.from("audit_logs").select("\n            id,\n            action_type,\n            table_name,\n            description,\n            created_at,\n            users(first_name, last_name)\n          ").order("created_at",{ascending:!1}).limit(5),En.from("payments").select("\n            id,\n            amount,\n            currency,\n            payment_method,\n            transaction_id,\n            status,\n            payment_proof_path,\n            expire_at,\n            remarks,\n            created_at,\n            updated_at,\n            student_id,\n            classroom_id,\n            payment_plan_id,\n            students(id, student_id, user_id, users(email, first_name, last_name, phone)),\n            classrooms(id, name, subject, grade_level),\n            payment_plans(id, name, billing_cycle)\n          ").order("created_at",{ascending:!1}),En.from("grade_subject_pricing").select("*").order("grade_level",{ascending:!0}).order("board",{ascending:!0})]),d=e.data||[],h=t.data||[],f=n.data||[],m=a.data||[],p=i.data||[],g=u.data||[],v=(l.data||[]).map(e=>{var t,n,a,s,i,o,l,c,u,d,h,f;return{id:e.id,student_name:"".concat((null===(t=e.students)||void 0===t||null===(n=t.users)||void 0===n?void 0:n.first_name)||""," ").concat((null===(a=e.students)||void 0===a||null===(s=a.users)||void 0===s?void 0:s.last_name)||"").trim(),student_email:(null===(i=e.students)||void 0===i||null===(o=i.users)||void 0===o?void 0:o.email)||"",student_id:(null===(l=e.students)||void 0===l?void 0:l.student_id)||"",student_phone:(null===(c=e.students)||void 0===c||null===(u=c.users)||void 0===u?void 0:u.phone)||"N/A",classroom_name:(null===(d=e.classrooms)||void 0===d?void 0:d.name)||"",classroom_grade:(null===(h=e.classrooms)||void 0===h?void 0:h.grade_level)||"",classroom_id:e.classroom_id,payment_id:e.id,amount:e.amount,currency:e.currency||"INR",payment_method:e.payment_method||"UPI",transaction_id:e.transaction_id,status:e.status||"pending",screenshot_url:e.payment_proof_path||"",uploaded_at:e.created_at,time_period:(f=e.payment_plan_id,{"plan-1m":"1 month","plan-3m":"3 months","plan-6m":"6 months","plan-12m":"12 months"}[f]||"N/A"),time_period_months:r(e.payment_plan_id),payment_plan_id:e.payment_plan_id,remarks:e.remarks||"",approved_at:e.updated_at,approved_by:"Admin",expire_at:e.expire_at,declined_at:e.updated_at,declined_by:"Admin",decline_reason:""}});e.error&&console.error("Error fetching classrooms:",e.error),t.error&&console.error("Error fetching teachers:",t.error),n.error&&console.error("Error fetching students:",n.error),a.error&&console.error("Error fetching detailed students:",a.error),i.error&&console.error("Error fetching activity:",i.error),l.error&&console.error("Error fetching payments:",l.error),u.error&&console.error("Error fetching pricing rates:",u.error);const y={totalClassrooms:d.filter(e=>e.is_active).length,totalTeachers:h.filter(e=>"active"===e.status).length,totalStudents:f.length,activeSessions:0};s({classrooms:d,teachers:h,students:f,studentsWithClassrooms:m,payments:v,pricingRates:g,recentActivity:p,stats:y}),c(!0)}catch(e){console.error("Error loading admin data:",e),c(!1)}finally{o(!1)}},[l,i]),d={adminData:n,dataLoading:i,dataLoaded:l,loadAdminData:u,refreshData:async e=>{try{switch(e){case"classrooms":const{data:e}=await En.from("classrooms").select("\n              *, \n              classroom_pricing(price, payment_plan_id, id, payment_plans(id, name, billing_cycle)),\n              teachers(user_id, users(first_name, last_name))\n            ");s(t=>Te(Te({},t),{},{classrooms:e||[]}));break;case"teachers":const{data:t}=await En.from("teachers").select("*, users(first_name, last_name, email, phone)").eq("status","active");s(e=>Te(Te({},e),{},{teachers:t||[]}));break;case"students":const[r,n]=await Promise.all([En.from("students").select("*, users(first_name, last_name, email, phone)").eq("status","active"),En.rpc("admin_get_students_with_classrooms")]);s(e=>Te(Te({},e),{},{students:r.data||[],studentsWithClassrooms:n.data||[]}));break;case"pricing":const{data:a}=await En.from("grade_subject_pricing").select("*").order("grade_level",{ascending:!0}).order("board",{ascending:!0});s(e=>Te(Te({},e),{},{pricingRates:a||[]}));break;default:await u(!0)}}catch(t){console.error("Error refreshing ".concat(e,":"),t)}}};return(0,Tn.jsx)(In.Provider,{value:d,children:t})},Dn=()=>{const[e,t]=(0,a.useState)(""),[r,n]=(0,a.useState)(""),[s,i]=(0,a.useState)(!1),[o,l]=(0,a.useState)(""),{login:c,authError:u}=Ln();return(0,Tn.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,Tn.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,Tn.jsxs)("div",{children:[(0,Tn.jsx)("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"LearnED Admin Dashboard"}),(0,Tn.jsx)("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Sign in to access the admin panel"})]}),(0,Tn.jsxs)("form",{className:"mt-8 space-y-6",onSubmit:async t=>{t.preventDefault(),i(!0),l("");try{await c(e,r)}catch(n){l(n.message||"Login failed")}finally{i(!1)}},children:[(0,Tn.jsxs)("div",{className:"rounded-md shadow-sm -space-y-px",children:[(0,Tn.jsxs)("div",{children:[(0,Tn.jsx)("label",{htmlFor:"email-address",className:"sr-only",children:"Email address"}),(0,Tn.jsx)("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Email address",value:e,onChange:e=>t(e.target.value)})]}),(0,Tn.jsxs)("div",{children:[(0,Tn.jsx)("label",{htmlFor:"password",className:"sr-only",children:"Password"}),(0,Tn.jsx)("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Password",value:r,onChange:e=>n(e.target.value)})]})]}),o&&(0,Tn.jsx)("div",{className:"rounded-md bg-red-50 p-4",children:(0,Tn.jsx)("div",{className:"text-sm text-red-700",children:o})}),u&&(0,Tn.jsx)("div",{className:"rounded-md bg-yellow-50 p-4",children:(0,Tn.jsx)("div",{className:"text-sm text-yellow-800",children:u})}),(0,Tn.jsx)("div",{children:(0,Tn.jsx)("button",{type:"submit",disabled:s,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:s?"Signing in...":"Sign in"})}),(0,Tn.jsx)("div",{className:"text-center",children:(0,Tn.jsx)("p",{className:"text-xs text-gray-500",children:"Admin access only. Contact IT support if you need access."})})]})]})})},Mn=e=>{let{children:t}=e;const{user:r,loading:n}=Ln(),{loadAdminData:s,dataLoading:i,dataLoaded:o}=An(),l=(0,a.useRef)(!1);return(0,a.useEffect)(()=>{!r||l.current||o||(l.current=!0,s().catch(e=>{console.error("Failed to load admin data:",e)})),r||(l.current=!1)},[r,s,o]),n?(0,Tn.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:(0,Tn.jsxs)("div",{className:"text-center",children:[(0,Tn.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,Tn.jsx)("p",{className:"mt-4 text-gray-600",children:"Authenticating..."})]})}):r?i?(0,Tn.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:(0,Tn.jsxs)("div",{className:"text-center",children:[(0,Tn.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600 mx-auto"}),(0,Tn.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading Data..."})]})}):t:(0,Tn.jsx)(Dn,{})},Un=()=>{const[e,t]=(0,a.useState)([]),[r,n]=(0,a.useState)(!0),[s,i]=(0,a.useState)(null);(0,a.useEffect)(()=>{o()},[]);const o=async()=>{try{n(!0);const{data:a,error:s}=await En.from("trigger_logs").select("*").or("message.ilike.%Student record created%,message.ilike.%User signup completed%").order("event_time",{ascending:!1}).limit(10);s&&console.error("Error fetching trigger logs:",s);let o=null;try{const{data:e,error:t}=await En.from("audit_logs").select("\n            *,\n            users:user_id(first_name, last_name, email, user_type)\n          ").in("action_type",["student_enrollment_created","classroom_teacher_assigned","user_created","payment_completed"]).order("created_at",{ascending:!1}).limit(10);if(t){if(console.error("Error fetching audit logs:",t),"42501"!==t.code)throw t}else o=e}catch(e){console.warn("Audit logs not accessible, continuing with trigger logs only:",e.message)}let l=null;try{const{data:e,error:t}=await En.from("student_enrollments").select("\n            *,\n            students:student_id(student_id, users:user_id(first_name, last_name, email)),\n            classrooms:classroom_id(name, subject, grade_level)\n          ").order("created_at",{ascending:!1}).limit(5);t||(l=e)}catch(r){console.warn("Could not fetch enrollments:",r.message)}let c=null;try{const{data:e,error:t}=await En.from("payments").select("\n            *,\n            students:student_id(student_id, users:user_id(first_name, last_name, email)),\n            classrooms:classroom_id(name, subject)\n          ").eq("status","completed").order("created_at",{ascending:!1}).limit(5);t||(c=e)}catch(r){console.warn("Could not fetch payments:",r.message)}const u=[];a&&a.forEach(e=>{var t,r;if(null!==(t=e.message)&&void 0!==t&&t.includes("Student record created")){const t=e.metadata||{};u.push({id:"trigger_".concat(e.id),type:"student_registration",title:"New Student Registration",description:"Student ".concat(t.student_id||"N/A"," created account"),timestamp:e.event_time,icon:"user-plus",color:"green",metadata:t})}else if(null!==(r=e.message)&&void 0!==r&&r.includes("User signup completed")){const t=e.metadata||{};u.push({id:"trigger_".concat(e.id),type:"user_signup",title:"User Account Created",description:"New ".concat(t.user_type||"user"," account: ").concat(t.email||"N/A"),timestamp:e.event_time,icon:"user-plus",color:"blue",metadata:t})}}),o&&o.forEach(e=>{let t={id:"audit_".concat(e.id),timestamp:e.created_at,metadata:e.metadata||{}};switch(e.action_type){case"student_enrollment_created":t=Te(Te({},t),{},{type:"enrollment",title:"Student Enrolled",description:e.description||"Student enrolled in classroom",icon:"academic-cap",color:"purple"});break;case"classroom_teacher_assigned":t=Te(Te({},t),{},{type:"teacher_assignment",title:"Teacher Assigned",description:e.description||"Teacher assigned to classroom",icon:"user-group",color:"orange"});break;case"payment_completed":t=Te(Te({},t),{},{type:"payment",title:"Payment Received",description:e.description||"Payment completed successfully",icon:"currency-rupee",color:"green"});break;default:t=Te(Te({},t),{},{type:"system",title:"System Activity",description:e.description||e.action_type,icon:"cog",color:"gray"})}e.users&&(t.user={name:"".concat(e.users.first_name," ").concat(e.users.last_name),email:e.users.email,type:e.users.user_type}),u.push(t)}),l&&l.forEach(e=>{var t,r,n,a,s,i,o;const l=null!==(t=e.students)&&void 0!==t&&null!==(r=t.users)&&void 0!==r&&r.first_name&&null!==(n=e.students)&&void 0!==n&&null!==(a=n.users)&&void 0!==a&&a.last_name?"".concat(e.students.users.first_name," ").concat(e.students.users.last_name):(null===(s=e.students)||void 0===s?void 0:s.student_id)||"Unknown Student",c=(null===(i=e.classrooms)||void 0===i?void 0:i.name)||"Unknown Classroom";u.push({id:"enrollment_".concat(e.id),type:"enrollment",title:"Student Enrolled",description:"".concat(l," enrolled in ").concat(c),timestamp:e.created_at,icon:"academic-cap",color:"purple",user:null!==(o=e.students)&&void 0!==o&&o.users?{name:l,email:e.students.users.email,type:"student"}:null})}),c&&c.forEach(e=>{var t,r,n,a,s,i,o;const l=null!==(t=e.students)&&void 0!==t&&null!==(r=t.users)&&void 0!==r&&r.first_name&&null!==(n=e.students)&&void 0!==n&&null!==(a=n.users)&&void 0!==a&&a.last_name?"".concat(e.students.users.first_name," ").concat(e.students.users.last_name):(null===(s=e.students)||void 0===s?void 0:s.student_id)||"Unknown Student",c=(null===(i=e.classrooms)||void 0===i?void 0:i.name)||"Unknown Classroom";u.push({id:"payment_".concat(e.id),type:"payment",title:"Payment Received",description:"\u20b9".concat(e.amount," payment from ").concat(l," for ").concat(c),timestamp:e.created_at,icon:"currency-rupee",color:"green",user:null!==(o=e.students)&&void 0!==o&&o.users?{name:l,email:e.students.users.email,type:"student"}:null})}),u.sort((e,t)=>new Date(t.timestamp)-new Date(e.timestamp)),t(u.slice(0,15)),i(null)}catch(r){console.error("Error fetching recent activities:",r),i("Failed to load recent activities")}finally{n(!1)}},l=e=>{const t={"user-plus":"M12 6v6m0 0v6m0-6h6m-6 0H6","academic-cap":"M12 14l9-5-9-5-9 5 9 5z M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z","user-group":"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-8.5a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1z","currency-rupee":"M15 8H9m6 3H9m3 8l3-8-3-8M5 12h14",cog:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z M15 12a3 3 0 11-6 0 3 3 0 016 0z"};return t[e]||t.cog},c=e=>{const t={green:"bg-green-100 text-green-600",blue:"bg-blue-100 text-blue-600",purple:"bg-purple-100 text-purple-600",orange:"bg-orange-100 text-orange-600",gray:"bg-gray-100 text-gray-600"};return t[e]||t.gray},u=e=>{const t=new Date(e),r=new Date,n=Math.floor((r-t)/6e4);return n<1?"Just now":n<60?"".concat(n,"m ago"):n<1440?"".concat(Math.floor(n/60),"h ago"):n<10080?"".concat(Math.floor(n/1440),"d ago"):t.toLocaleDateString()};return r?(0,Tn.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,Tn.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Activity"}),(0,Tn.jsx)("div",{className:"space-y-4",children:[...Array(5)].map((e,t)=>(0,Tn.jsxs)("div",{className:"animate-pulse flex space-x-4",children:[(0,Tn.jsx)("div",{className:"rounded-full bg-gray-200 h-10 w-10"}),(0,Tn.jsxs)("div",{className:"flex-1 space-y-2 py-1",children:[(0,Tn.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),(0,Tn.jsx)("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]})]},t))})]}):s?(0,Tn.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,Tn.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Activity"}),(0,Tn.jsxs)("div",{className:"text-center text-gray-500 py-8",children:[(0,Tn.jsx)("svg",{className:"w-12 h-12 mx-auto mb-4 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Tn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,Tn.jsx)("p",{children:s}),(0,Tn.jsx)("button",{onClick:o,className:"mt-2 text-blue-500 hover:text-blue-600 text-sm",children:"Try again"})]})]}):(0,Tn.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,Tn.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Tn.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Recent Activity"}),(0,Tn.jsx)("button",{onClick:o,className:"text-gray-400 hover:text-gray-600 transition-colors",title:"Refresh",children:(0,Tn.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Tn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})})]}),0===e.length?(0,Tn.jsxs)("div",{className:"text-center text-gray-500 py-8",children:[(0,Tn.jsx)("svg",{className:"w-12 h-12 mx-auto mb-4 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Tn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),(0,Tn.jsx)("p",{children:"No recent activity found"})]}):(0,Tn.jsx)("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:e.map(e=>(0,Tn.jsxs)("div",{className:"flex space-x-3",children:[(0,Tn.jsx)("div",{className:"flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center ".concat(c(e.color)),children:(0,Tn.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Tn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:l(e.icon)})})}),(0,Tn.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Tn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Tn.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:e.title}),(0,Tn.jsx)("p",{className:"text-xs text-gray-500 flex-shrink-0 ml-2",children:u(e.timestamp)})]}),(0,Tn.jsx)("p",{className:"text-sm text-gray-600 truncate",children:e.description}),e.user&&(0,Tn.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["by ",e.user.name," (",e.user.type,")"]})]})]},e.id))})]})},zn=()=>{const{user:e,logout:t}=Ln(),{adminData:r}=An(),n=re(),{stats:a}=r;return(0,Tn.jsxs)("div",{className:"min-h-screen bg-gray-100",children:[(0,Tn.jsx)("header",{className:"bg-white shadow",children:(0,Tn.jsxs)("div",{className:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8",children:[(0,Tn.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Tn.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"LearnED Admin Dashboard"}),(0,Tn.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Tn.jsxs)("span",{className:"text-gray-700",children:["Welcome, ",null===e||void 0===e?void 0:e.email]}),(0,Tn.jsx)("button",{onClick:async()=>{await t(),window.location.href="/"},className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-md",children:"Logout"})]})]}),(0,Tn.jsx)("nav",{className:"mt-6",children:(0,Tn.jsxs)("div",{className:"flex space-x-8",children:[(0,Tn.jsx)("button",{onClick:()=>n("/"),className:"border-b-2 border-blue-500 text-blue-600 px-3 py-2 font-medium text-sm",children:"Dashboard"}),(0,Tn.jsx)("button",{onClick:()=>n("/classrooms"),className:"text-gray-500 hover:text-gray-700 px-3 py-2 font-medium text-sm",children:"Classrooms"}),(0,Tn.jsx)("button",{onClick:()=>n("/teachers"),className:"text-gray-500 hover:text-gray-700 px-3 py-2 font-medium text-sm",children:"Teachers"}),(0,Tn.jsx)("button",{onClick:()=>n("/students"),className:"text-gray-500 hover:text-gray-700 px-3 py-2 font-medium text-sm",children:"Students"}),(0,Tn.jsx)("button",{onClick:()=>n("/payment-approvals"),className:"text-gray-500 hover:text-gray-700 px-3 py-2 font-medium text-sm",children:"Payment Approvals"}),(0,Tn.jsx)("button",{onClick:()=>n("/grade-pricing"),className:"text-gray-500 hover:text-gray-700 px-3 py-2 font-medium text-sm",children:"Grade Pricing"})]})})]})}),(0,Tn.jsx)("main",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:(0,Tn.jsx)("div",{className:"px-4 py-6 sm:px-0",children:(0,Tn.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,Tn.jsx)("h2",{className:"text-2xl font-semibold mb-6",children:"Overview"}),(0,Tn.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,Tn.jsxs)("div",{className:"bg-blue-50 p-6 rounded-lg",children:[(0,Tn.jsx)("h3",{className:"text-lg font-semibold text-blue-800 mb-2",children:"Total Classrooms"}),(0,Tn.jsx)("p",{className:"text-3xl font-bold text-blue-600",children:a.totalClassrooms}),(0,Tn.jsx)("p",{className:"text-sm text-blue-600 mt-1",children:"Active classrooms"})]}),(0,Tn.jsxs)("div",{className:"bg-green-50 p-6 rounded-lg",children:[(0,Tn.jsx)("h3",{className:"text-lg font-semibold text-green-800 mb-2",children:"Total Teachers"}),(0,Tn.jsx)("p",{className:"text-3xl font-bold text-green-600",children:a.totalTeachers}),(0,Tn.jsx)("p",{className:"text-sm text-green-600 mt-1",children:"Active teachers"})]}),(0,Tn.jsxs)("div",{className:"bg-purple-50 p-6 rounded-lg",children:[(0,Tn.jsx)("h3",{className:"text-lg font-semibold text-purple-800 mb-2",children:"Total Students"}),(0,Tn.jsx)("p",{className:"text-3xl font-bold text-purple-600",children:a.totalStudents}),(0,Tn.jsx)("p",{className:"text-sm text-purple-600 mt-1",children:"Enrolled students"})]}),(0,Tn.jsxs)("div",{className:"bg-yellow-50 p-6 rounded-lg",children:[(0,Tn.jsx)("h3",{className:"text-lg font-semibold text-yellow-800 mb-2",children:"Active Sessions"}),(0,Tn.jsx)("p",{className:"text-3xl font-bold text-yellow-600",children:a.activeSessions}),(0,Tn.jsx)("p",{className:"text-sm text-yellow-600 mt-1",children:"Live classes"})]})]}),(0,Tn.jsxs)("div",{className:"mb-8",children:[(0,Tn.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"Quick Actions"}),(0,Tn.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,Tn.jsxs)("button",{onClick:()=>n("/classrooms"),className:"bg-blue-500 hover:bg-blue-600 text-white p-4 rounded-lg text-center",children:[(0,Tn.jsx)("div",{className:"text-lg font-semibold",children:"Manage"}),(0,Tn.jsx)("div",{className:"text-sm",children:"Classrooms"})]}),(0,Tn.jsxs)("button",{onClick:()=>n("/teachers"),className:"bg-green-500 hover:bg-green-600 text-white p-4 rounded-lg text-center",children:[(0,Tn.jsx)("div",{className:"text-lg font-semibold",children:"Manage"}),(0,Tn.jsx)("div",{className:"text-sm",children:"Teachers"})]}),(0,Tn.jsxs)("button",{onClick:()=>n("/students"),className:"bg-purple-500 hover:bg-purple-600 text-white p-4 rounded-lg text-center",children:[(0,Tn.jsx)("div",{className:"text-lg font-semibold",children:"Manage"}),(0,Tn.jsx)("div",{className:"text-sm",children:"Students"})]}),(0,Tn.jsxs)("button",{className:"bg-gray-500 hover:bg-gray-600 text-white p-4 rounded-lg text-center",children:[(0,Tn.jsx)("div",{className:"text-lg font-semibold",children:"View"}),(0,Tn.jsx)("div",{className:"text-sm",children:"Reports"})]})]})]}),(0,Tn.jsx)(Un,{})]})})})]})},Fn=[{value:"CBSE",label:"CBSE"},{value:"ICSE",label:"ICSE"},{value:"IGCSE",label:"IGCSE"}],Bn=[{value:1,label:"Grade 1"},{value:2,label:"Grade 2"},{value:3,label:"Grade 3"},{value:4,label:"Grade 4"},{value:5,label:"Grade 5"},{value:6,label:"Grade 6"},{value:7,label:"Grade 7"},{value:8,label:"Grade 8"},{value:9,label:"Grade 9"},{value:10,label:"Grade 10"},{value:11,label:"Grade 11"},{value:12,label:"Grade 12"}],qn=["Mathematics","Physics","Chemistry","Biology"],Wn=()=>{var e,t,r;const{adminData:n,refreshData:s}=An(),{user:i}=Ln(),[o,l]=(0,a.useState)(null),[c,u]=(0,a.useState)({}),[d,h]=(0,a.useState)(!1),[f,m]=(0,a.useState)(""),[p,g]=(0,a.useState)(""),[v,y]=(0,a.useState)(""),[x,b]=(0,a.useState)(""),[w,_]=(0,a.useState)(!1),[j,k]=(0,a.useState)(!1),[N,S]=(0,a.useState)({email:"",firstName:"",lastName:"",subject:"",gradeLevels:[]}),[C,E]=(0,a.useState)({name:"",subject:"",grade_level:"",board:"",description:"",max_students:30,is_active:"true",teacher_id:"",monthly_price:"",quarterly_price:"",yearly_price:""}),T=(0,a.useMemo)(()=>n.classrooms||[],[n.classrooms]),P=T.filter(e=>{var t,r,n,a,s,i,o,l,c;const u=!v||e.board===v,d=!x||String(e.grade_level)===String(x),h=!p||"active"===p&&!0===e.is_active||"inactive"===p&&!1===e.is_active||"null"===p&&null===e.is_active,m=!f||(null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(f.toLowerCase()))||(null===(r=e.subject)||void 0===r?void 0:r.toLowerCase().includes(f.toLowerCase()))||(null===(n=e.board)||void 0===n?void 0:n.toLowerCase().includes(f.toLowerCase()))||(null===(a=e.description)||void 0===a?void 0:a.toLowerCase().includes(f.toLowerCase()))||(null===(s=(null===(i=e.teachers)||void 0===i||null===(o=i.users)||void 0===o?void 0:o.first_name)+" "+(null===(l=e.teachers)||void 0===l||null===(c=l.users)||void 0===c?void 0:c.last_name))||void 0===s?void 0:s.toLowerCase().includes(f.toLowerCase()));return u&&d&&h&&m}),O=(e,t)=>{if(!e.classroom_pricing)return"-";const r=e.classroom_pricing.find(e=>{var r,n;return e.payment_plan_id===t||(null===(r=e.payment_plans)||void 0===r?void 0:r.billing_cycle)===t||(null===(n=e.payment_plans)||void 0===n?void 0:n.id)===t});return(null===r||void 0===r?void 0:r.price)||"-"},L=(e,t)=>{if(!e.classroom_pricing)return null;const r=e.classroom_pricing.find(e=>{var r,n;return e.payment_plan_id===t||(null===(r=e.payment_plans)||void 0===r?void 0:r.billing_cycle)===t||(null===(n=e.payment_plans)||void 0===n?void 0:n.id)===t});return null===r||void 0===r?void 0:r.id},I=e=>{u(Te(Te({},c),{},{[e.target.name]:e.target.value}))},A=e=>{S({email:"",firstName:"",lastName:"",subject:e.subject||"",gradeLevels:e.grade_level?[parseInt(e.grade_level)]:[]}),k(!0)},R=e=>{const{name:t,value:r}=e.target;S(e=>Te(Te({},e),{},{[t]:r}))},D=e=>{const{name:t,value:r}=e.target;if("grade_level"===t&&r){const e={2:{monthly:1400,quarterly:3780,yearly:13860},3:{monthly:1400,quarterly:3780,yearly:13860},4:{monthly:1400,quarterly:3780,yearly:13860},5:{monthly:1500,quarterly:4050,yearly:15e3},6:{monthly:1500,quarterly:4050,yearly:15e3},7:{monthly:1600,quarterly:4320,yearly:16e3},8:{monthly:1600,quarterly:4320,yearly:16e3},9:{monthly:1800,quarterly:4860,yearly:18e3},10:{monthly:1800,quarterly:4860,yearly:18e3},11:{monthly:2500,quarterly:6750,yearly:25e3},12:{monthly:2500,quarterly:6750,yearly:25e3}}[r];if(e)return void E(n=>Te(Te({},n),{},{[t]:r,monthly_price:e.monthly,quarterly_price:e.quarterly,yearly_price:e.yearly}))}E(e=>Te(Te({},e),{},{[t]:r}))};return(0,Tn.jsxs)("div",{className:"w-full",children:[(0,Tn.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Tn.jsx)("h2",{className:"text-2xl font-semibold text-gray-900",children:"Classrooms"}),(0,Tn.jsxs)("button",{onClick:()=>_(!0),className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg flex items-center space-x-2 transition-colors duration-200",children:[(0,Tn.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Tn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),(0,Tn.jsx)("span",{children:"Add Classroom"})]})]}),0===T.length?(0,Tn.jsxs)("div",{className:"text-center py-8 text-gray-500 bg-gray-50 rounded-lg",children:[(0,Tn.jsx)("svg",{className:"w-12 h-12 mx-auto mb-4 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Tn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),(0,Tn.jsx)("p",{children:"No classrooms found"})]}):(0,Tn.jsxs)(Tn.Fragment,{children:[(0,Tn.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200 mb-6",children:[(0,Tn.jsxs)("div",{className:"flex flex-col lg:flex-row gap-4",children:[(0,Tn.jsx)("div",{className:"flex-1",children:(0,Tn.jsxs)("div",{className:"relative",children:[(0,Tn.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,Tn.jsx)("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Tn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),(0,Tn.jsx)("input",{type:"text",placeholder:"Search classrooms, subjects, teachers, or descriptions...",value:f,onChange:e=>m(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),f&&(0,Tn.jsx)("button",{onClick:()=>m(""),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:(0,Tn.jsx)("svg",{className:"h-4 w-4 text-gray-400 hover:text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Tn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,Tn.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,Tn.jsxs)("select",{value:v,onChange:e=>y(e.target.value),className:"border border-gray-300 px-3 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 min-w-[140px]",children:[(0,Tn.jsx)("option",{value:"",children:"All Boards"}),Fn.map(e=>(0,Tn.jsx)("option",{value:e.value,children:e.label},e.value))]}),(0,Tn.jsxs)("select",{value:x,onChange:e=>b(e.target.value),className:"border border-gray-300 px-3 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 min-w-[120px]",children:[(0,Tn.jsx)("option",{value:"",children:"All Grades"}),Bn.map(e=>(0,Tn.jsx)("option",{value:e.value,children:e.label},e.value))]}),(0,Tn.jsxs)("select",{value:p,onChange:e=>g(e.target.value),className:"border border-gray-300 px-3 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 min-w-[120px]",children:[(0,Tn.jsx)("option",{value:"",children:"All Status"}),(0,Tn.jsx)("option",{value:"active",children:"Active"}),(0,Tn.jsx)("option",{value:"inactive",children:"Inactive"}),(0,Tn.jsx)("option",{value:"null",children:"Not Set"})]}),(f||v||x||p)&&(0,Tn.jsxs)("button",{onClick:()=>{m(""),y(""),b(""),g("")},className:"bg-gray-100 hover:bg-gray-200 text-gray-700 px-3 py-2 rounded-lg transition-colors inline-flex items-center gap-1",children:[(0,Tn.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Tn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Clear"]})]})]}),(0,Tn.jsxs)("div",{className:"mt-3 text-sm text-gray-600",children:["Showing ",P.length," of ",T.length," classroom(s)",(f||v||x||p)&&(0,Tn.jsx)("span",{className:"ml-2 text-blue-600",children:"\u2022 Filters applied"})]})]}),(0,Tn.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[(0,Tn.jsx)("style",{jsx:!0,children:"\n              .line-clamp-3 {\n                display: -webkit-box;\n                -webkit-line-clamp: 3;\n                -webkit-box-orient: vertical;\n                overflow: hidden;\n              }\n            "}),(0,Tn.jsx)("div",{className:"overflow-x-auto",children:(0,Tn.jsxs)("table",{className:"min-w-full text-sm table-fixed",children:[(0,Tn.jsx)("thead",{className:"bg-gradient-to-r from-gray-50 to-gray-100",children:(0,Tn.jsxs)("tr",{children:[(0,Tn.jsx)("th",{className:"px-4 py-4 text-left font-semibold text-gray-800 border-b-2 border-gray-200 min-w-[200px]",children:(0,Tn.jsxs)("div",{className:"flex items-center",children:[(0,Tn.jsx)("svg",{className:"w-4 h-4 mr-2 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Tn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-6m-2-5.5v3m0 0h-4.5M21 14H3"})}),"Classroom Name"]})}),(0,Tn.jsx)("th",{className:"px-4 py-4 text-left font-semibold text-gray-800 border-b-2 border-gray-200 min-w-[150px]",children:(0,Tn.jsxs)("div",{className:"flex items-center",children:[(0,Tn.jsx)("svg",{className:"w-4 h-4 mr-2 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Tn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-6m-2-5.5v3m0 0h-4.5M21 14H3"})}),"Board & Grade"]})}),(0,Tn.jsx)("th",{className:"px-4 py-4 text-left font-semibold text-gray-800 border-b-2 border-gray-200",children:(0,Tn.jsxs)("div",{className:"flex items-center",children:[(0,Tn.jsx)("svg",{className:"w-4 h-4 mr-2 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Tn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C20.168 18.477 18.582 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),"Subject"]})}),(0,Tn.jsx)("th",{className:"px-4 py-4 text-left font-semibold text-gray-800 border-b-2 border-gray-200",children:(0,Tn.jsxs)("div",{className:"flex items-center",children:[(0,Tn.jsx)("svg",{className:"w-4 h-4 mr-2 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Tn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"Teacher"]})}),(0,Tn.jsx)("th",{className:"px-4 py-4 text-left font-semibold text-gray-800 border-b-2 border-gray-200",children:(0,Tn.jsxs)("div",{className:"flex items-center",children:[(0,Tn.jsx)("svg",{className:"w-4 h-4 mr-2 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Tn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),"Students"]})}),(0,Tn.jsx)("th",{className:"px-4 py-4 text-left font-semibold text-gray-800 border-b-2 border-gray-200",children:(0,Tn.jsxs)("div",{className:"flex items-center",children:[(0,Tn.jsx)("svg",{className:"w-4 h-4 mr-2 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Tn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Status"]})}),(0,Tn.jsx)("th",{className:"px-4 py-4 text-left font-semibold text-gray-800 border-b-2 border-gray-200",children:(0,Tn.jsxs)("div",{className:"flex items-center",children:[(0,Tn.jsx)("svg",{className:"w-4 h-4 mr-2 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Tn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"})}),"Actions"]})})]})}),(0,Tn.jsx)("tbody",{className:"divide-y divide-gray-200",children:P.map(e=>{var t,r,n,a;return(0,Tn.jsxs)("tr",{className:"transition-all duration-200 border-b border-gray-100 ".concat(!1===e.is_active?"bg-gray-50 opacity-75 hover:bg-gray-100":"hover:bg-gradient-to-r hover:from-blue-50 hover:to-indigo-50"),children:[(0,Tn.jsx)("td",{className:"px-4 py-4 font-semibold ".concat(!1===e.is_active?"text-gray-500":"text-gray-900"),children:(0,Tn.jsx)("div",{className:"max-w-[200px] truncate",title:e.name,children:e.name})}),(0,Tn.jsxs)("td",{className:"px-4 py-4 ".concat(!1===e.is_active?"text-gray-500":"text-gray-700"),children:[e.board," - Grade ",e.grade_level]}),(0,Tn.jsx)("td",{className:"px-4 py-4 ".concat(!1===e.is_active?"text-gray-500":"text-gray-700"),children:e.subject}),(0,Tn.jsx)("td",{className:"px-4 py-4 ".concat(!1===e.is_active?"text-gray-500":"text-gray-700"),children:(null===(t=e.teachers)||void 0===t||null===(r=t.users)||void 0===r?void 0:r.first_name)+" "+(null===(n=e.teachers)||void 0===n||null===(a=n.users)||void 0===a?void 0:a.last_name)||(0,Tn.jsx)("span",{className:"text-gray-400 italic",children:"No Teacher"})}),(0,Tn.jsx)("td",{className:"px-4 py-4 ".concat(!1===e.is_active?"text-gray-500":"text-gray-700"),children:(0,Tn.jsxs)("div",{className:"flex items-center",children:[(0,Tn.jsx)("svg",{className:"w-4 h-4 mr-2 ".concat(!1===e.is_active?"text-gray-400":"text-gray-500"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Tn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),e.current_students||0," / ",e.max_students||30]})}),(0,Tn.jsxs)("td",{className:"px-4 py-4 text-center",children:[!0===e.is_active&&(0,Tn.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Active"}),!1===e.is_active&&(0,Tn.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:"Inactive"}),null===e.is_active&&(0,Tn.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:"Not Set"})]}),(0,Tn.jsx)("td",{className:"px-4 py-4",children:(0,Tn.jsxs)("div",{className:"flex gap-2",children:[(0,Tn.jsxs)("button",{onClick:()=>(e=>{var t,r,n,a;l(e.id),u(Te(Te({},e),{},{monthly_price:O(e,"monthly_basic"),quarterly_price:O(e,"quarterly_standard"),yearly_price:O(e,"yearly_premium"),teacher_id:e.teacher_id||"",teacher_name:(null===(t=e.teachers)||void 0===t||null===(r=t.users)||void 0===r?void 0:r.first_name)+" "+(null===(n=e.teachers)||void 0===n||null===(a=n.users)||void 0===a?void 0:a.last_name)||"",is_active:!0===e.is_active?"true":!1===e.is_active?"false":"null"})),h(!0)})(e),className:"bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white px-3 py-1.5 rounded-lg text-sm font-medium transition-all duration-200 inline-flex items-center gap-1 shadow-sm hover:shadow-md",children:[(0,Tn.jsx)("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Tn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Edit"]}),(0,Tn.jsxs)("button",{onClick:()=>(async(e,t)=>{if(window.confirm('Are you sure you want to delete the classroom "'.concat(t,'"? This action cannot be undone and will affect all enrolled students.')))try{const{error:t}=await En.from("classroom_pricing").delete().eq("classroom_id",e);if(t)return console.error("Error deleting pricing:",t),void alert("Failed to delete classroom pricing: "+t.message);const{error:r}=await En.from("classrooms").delete().eq("id",e);if(r)return console.error("Error deleting classroom:",r),void alert("Failed to delete classroom: "+r.message);s("classrooms"),alert("Classroom deleted successfully!")}catch(r){console.error("Delete classroom failed:",r),alert("Failed to delete classroom: "+r.message)}})(e.id,e.name),className:"bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white px-3 py-1.5 rounded-lg text-sm font-medium transition-all duration-200 inline-flex items-center gap-1 shadow-sm hover:shadow-md",children:[(0,Tn.jsx)("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Tn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete"]})]})})]},e.id)})})]})})]})]}),w&&(0,Tn.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:(0,Tn.jsx)("div",{className:"relative top-20 mx-auto p-5 border w-11/12 max-w-2xl shadow-lg rounded-md bg-white",children:(0,Tn.jsxs)("div",{className:"mt-3",children:[(0,Tn.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Add New Classroom"}),(0,Tn.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Tn.jsxs)("div",{children:[(0,Tn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Classroom Name *"}),(0,Tn.jsx)("input",{type:"text",name:"name",value:C.name,onChange:D,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Grade 10 Mathematics",required:!0})]}),(0,Tn.jsxs)("div",{children:[(0,Tn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subject *"}),(0,Tn.jsxs)("select",{name:"subject",value:C.subject,onChange:D,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[(0,Tn.jsx)("option",{value:"",children:"Select Subject"}),qn.map(e=>(0,Tn.jsx)("option",{value:e,children:e},e))]})]}),(0,Tn.jsxs)("div",{children:[(0,Tn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Board *"}),(0,Tn.jsxs)("select",{name:"board",value:C.board,onChange:D,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[(0,Tn.jsx)("option",{value:"",children:"Select Board"}),Fn.map(e=>(0,Tn.jsx)("option",{value:e.value,children:e.label},e.value))]})]}),(0,Tn.jsxs)("div",{children:[(0,Tn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Grade Level *"}),(0,Tn.jsxs)("select",{name:"grade_level",value:C.grade_level,onChange:D,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[(0,Tn.jsx)("option",{value:"",children:"Select Grade"}),Bn.map(e=>(0,Tn.jsx)("option",{value:e.value,children:e.label},e.value))]})]}),(0,Tn.jsxs)("div",{children:[(0,Tn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Students"}),(0,Tn.jsx)("input",{type:"number",name:"max_students",value:C.max_students,onChange:D,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",min:"1",max:"100"})]}),(0,Tn.jsxs)("div",{children:[(0,Tn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),(0,Tn.jsxs)("select",{name:"is_active",value:C.is_active,onChange:D,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,Tn.jsx)("option",{value:"true",children:"Active"}),(0,Tn.jsx)("option",{value:"false",children:"Inactive"}),(0,Tn.jsx)("option",{value:"null",children:"Not Set"})]})]}),(0,Tn.jsxs)("div",{className:"md:col-span-2",children:[(0,Tn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Teacher (Optional)"}),(0,Tn.jsxs)("div",{className:"flex gap-2",children:[(0,Tn.jsxs)("select",{name:"teacher_id",value:C.teacher_id,onChange:D,className:"flex-1 border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,Tn.jsx)("option",{value:"",children:"No Teacher Assigned"}),null===(e=n.teachers)||void 0===e?void 0:e.map(e=>{var t,r;return(0,Tn.jsxs)("option",{value:e.id,children:[null===(t=e.users)||void 0===t?void 0:t.first_name," ",null===(r=e.users)||void 0===r?void 0:r.last_name]},e.id)})]}),(0,Tn.jsx)("button",{type:"button",onClick:()=>A(C),className:"bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-md transition-colors whitespace-nowrap",children:"+ Invite New Teacher"})]})]}),(0,Tn.jsxs)("div",{children:[(0,Tn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Monthly Price (\u20b9)"}),(0,Tn.jsx)("input",{type:"number",name:"monthly_price",value:C.monthly_price,onChange:D,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"1000",min:"0",step:"0.01"})]}),(0,Tn.jsxs)("div",{children:[(0,Tn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quarterly Price (\u20b9)"}),(0,Tn.jsx)("input",{type:"number",name:"quarterly_price",value:C.quarterly_price,onChange:D,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"2700",min:"0",step:"0.01"})]}),(0,Tn.jsxs)("div",{children:[(0,Tn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Yearly Price (\u20b9)"}),(0,Tn.jsx)("input",{type:"number",name:"yearly_price",value:C.yearly_price,onChange:D,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"10000",min:"0",step:"0.01"})]}),(0,Tn.jsxs)("div",{className:"md:col-span-2",children:[(0,Tn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,Tn.jsx)("textarea",{name:"description",value:C.description,onChange:D,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",rows:"3",placeholder:"Brief description of the classroom content and objectives..."})]})]}),(0,Tn.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,Tn.jsx)("button",{onClick:()=>{_(!1),E({name:"",subject:"",grade_level:"",board:"",description:"",max_students:30,is_active:"true",teacher_id:"",monthly_price:"",quarterly_price:"",yearly_price:""})},className:"bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-md transition-colors",children:"Cancel"}),(0,Tn.jsx)("button",{onClick:async()=>{try{const{data:e,error:t}=await En.from("classrooms").insert({name:C.name,subject:C.subject,grade_level:parseInt(C.grade_level),board:C.board,description:C.description,max_students:parseInt(C.max_students),teacher_id:C.teacher_id||null,is_active:"true"===C.is_active||"false"!==C.is_active&&null}).select();if(t)return console.error("Classroom creation error:",t),void alert("Failed to create classroom: "+t.message);const r=e[0].id,n=[];if(C.monthly_price&&n.push({classroom_id:r,payment_plan_id:"monthly_basic",price:parseFloat(C.monthly_price)}),C.quarterly_price&&n.push({classroom_id:r,payment_plan_id:"quarterly_standard",price:parseFloat(C.quarterly_price)}),C.yearly_price&&n.push({classroom_id:r,payment_plan_id:"yearly_premium",price:parseFloat(C.yearly_price)}),n.length>0){const{error:e}=await En.from("classroom_pricing").insert(n);e&&(console.error("Pricing creation error:",e),alert("Classroom created but failed to set pricing: "+e.message))}E({name:"",subject:"",grade_level:"",board:"",description:"",max_students:30,is_active:"true",teacher_id:"",monthly_price:"",quarterly_price:"",yearly_price:""}),_(!1),s("classrooms"),alert("Classroom created successfully!")}catch(e){console.error("Add classroom failed:",e),alert("Failed to add classroom: "+e.message)}},disabled:!C.name||!C.subject||!C.board||!C.grade_level,className:"bg-blue-500 hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed text-white px-4 py-2 rounded-md transition-colors",children:"Create Classroom"})]})]})})}),d&&(0,Tn.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,Tn.jsxs)("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,Tn.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Edit Classroom"}),(0,Tn.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Tn.jsxs)("div",{className:"space-y-4",children:[(0,Tn.jsx)("h3",{className:"text-lg font-semibold text-gray-800 border-b pb-2",children:"Basic Information"}),(0,Tn.jsxs)("div",{children:[(0,Tn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),(0,Tn.jsx)("input",{type:"text",name:"name",value:c.name||"",onChange:I,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,Tn.jsxs)("div",{children:[(0,Tn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Classroom ID (Read-only)"}),(0,Tn.jsx)("input",{type:"text",value:c.id||"",readOnly:!0,className:"w-full border border-gray-300 rounded-md px-3 py-2 bg-gray-100 text-gray-600 cursor-not-allowed"})]}),(0,Tn.jsxs)("div",{children:[(0,Tn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,Tn.jsx)("textarea",{name:"description",value:c.description||"",onChange:I,rows:3,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,Tn.jsxs)("div",{children:[(0,Tn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Board"}),(0,Tn.jsxs)("select",{name:"board",value:c.board||"",onChange:I,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,Tn.jsx)("option",{value:"",children:"Select Board"}),Fn.map(e=>(0,Tn.jsx)("option",{value:e.value,children:e.label},e.value))]})]}),(0,Tn.jsxs)("div",{children:[(0,Tn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Grade Level"}),(0,Tn.jsxs)("select",{name:"grade_level",value:c.grade_level||"",onChange:I,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,Tn.jsx)("option",{value:"",children:"Select Grade"}),Bn.map(e=>(0,Tn.jsx)("option",{value:e.value,children:e.label},e.value))]})]}),(0,Tn.jsxs)("div",{children:[(0,Tn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subject"}),(0,Tn.jsxs)("select",{name:"subject",value:c.subject||"",onChange:I,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,Tn.jsx)("option",{value:"",children:"Select Subject"}),qn.map(e=>(0,Tn.jsx)("option",{value:e,children:e},e))]})]})]}),(0,Tn.jsxs)("div",{className:"space-y-4",children:[(0,Tn.jsx)("h3",{className:"text-lg font-semibold text-gray-800 border-b pb-2",children:"Capacity & Assignment"}),(0,Tn.jsxs)("div",{children:[(0,Tn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Students"}),(0,Tn.jsx)("input",{type:"number",name:"max_students",value:c.max_students||"",onChange:I,min:"1",max:"100",className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,Tn.jsxs)("div",{children:[(0,Tn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),(0,Tn.jsxs)("select",{name:"is_active",value:null!==(t=c.is_active)&&void 0!==t?t:"",onChange:I,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,Tn.jsx)("option",{value:"",children:"-- Select Status --"}),(0,Tn.jsx)("option",{value:"true",children:"Active"}),(0,Tn.jsx)("option",{value:"false",children:"Inactive"}),(0,Tn.jsx)("option",{value:"null",children:"Not Set"})]})]}),(0,Tn.jsxs)("div",{children:[(0,Tn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Teacher"}),(0,Tn.jsxs)("div",{className:"flex gap-2",children:[(0,Tn.jsxs)("select",{name:"teacher_id",value:c.teacher_id||"",onChange:I,className:"flex-1 border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,Tn.jsx)("option",{value:"",children:"No Teacher Assigned"}),null===(r=n.teachers)||void 0===r?void 0:r.map(e=>{var t,r;return(0,Tn.jsxs)("option",{value:e.id,children:[null===(t=e.users)||void 0===t?void 0:t.first_name," ",null===(r=e.users)||void 0===r?void 0:r.last_name]},e.id)})]}),(0,Tn.jsx)("button",{type:"button",onClick:()=>A(c),className:"bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-md transition-colors whitespace-nowrap",children:"+ Invite New"})]})]}),(0,Tn.jsx)("h3",{className:"text-lg font-semibold text-gray-800 border-b pb-2 mt-6",children:"Pricing"}),(0,Tn.jsxs)("div",{children:[(0,Tn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Monthly Price (\u20b9)"}),(0,Tn.jsx)("input",{type:"number",name:"monthly_price",value:c.monthly_price||"",onChange:I,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter amount"})]}),(0,Tn.jsxs)("div",{children:[(0,Tn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quarterly Price (\u20b9)"}),(0,Tn.jsx)("input",{type:"number",name:"quarterly_price",value:c.quarterly_price||"",onChange:I,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter amount"})]}),(0,Tn.jsxs)("div",{children:[(0,Tn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Yearly Price (\u20b9)"}),(0,Tn.jsx)("input",{type:"number",name:"yearly_price",value:c.yearly_price||"",onChange:I,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter amount"})]})]})]}),(0,Tn.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,Tn.jsx)("button",{onClick:()=>{h(!1),l(null)},className:"bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-md transition-colors",children:"Cancel"}),(0,Tn.jsx)("button",{onClick:async()=>{try{const{data:{user:e},error:t}=await En.auth.getUser();if(t||!e)return void alert("Authentication error. Please login again.");const{data:r,error:n}=await En.from("users").select("id, email, user_type, is_active").eq("id",e.id).single();if(n||!r||"admin"!==r.user_type)return void alert("Access denied: Admin privileges required");const a=await En.from("classrooms").update({name:c.name,description:c.description,board:c.board,grade_level:c.grade_level,subject:c.subject,max_students:parseInt(c.max_students)||30,is_active:"true"===c.is_active||"false"!==c.is_active&&null,teacher_id:c.teacher_id||null,updated_at:(new Date).toISOString()}).eq("id",o);if(a.error)return console.error("Classroom update failed:",a.error),void("42501"===a.error.code||403===a.status?alert("Permission denied. Please check if you have admin access and RLS policies allow this update."):alert("Failed to update classroom: ".concat(a.error.message)));const i=["monthly","quarterly","yearly"],u={monthly:"monthly_basic",quarterly:"quarterly_standard",yearly:"yearly_premium"};for(const s of i){const e=c["".concat(s,"_price")],t=L(T.find(e=>e.id===o),u[s]);if(e&&"-"!==e)if(t){const r=await En.from("classroom_pricing").update({price:e}).eq("id",t);r.error&&console.error("".concat(s," update error:"),r.error)}else{const t=await En.from("classroom_pricing").insert({classroom_id:o,payment_plan_id:u[s],price:e});t.error&&console.error("".concat(s," insert error:"),t.error)}else if(t){const e=await En.from("classroom_pricing").delete().eq("id",t);e.error&&console.error("".concat(s," delete error:"),e.error)}}l(null),h(!1),s("classrooms"),alert("Classroom updated successfully!")}catch(e){console.error("Save failed:",e),alert("Save failed: "+e.message)}},className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-md transition-colors",children:"Save Changes"})]})]})}),j&&(0,Tn.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:(0,Tn.jsx)("div",{className:"relative top-20 mx-auto p-5 border w-11/12 max-w-md shadow-lg rounded-md bg-white",children:(0,Tn.jsxs)("div",{className:"mt-3",children:[(0,Tn.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Invite New Teacher"}),(0,Tn.jsxs)("div",{className:"space-y-4",children:[(0,Tn.jsxs)("div",{children:[(0,Tn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email *"}),(0,Tn.jsx)("input",{type:"email",name:"email",value:N.email,onChange:R,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"teacher@example.com",required:!0})]}),(0,Tn.jsxs)("div",{children:[(0,Tn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name *"}),(0,Tn.jsx)("input",{type:"text",name:"firstName",value:N.firstName,onChange:R,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"John",required:!0})]}),(0,Tn.jsxs)("div",{children:[(0,Tn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name *"}),(0,Tn.jsx)("input",{type:"text",name:"lastName",value:N.lastName,onChange:R,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Doe",required:!0})]}),(0,Tn.jsxs)("div",{children:[(0,Tn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subject"}),(0,Tn.jsx)("input",{type:"text",name:"subject",value:N.subject,onChange:R,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 bg-gray-50",placeholder:"Subject",readOnly:!0}),(0,Tn.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Auto-filled from classroom"})]}),(0,Tn.jsxs)("div",{children:[(0,Tn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Grade Levels"}),(0,Tn.jsx)("input",{type:"text",value:N.gradeLevels.join(", ")||"None",className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 bg-gray-50",readOnly:!0}),(0,Tn.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Auto-filled from classroom"})]})]}),(0,Tn.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,Tn.jsx)("button",{onClick:()=>{k(!1),S({email:"",firstName:"",lastName:"",subject:"",gradeLevels:[]})},className:"bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-md transition-colors",children:"Cancel"}),(0,Tn.jsx)("button",{onClick:async()=>{console.log("\ud83d\ude80 handleSendInvitation called with:",N);try{if(!N.email||!N.firstName||!N.lastName)return void alert("Please fill in all required fields (Email, First Name, Last Name)");const{data:e,error:t}=await En.rpc("create_teacher_invitation",{p_email:N.email,p_first_name:N.firstName,p_last_name:N.lastName,p_admin_id:i.id,p_subject:N.subject||null,p_grade_levels:N.gradeLevels.length>0?N.gradeLevels:null});if(t)return console.error("Invitation creation error:",t),void alert("Failed to create invitation: "+t.message);console.log("Invitation created:",e),console.log("Sending magic link email...");const r="".concat("https://learnedtech.in","/teacher/onboard");console.log("Redirect URL:",r);const{error:n}=await En.auth.signInWithOtp({email:N.email,options:{shouldCreateUser:!0,emailRedirectTo:r,data:{user_type:"teacher",first_name:N.firstName,last_name:N.lastName,invitation_id:e.invitation_id}}});n?(console.error("Email sending error:",n),alert("Invitation created but email failed to send: "+n.message+"\n\nThe teacher can still complete onboarding by visiting the teacher onboarding page.")):(console.log("Magic link email sent successfully"),alert("Teacher invitation sent successfully! They will receive an email with a magic link to complete their profile.")),k(!1),S({email:"",firstName:"",lastName:"",subject:"",gradeLevels:[]}),s("teachers")}catch(e){console.error("Send invitation failed:",e),alert("Failed to send invitation: "+e.message)}},disabled:!N.email||!N.firstName||!N.lastName,className:"bg-green-500 hover:bg-green-600 disabled:bg-gray-300 disabled:cursor-not-allowed text-white px-4 py-2 rounded-md transition-colors",children:"Send Invitation"})]})]})})})]})},Hn=()=>{const{user:e,logout:t}=Ln(),r=re();return(0,Tn.jsxs)("div",{className:"min-h-screen bg-gray-100",children:[(0,Tn.jsx)("header",{className:"bg-white shadow",children:(0,Tn.jsxs)("div",{className:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8",children:[(0,Tn.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Tn.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Classroom Management"}),(0,Tn.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Tn.jsxs)("span",{className:"text-gray-700",children:["Welcome, ",null===e||void 0===e?void 0:e.email]}),(0,Tn.jsx)("button",{onClick:async()=>{await t(),window.location.href="/"},className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-md",children:"Logout"})]})]}),(0,Tn.jsx)("nav",{className:"mt-6",children:(0,Tn.jsxs)("div",{className:"flex space-x-8",children:[(0,Tn.jsx)("button",{onClick:()=>r("/"),className:"text-gray-500 hover:text-gray-700 px-3 py-2 font-medium text-sm",children:"Dashboard"}),(0,Tn.jsx)("button",{onClick:()=>r("/classrooms"),className:"border-b-2 border-blue-500 text-blue-600 px-3 py-2 font-medium text-sm",children:"Classrooms"}),(0,Tn.jsx)("button",{onClick:()=>r("/teachers"),className:"text-gray-500 hover:text-gray-700 px-3 py-2 font-medium text-sm",children:"Teachers"}),(0,Tn.jsx)("button",{onClick:()=>r("/students"),className:"text-gray-500 hover:text-gray-700 px-3 py-2 font-medium text-sm",children:"Students"}),(0,Tn.jsx)("button",{onClick:()=>r("/payment-approvals"),className:"text-gray-500 hover:text-gray-700 px-3 py-2 font-medium text-sm",children:"Payment Approvals"}),(0,Tn.jsx)("button",{onClick:()=>r("/grade-pricing"),className:"text-gray-500 hover:text-gray-700 px-3 py-2 font-medium text-sm",children:"Grade Pricing"})]})})]})}),(0,Tn.jsx)("main",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:(0,Tn.jsx)("div",{className:"px-4 py-6 sm:px-0",children:(0,Tn.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,Tn.jsx)(Wn,{})})})})]})},Vn=()=>{var e,t;const{user:r,logout:n}=Ln(),{adminData:s,refreshData:i}=An(),o=re(),[l,c]=(0,a.useState)(""),[u,d]=(0,a.useState)(""),[h,f]=(0,a.useState)(null),[m,p]=(0,a.useState)({}),[g,v]=(0,a.useState)(!1),[y,x]=(0,a.useState)(!1),[b,w]=(0,a.useState)(!1),[_,j]=(0,a.useState)(!1),[k,N]=(0,a.useState)(!1),[S,C]=(0,a.useState)(null),[E,T]=(0,a.useState)({first_name:"",last_name:"",email:"",subject:"",grade_levels:""}),[P,O]=(0,a.useState)([]),[L,I]=(0,a.useState)("teachers"),A=(0,a.useCallback)(async()=>{if(r){const{data:e,error:t}=await En.rpc("get_teacher_invitations",{p_admin_id:r.id});t?(console.error("Error fetching invitations:",t),O([])):O(e||[])}},[r]);(0,a.useEffect)(()=>{A()},[A]);const R=s.teachers||[],D=s.classrooms||[],M=e=>D.filter(t=>t.teacher_id===e),U=R.filter(e=>{var t,r,n,a;const s="".concat((null===(t=e.users)||void 0===t?void 0:t.first_name)||""," ").concat((null===(r=e.users)||void 0===r?void 0:r.last_name)||"").toLowerCase(),i=(null===(n=e.users)||void 0===n||null===(a=n.email)||void 0===a?void 0:a.toLowerCase())||"",o=""===l||s.includes(l.toLowerCase())||i.includes(l.toLowerCase()),c=""===u||e.specializations&&e.specializations.includes(u);return o&&c}),z=e=>{p(Te(Te({},m),{},{[e.target.name]:e.target.value}))},F=e=>{T(Te(Te({},E),{},{[e.target.name]:e.target.value}))};return(0,Tn.jsxs)("div",{className:"min-h-screen bg-gray-100",children:[(0,Tn.jsx)("header",{className:"bg-white shadow",children:(0,Tn.jsxs)("div",{className:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8",children:[(0,Tn.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Tn.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Teacher Management"}),(0,Tn.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Tn.jsxs)("span",{className:"text-gray-700",children:["Welcome, ",null===r||void 0===r?void 0:r.email]}),(0,Tn.jsx)("button",{onClick:async()=>{await n(),window.location.href="/"},className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-md",children:"Logout"})]})]}),(0,Tn.jsx)("nav",{className:"mt-6",children:(0,Tn.jsxs)("div",{className:"flex space-x-8",children:[(0,Tn.jsx)("button",{onClick:()=>o("/"),className:"text-gray-500 hover:text-gray-700 px-3 py-2 font-medium text-sm",children:"Dashboard"}),(0,Tn.jsx)("button",{onClick:()=>o("/classrooms"),className:"text-gray-500 hover:text-gray-700 px-3 py-2 font-medium text-sm",children:"Classrooms"}),(0,Tn.jsx)("button",{onClick:()=>o("/teachers"),className:"border-b-2 border-blue-500 text-blue-600 px-3 py-2 font-medium text-sm",children:"Teachers"}),(0,Tn.jsx)("button",{onClick:()=>o("/students"),className:"text-gray-500 hover:text-gray-700 px-3 py-2 font-medium text-sm",children:"Students"}),(0,Tn.jsx)("button",{onClick:()=>o("/payment-approvals"),className:"text-gray-500 hover:text-gray-700 px-3 py-2 font-medium text-sm",children:"Payment Approvals"}),(0,Tn.jsx)("button",{onClick:()=>o("/grade-pricing"),className:"text-gray-500 hover:text-gray-700 px-3 py-2 font-medium text-sm",children:"Grade Pricing"})]})})]})}),(0,Tn.jsx)("main",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:(0,Tn.jsx)("div",{className:"px-4 py-6 sm:px-0",children:(0,Tn.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,Tn.jsxs)("div",{className:"mb-6",children:[(0,Tn.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Manage Teachers & Invitations"}),(0,Tn.jsxs)("div",{className:"flex flex-wrap gap-3 mb-6",children:[(0,Tn.jsxs)("button",{onClick:()=>x(!0),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-colors duration-200 shadow-sm",children:[(0,Tn.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Tn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Invite New Teacher"]}),(0,Tn.jsxs)("button",{onClick:()=>j(!0),className:"inline-flex items-center px-4 py-2 border border-blue-300 text-sm font-medium rounded-md text-blue-700 bg-blue-50 hover:bg-blue-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200",children:[(0,Tn.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Tn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 0 012 2"})}),"View All Classrooms"]})]}),(0,Tn.jsx)("div",{className:"border-b border-gray-200",children:(0,Tn.jsxs)("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:[(0,Tn.jsx)("button",{onClick:()=>I("teachers"),className:"".concat("teachers"===L?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"," whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm"),children:"Current Teachers"}),(0,Tn.jsx)("button",{onClick:()=>I("invitations"),className:"".concat("invitations"===L?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"," whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm"),children:"Pending Invitations"})]})}),"teachers"===L&&(0,Tn.jsx)(Tn.Fragment,{children:(0,Tn.jsx)("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200 my-6",children:(0,Tn.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,Tn.jsxs)("div",{className:"flex-1",children:[(0,Tn.jsx)("label",{htmlFor:"search",className:"sr-only",children:"Search teachers"}),(0,Tn.jsxs)("div",{className:"relative",children:[(0,Tn.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,Tn.jsx)("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Tn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),(0,Tn.jsx)("input",{id:"search",type:"text",placeholder:"Search teachers by name or email...",value:l,onChange:e=>c(e.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]})]}),(0,Tn.jsxs)("div",{className:"sm:w-48",children:[(0,Tn.jsx)("label",{htmlFor:"subject-filter",className:"sr-only",children:"Filter by subject"}),(0,Tn.jsxs)("select",{id:"subject-filter",value:u,onChange:e=>d(e.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-md bg-white text-sm focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500",children:[(0,Tn.jsx)("option",{value:"",children:"All Subjects"}),(0,Tn.jsx)("option",{value:"Mathematics",children:"Mathematics"}),(0,Tn.jsx)("option",{value:"Science",children:"Science"}),(0,Tn.jsx)("option",{value:"Physics",children:"Physics"}),(0,Tn.jsx)("option",{value:"Chemistry",children:"Chemistry"}),(0,Tn.jsx)("option",{value:"English",children:"English"}),(0,Tn.jsx)("option",{value:"Social Studies",children:"Social Studies"}),(0,Tn.jsx)("option",{value:"Languages",children:"Languages"})]})]})]})})})]}),"teachers"===L&&(0,Tn.jsx)("div",{className:"bg-white shadow-sm rounded-lg border border-gray-200 overflow-hidden",children:(0,Tn.jsx)("div",{className:"overflow-x-auto",children:(0,Tn.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Tn.jsx)("thead",{className:"bg-gray-50",children:(0,Tn.jsxs)("tr",{children:[(0,Tn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),(0,Tn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),(0,Tn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Qualifications"}),(0,Tn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Experience"}),(0,Tn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Classrooms Assigned"}),(0,Tn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rating"}),(0,Tn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,Tn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"View ID"}),(0,Tn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,Tn.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:U.length>0?U.map(e=>{var t,r,n;return(0,Tn.jsxs)("tr",{children:[(0,Tn.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:[null===(t=e.users)||void 0===t?void 0:t.first_name," ",null===(r=e.users)||void 0===r?void 0:r.last_name]}),(0,Tn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:null===(n=e.users)||void 0===n?void 0:n.email}),(0,Tn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.qualifications||"Not specified"}),(0,Tn.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[e.experience_years||0," years"]}),(0,Tn.jsx)("td",{className:"px-6 py-4 text-sm text-gray-500",children:(()=>{const t=M(e.id);return(0,Tn.jsxs)("button",{onClick:()=>(e=>{C(e),w(!0)})(e),className:"text-blue-600 hover:underline",children:[t.length," classroom(s)"]})})()}),(0,Tn.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[e.rating?"".concat(e.rating,"/5"):"No rating"," (",e.total_reviews||0," reviews)"]}),(0,Tn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Tn.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full ".concat("active"===e.status?"bg-green-100 text-green-800":"inactive"===e.status?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"),children:"active"===e.status?"Active":"inactive"===e.status?"Inactive":"Not Set"})}),(0,Tn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:(0,Tn.jsx)("button",{onClick:()=>{C(e),N(!0)},className:"inline-flex items-center px-3 py-1 rounded-md text-sm font-medium bg-purple-50 text-purple-700 hover:bg-purple-100",children:"View ID"})}),(0,Tn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,Tn.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Tn.jsxs)("select",{value:e.status||"not_set",onChange:t=>(async(e,t)=>{if("not_set"===t)return void alert('Cannot set status to "Not Set". Please choose Active or Inactive.');const r="active"===t?"Active":"Inactive",n="inactive"===t?"Are you sure you want to set ".concat(e.users.first_name," to Inactive? This will remove them from all assigned classrooms."):"Are you sure you want to set ".concat(e.users.first_name," to ").concat(r,"?");if(window.confirm(n))try{const{data:{session:n}}=await En.auth.getSession();if(console.log("Current session:",n),!n)return void alert("Authentication session expired. Please log in again.");if("inactive"===t){const{error:t}=await En.from("classrooms").update({teacher_id:null,updated_at:(new Date).toISOString()}).eq("teacher_id",e.id);if(t)return console.error("Unassign error:",t),void alert("Failed to unassign teacher from classrooms: "+t.message)}const{error:a}=await En.from("teachers").update({status:t,updated_at:(new Date).toISOString()}).eq("id",e.id);if(a)throw console.error("Status update error:",a),a;await i(),alert("Teacher status updated to ".concat(r,"."))}catch(a){console.error("Status update failed:",a),alert("Failed to update teacher status: "+a.message)}})(e,t.target.value),className:"text-sm border rounded-md px-2 py-1 font-medium transition-colors duration-200 ".concat("active"===e.status?"border-green-300 text-green-700 bg-green-50":"inactive"===e.status?"border-red-300 text-red-700 bg-red-50":"border-gray-300 text-gray-700 bg-gray-50"),children:[(0,Tn.jsx)("option",{value:"active",children:"Active"}),(0,Tn.jsx)("option",{value:"inactive",children:"Inactive"}),(0,Tn.jsx)("option",{value:"not_set",disabled:!0,children:"Not Set"})]}),(0,Tn.jsxs)("button",{onClick:()=>{var t,r;return(async(e,t)=>{const r='\u26a0\ufe0f DANGEROUS ACTION \u26a0\ufe0f\n\nAre you ABSOLUTELY SURE you want to permanently DELETE the teacher "'.concat(t,'"?\n\nThis action:\n\u2022 CANNOT be undone\n\u2022 Will REMOVE them from ALL assigned classrooms\n\u2022 Will DELETE all their data permanently\n\nType "DELETE" to confirm:'),n=window.prompt(r);if("DELETE"===n)try{const{error:t}=await En.from("classrooms").update({teacher_id:null,updated_at:(new Date).toISOString()}).eq("teacher_id",e);if(t)return console.error("Unassign error:",t),void alert("Failed to unassign teacher from classrooms: "+t.message);const{error:r}=await En.from("teachers").delete().eq("id",e);if(r)throw console.error("Teacher delete error:",r),r;const n=R.find(t=>t.id===e);if(n&&n.user_id){const{error:e}=await En.from("users").delete().eq("id",n.user_id);e&&console.warn("User deletion warning:",e.message)}alert("Teacher deleted successfully!"),await i()}catch(a){console.error("Delete teacher failed:",a),alert("Failed to delete teacher: "+a.message)}else null!==n&&alert('Deletion cancelled. You must type "DELETE" exactly to confirm.')})(e.id,"".concat(null===(t=e.users)||void 0===t?void 0:t.first_name," ").concat(null===(r=e.users)||void 0===r?void 0:r.last_name))},className:"inline-flex items-center px-3 py-1.5 border-2 border-red-500 text-red-700 bg-red-100 hover:bg-red-200 hover:border-red-600 rounded-md text-sm font-bold transition-all duration-200 shadow-md hover:shadow-lg",title:"\u26a0\ufe0f DANGER: This will permanently delete the teacher!",children:[(0,Tn.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Tn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"\u26a0\ufe0f DELETE"]})]})})]},e.id)}):(0,Tn.jsx)("tr",{children:(0,Tn.jsx)("td",{colSpan:"8",className:"px-6 py-4 text-center text-gray-500",children:0===R.length?"No teachers found":"No teachers match your search criteria"})})})]})})}),"invitations"===L&&(0,Tn.jsx)("div",{className:"bg-white shadow-sm rounded-lg border border-gray-200 overflow-hidden mt-6",children:(0,Tn.jsx)("div",{className:"overflow-x-auto",children:(0,Tn.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Tn.jsx)("thead",{className:"bg-gray-50",children:(0,Tn.jsxs)("tr",{children:[(0,Tn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),(0,Tn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),(0,Tn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,Tn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Expires At"}),(0,Tn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,Tn.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:P.length>0?P.map(e=>(0,Tn.jsxs)("tr",{children:[(0,Tn.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[e.first_name," ",e.last_name]}),(0,Tn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.email}),(0,Tn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Tn.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full ".concat("pending"===e.status?"bg-yellow-100 text-yellow-800":"accepted"===e.status?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:e.status})}),(0,Tn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.expires_at).toLocaleString()}),(0,Tn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:"pending"===e.status&&(0,Tn.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to cancel this invitation?"))try{const{data:{user:t}}=await En.auth.getUser();if(!t)return void alert("Admin authentication required");const{data:r,error:n}=await En.rpc("cancel_teacher_invitation",{p_invitation_id:e,p_admin_id:t.id});if(n)throw n;r.success?(alert("Invitation cancelled successfully."),A()):alert("Failed to cancel invitation: "+r.error)}catch(t){console.error("Cancel invitation failed:",t),alert("Failed to cancel invitation: "+t.message)}})(e.invitation_id),className:"text-red-600 hover:text-red-900",children:"Cancel"})})]},e.invitation_id)):(0,Tn.jsx)("tr",{children:(0,Tn.jsx)("td",{colSpan:"5",className:"px-6 py-4 text-center text-gray-500",children:"No invitations found."})})})]})})})]})})}),g&&(0,Tn.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:(0,Tn.jsx)("div",{className:"relative top-20 mx-auto p-5 border w-11/12 md:w-3/4 lg:w-1/2 shadow-lg rounded-md bg-white",children:(0,Tn.jsxs)("div",{className:"mt-3",children:[(0,Tn.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Edit Teacher"}),(0,Tn.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Tn.jsxs)("div",{children:[(0,Tn.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"First Name"}),(0,Tn.jsx)("input",{type:"text",name:"first_name",value:m.first_name||"",onChange:z,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]}),(0,Tn.jsxs)("div",{children:[(0,Tn.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Last Name"}),(0,Tn.jsx)("input",{type:"text",name:"last_name",value:m.last_name||"",onChange:z,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]}),(0,Tn.jsxs)("div",{children:[(0,Tn.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),(0,Tn.jsx)("input",{type:"email",name:"email",value:m.email||"",onChange:z,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]}),(0,Tn.jsxs)("div",{children:[(0,Tn.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Phone"}),(0,Tn.jsx)("input",{type:"text",name:"phone",value:m.phone||"",onChange:z,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]}),(0,Tn.jsxs)("div",{children:[(0,Tn.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Experience (Years)"}),(0,Tn.jsx)("input",{type:"number",name:"experience_years",value:m.experience_years||"",onChange:z,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]}),(0,Tn.jsxs)("div",{children:[(0,Tn.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Hourly Rate"}),(0,Tn.jsx)("input",{type:"number",step:"0.01",name:"hourly_rate",value:m.hourly_rate||"",onChange:z,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]}),(0,Tn.jsxs)("div",{className:"md:col-span-2",children:[(0,Tn.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Qualifications"}),(0,Tn.jsx)("textarea",{name:"qualifications",rows:"3",value:m.qualifications||"",onChange:z,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]}),(0,Tn.jsxs)("div",{className:"md:col-span-2",children:[(0,Tn.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Bio"}),(0,Tn.jsx)("textarea",{name:"bio",rows:"3",value:m.bio||"",onChange:z,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]}),(0,Tn.jsxs)("div",{children:[(0,Tn.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Status"}),(0,Tn.jsxs)("select",{name:"is_active",value:m.is_active||"true",onChange:z,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",children:[(0,Tn.jsx)("option",{value:"true",children:"Active"}),(0,Tn.jsx)("option",{value:"false",children:"Suspended"})]})]})]}),(0,Tn.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,Tn.jsx)("button",{onClick:()=>{v(!1),f(null),p({})},className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400",children:"Cancel"}),(0,Tn.jsx)("button",{onClick:async()=>{try{const{data:{user:e},error:t}=await En.auth.getUser();if(t||!e)return void alert("Authentication error. Please login again.");const{data:r,error:n}=await En.from("users").select("id, email, user_type, is_active").eq("id",e.id).single();if(n||!r||"admin"!==r.user_type)return void alert("Access denied: Admin privileges required");const a=await En.from("teachers").update({qualifications:m.qualifications,experience_years:parseInt(m.experience_years)||0,hourly_rate:parseFloat(m.hourly_rate)||null,bio:m.bio,status:"true"===m.is_active?"active":"suspended",updated_at:(new Date).toISOString()}).eq("id",h);if(a.error)return console.error("Teacher update failed:",a.error),void alert("Failed to update teacher: ".concat(a.error.message));const s=await En.from("users").update({first_name:m.first_name,last_name:m.last_name,email:m.email,phone:m.phone,updated_at:(new Date).toISOString()}).eq("id",m.user_id);if(s.error)return console.error("User update failed:",s.error),void alert("Failed to update user information: ".concat(s.error.message));alert("Teacher updated successfully!"),v(!1),f(null),p({}),await i()}catch(e){console.error("Update teacher failed:",e),alert("Failed to update teacher: "+e.message)}},className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600",children:"Save Changes"})]})]})})}),y&&(0,Tn.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:(0,Tn.jsx)("div",{className:"relative top-20 mx-auto p-5 border w-11/12 md:w-3/4 lg:w-1/2 shadow-lg rounded-md bg-white",children:(0,Tn.jsxs)("div",{className:"mt-3",children:[(0,Tn.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Invite New Teacher"}),(0,Tn.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Tn.jsxs)("div",{children:[(0,Tn.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:["First Name ",(0,Tn.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Tn.jsx)("input",{type:"text",name:"first_name",value:E.first_name,onChange:F,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"Enter first name",required:!0})]}),(0,Tn.jsxs)("div",{children:[(0,Tn.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:["Last Name ",(0,Tn.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Tn.jsx)("input",{type:"text",name:"last_name",value:E.last_name,onChange:F,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"Enter last name",required:!0})]}),(0,Tn.jsxs)("div",{className:"md:col-span-2",children:[(0,Tn.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:["Email ",(0,Tn.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Tn.jsx)("input",{type:"email",name:"email",value:E.email,onChange:F,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"teacher@example.com",required:!0})]}),(0,Tn.jsxs)("div",{children:[(0,Tn.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Primary Subject"}),(0,Tn.jsx)("input",{type:"text",name:"subject",value:E.subject,onChange:F,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"e.g., Mathematics"})]}),(0,Tn.jsxs)("div",{children:[(0,Tn.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Grade Levels"}),(0,Tn.jsx)("input",{type:"text",name:"grade_levels",value:E.grade_levels,onChange:F,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"e.g., 9, 10, 11"}),(0,Tn.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Comma-separated values."})]})]}),(0,Tn.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,Tn.jsx)("button",{onClick:()=>x(!1),className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400",children:"Cancel"}),(0,Tn.jsx)("button",{onClick:async()=>{console.log("\ud83d\ude80 [AdminTeachers] handleSendInvitation called with:",E);try{var e,t,r;if(null===(e=E.first_name)||void 0===e||!e.trim()||null===(t=E.last_name)||void 0===t||!t.trim()||null===(r=E.email)||void 0===r||!r.trim())return void alert("Please fill in all required fields (First Name, Last Name, Email)");if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(E.email.trim()))return void alert("Please enter a valid email address");const n=E.grade_levels.split(",").map(e=>parseInt(e.trim())).filter(e=>!isNaN(e));console.log("\ud83d\udcca Parsed grade levels:",n);const{data:{user:a}}=await En.auth.getUser();if(console.log("\ud83d\udc64 Admin user:",null===a||void 0===a?void 0:a.id),!a)return void alert("Admin authentication required");console.log("\ud83d\udce4 Calling create_teacher_invitation RPC...");const{data:s,error:i}=await En.rpc("create_teacher_invitation",{p_email:E.email,p_first_name:E.first_name,p_last_name:E.last_name,p_subject:E.subject||null,p_grade_levels:n.length>0?n:null,p_admin_id:a.id});if(i)throw console.error("\u274c RPC Error:",i),i;console.log("\u2705 Invitation created:",s),console.log("\ud83d\udce7 Sending magic link email...");const o="".concat("https://learnedtech.in","/teacher/onboard");console.log("\ud83d\udccd Redirect URL:",o),console.log("\ud83d\udce6 Email data:",{email:E.email,metadata:{user_type:"teacher",first_name:E.first_name,last_name:E.last_name,invitation_id:s.invitation_id}});const{data:l,error:c}=await En.auth.signInWithOtp({email:E.email,options:{shouldCreateUser:!0,emailRedirectTo:o,data:{user_type:"teacher",first_name:E.first_name,last_name:E.last_name,invitation_id:s.invitation_id}}});console.log("\ud83d\udcec OTP Response:",l),console.log("\u2753 OTP Error:",c),c?(console.error("\u274c Email sending error:",c),alert("Invitation created but email failed to send: "+c.message+"\n\nThe teacher can still complete onboarding by visiting the teacher onboarding page and entering their email.")):(console.log("\u2705 Magic link email sent successfully"),alert("Teacher invitation sent successfully! They will receive an email with a magic link to complete their profile.")),x(!1),T({first_name:"",last_name:"",email:"",subject:"",grade_levels:""}),A()}catch(n){console.error("\ud83d\udca5 Send invitation failed:",n),alert("Failed to send invitation: "+n.message)}},className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600",children:"Send Invitation"})]})]})})}),b&&S&&(0,Tn.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:(0,Tn.jsx)("div",{className:"relative top-20 mx-auto p-5 border w-11/12 md:w-3/4 lg:w-1/2 shadow-lg rounded-md bg-white",children:(0,Tn.jsxs)("div",{className:"mt-3",children:[(0,Tn.jsxs)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:["Assign Classrooms for ",S.users.first_name," ",S.users.last_name]}),(0,Tn.jsxs)("div",{className:"mb-6",children:[(0,Tn.jsx)("h4",{className:"font-semibold text-gray-800 mb-2",children:"Currently Assigned:"}),M(S.id).length>0?(0,Tn.jsx)("ul",{className:"space-y-2",children:M(S.id).map(e=>(0,Tn.jsxs)("li",{className:"flex justify-between items-center bg-gray-100 p-2 rounded-md",children:[(0,Tn.jsxs)("span",{children:[e.name," (",e.subject,")"]}),(0,Tn.jsx)("button",{onClick:()=>(async e=>{if(!S)return;const t=D.find(t=>t.id===e);if(t&&window.confirm("Are you sure you want to de-assign ".concat(S.users.first_name," from ").concat(t.name,"?")))try{const{error:t}=await En.from("classrooms").update({teacher_id:null}).eq("id",e);if(t)throw t;await i(),alert("Teacher de-assigned successfully.");const r=Te(Te({},S),{},{classrooms:M(S.id)});C(r)}catch(r){console.error("De-assign teacher failed:",r),alert("Failed to de-assign teacher: "+r.message)}})(e.id),className:"text-red-500 hover:text-red-700 text-sm font-semibold",children:"De-assign"})]},e.id))}):(0,Tn.jsx)("p",{className:"text-gray-500",children:"Not assigned to any classrooms."})]}),(0,Tn.jsx)("hr",{className:"my-6"}),(0,Tn.jsxs)("div",{children:[(0,Tn.jsx)("h4",{className:"font-semibold text-gray-800 mb-2",children:"Available Classrooms (Unassigned):"}),(0,Tn.jsx)("ul",{className:"space-y-2",children:D.filter(e=>!e.teacher_id).map(e=>(0,Tn.jsxs)("li",{className:"flex justify-between items-center bg-white p-2 rounded-md border",children:[(0,Tn.jsxs)("span",{children:[e.name," (",e.subject,")"]}),(0,Tn.jsx)("button",{onClick:()=>(async e=>{try{const{error:t}=await En.from("classrooms").update({teacher_id:S.id,updated_at:(new Date).toISOString()}).eq("id",e);if(t)return console.error("Classroom assignment error:",t),void alert("Failed to assign teacher to classroom: "+t.message);alert("Teacher assigned to classroom successfully!"),await i();const r=Te(Te({},S),{},{classrooms:M(S.id)});C(r)}catch(t){console.error("Assign teacher failed:",t),alert("Failed to assign teacher: "+t.message)}})(e.id),className:"bg-green-500 text-white px-3 py-1 rounded-md hover:bg-green-600 text-sm font-semibold",children:"Assign"})]},e.id))})]}),(0,Tn.jsx)("div",{className:"flex justify-end mt-6",children:(0,Tn.jsx)("button",{onClick:()=>{w(!1),C(null)},className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400",children:"Close"})})]})})}),_&&(0,Tn.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:(0,Tn.jsx)("div",{className:"relative top-20 mx-auto p-5 border w-11/12 md:w-3/4 lg:w-2/3 shadow-lg rounded-md bg-white",children:(0,Tn.jsxs)("div",{className:"mt-3",children:[(0,Tn.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"All Classrooms - Assignment Status"}),(0,Tn.jsxs)("div",{className:"space-y-6",children:[(0,Tn.jsxs)("div",{children:[(0,Tn.jsxs)("h4",{className:"font-semibold text-gray-800 mb-3 flex items-center",children:[(0,Tn.jsx)("span",{className:"inline-block w-3 h-3 bg-green-500 rounded-full mr-2"}),"Assigned Classrooms (",D.filter(e=>e.teacher_id).length,")"]}),D.filter(e=>e.teacher_id).length>0?(0,Tn.jsx)("div",{className:"space-y-2",children:D.filter(e=>e.teacher_id).map(e=>{var t,r;const n=R.find(t=>t.id===e.teacher_id);return(0,Tn.jsxs)("div",{className:"flex justify-between items-center bg-green-50 border border-green-200 p-3 rounded-md",children:[(0,Tn.jsxs)("div",{className:"flex-1",children:[(0,Tn.jsx)("div",{className:"font-medium text-gray-900",children:e.name}),(0,Tn.jsxs)("div",{className:"text-sm text-gray-600",children:[e.subject," \u2022 Grade ",e.grade_level]}),n&&(0,Tn.jsxs)("div",{className:"text-sm text-green-700 font-medium mt-1",children:["\ud83d\udc64 ",null===(t=n.users)||void 0===t?void 0:t.first_name," ",null===(r=n.users)||void 0===r?void 0:r.last_name]})]}),(0,Tn.jsx)("button",{onClick:()=>{var t,r;return(async(e,t,r)=>{if(window.confirm("Are you sure you want to de-assign ".concat(r," from ").concat(t,"?")))try{const{error:t}=await En.from("classrooms").update({teacher_id:null,updated_at:(new Date).toISOString()}).eq("id",e);if(t)throw t;await i(),alert("Teacher de-assigned successfully.")}catch(n){console.error("De-assign teacher failed:",n),alert("Failed to de-assign teacher: "+n.message)}})(e.id,e.name,n?"".concat(null===(t=n.users)||void 0===t?void 0:t.first_name," ").concat(null===(r=n.users)||void 0===r?void 0:r.last_name):"teacher")},className:"ml-4 text-red-500 hover:text-red-700 text-sm font-semibold bg-white px-3 py-1.5 rounded border border-red-300 hover:bg-red-50",children:"De-assign"})]},e.id)})}):(0,Tn.jsx)("p",{className:"text-gray-500 italic",children:"No classrooms are currently assigned."})]}),(0,Tn.jsx)("hr",{className:"my-4"}),(0,Tn.jsxs)("div",{children:[(0,Tn.jsxs)("h4",{className:"font-semibold text-gray-800 mb-3 flex items-center",children:[(0,Tn.jsx)("span",{className:"inline-block w-3 h-3 bg-yellow-500 rounded-full mr-2"}),"Unassigned Classrooms (",D.filter(e=>!e.teacher_id).length,")"]}),D.filter(e=>!e.teacher_id).length>0?(0,Tn.jsx)("div",{className:"space-y-2",children:D.filter(e=>!e.teacher_id).map(e=>(0,Tn.jsxs)("div",{className:"flex justify-between items-center bg-yellow-50 border border-yellow-200 p-3 rounded-md",children:[(0,Tn.jsxs)("div",{className:"flex-1",children:[(0,Tn.jsx)("div",{className:"font-medium text-gray-900",children:e.name}),(0,Tn.jsxs)("div",{className:"text-sm text-gray-600",children:[e.subject," \u2022 Grade ",e.grade_level]})]}),(0,Tn.jsx)("div",{className:"ml-4 flex items-center space-x-2",children:(0,Tn.jsxs)("select",{onChange:t=>{t.target.value&&((async(e,t)=>{try{const{error:r}=await En.from("classrooms").update({teacher_id:t,updated_at:(new Date).toISOString()}).eq("id",e);if(r)return console.error("Classroom assignment error:",r),void alert("Failed to assign teacher to classroom: "+r.message);alert("Teacher assigned to classroom successfully!"),await i()}catch(r){console.error("Assign teacher failed:",r),alert("Failed to assign teacher: "+r.message)}})(e.id,t.target.value),t.target.value="")},className:"text-sm border border-gray-300 rounded-md px-2 py-1.5",defaultValue:"",children:[(0,Tn.jsx)("option",{value:"",disabled:!0,children:"Select Teacher..."}),R.filter(e=>"active"===e.status).map(e=>{var t,r;return(0,Tn.jsxs)("option",{value:e.id,children:[null===(t=e.users)||void 0===t?void 0:t.first_name," ",null===(r=e.users)||void 0===r?void 0:r.last_name]},e.id)})]})})]},e.id))}):(0,Tn.jsx)("p",{className:"text-gray-500 italic",children:"All classrooms have been assigned!"})]})]}),(0,Tn.jsx)("div",{className:"flex justify-end mt-6",children:(0,Tn.jsx)("button",{onClick:()=>j(!1),className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400",children:"Close"})})]})})}),k&&S&&(0,Tn.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,Tn.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full",children:[(0,Tn.jsxs)("div",{className:"bg-gradient-to-r from-purple-500 to-purple-600 px-6 py-4 flex justify-between items-center rounded-t-lg",children:[(0,Tn.jsx)("h2",{className:"text-xl font-bold text-white",children:"Teacher ID"}),(0,Tn.jsx)("button",{onClick:()=>N(!1),className:"text-white hover:text-gray-100",children:"\u2715"})]}),(0,Tn.jsxs)("div",{className:"p-6 space-y-4",children:[(0,Tn.jsxs)("div",{children:[(0,Tn.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[null===(e=S.users)||void 0===e?void 0:e.first_name," ",null===(t=S.users)||void 0===t?void 0:t.last_name]}),(0,Tn.jsx)("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:(0,Tn.jsx)("p",{className:"text-sm font-mono text-gray-900 break-all text-center",children:S.id})})]}),(0,Tn.jsxs)("p",{className:"text-xs text-gray-600 text-center",children:["User ID: ",S.user_id]})]}),(0,Tn.jsx)("div",{className:"bg-gray-50 border-t border-gray-200 px-6 py-4 flex justify-end rounded-b-lg",children:(0,Tn.jsx)("button",{onClick:()=>N(!1),className:"px-4 py-2 bg-purple-600 rounded-lg text-sm font-medium text-white hover:bg-purple-700",children:"Close"})})]})})]})},Gn=()=>{const{user:e,logout:t}=Ln(),{adminData:r,refreshData:n}=An(),s=re(),[i,o]=(0,a.useState)(""),[l,c]=(0,a.useState)(""),[u,d]=(0,a.useState)(""),[h,f]=(0,a.useState)(!1),[m,p]=(0,a.useState)(null),[g,v]=(0,a.useState)([]),y=(0,a.useMemo)(()=>r.studentsWithClassrooms||[],[r.studentsWithClassrooms]),x=(0,a.useMemo)(()=>{var e;return(null===(e=r.classrooms)||void 0===e?void 0:e.filter(e=>e.is_active))||[]},[r.classrooms]),b=!r.studentsWithClassrooms||0===r.studentsWithClassrooms.length;(0,a.useEffect)(()=>{let e=!0;return 0===g.length&&(async()=>{const{data:t}=await En.from("payment_plans").select("id, name, billing_cycle").eq("is_active",!0);e&&v(t||[])})(),()=>{e=!1}},[]);const w=y.filter(e=>{var t,r,n;const a=(null===(t=e.student_name)||void 0===t?void 0:t.toLowerCase())||"",s=(null===(r=e.email)||void 0===r?void 0:r.toLowerCase())||"",o=""===i||a.includes(i.toLowerCase())||s.includes(i.toLowerCase())||(null===(n=e.student_identifier)||void 0===n?void 0:n.toLowerCase().includes(i.toLowerCase())),c=""===l||String(e.grade_level)===String(l),d=""===u||e.board===u;return o&&c&&d});return(0,Tn.jsxs)("div",{className:"min-h-screen bg-gray-100",children:[(0,Tn.jsx)("header",{className:"bg-white shadow",children:(0,Tn.jsxs)("div",{className:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8",children:[(0,Tn.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Tn.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Student Management"}),(0,Tn.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Tn.jsxs)("span",{className:"text-gray-700",children:["Welcome, ",null===e||void 0===e?void 0:e.email]}),(0,Tn.jsx)("button",{onClick:async()=>{await t(),window.location.href="/"},className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-md",children:"Logout"})]})]}),(0,Tn.jsx)("nav",{className:"mt-6",children:(0,Tn.jsxs)("div",{className:"flex space-x-8",children:[(0,Tn.jsx)("button",{onClick:()=>s("/"),className:"text-gray-500 hover:text-gray-700 px-3 py-2 font-medium text-sm",children:"Dashboard"}),(0,Tn.jsx)("button",{onClick:()=>s("/classrooms"),className:"text-gray-500 hover:text-gray-700 px-3 py-2 font-medium text-sm",children:"Classrooms"}),(0,Tn.jsx)("button",{onClick:()=>s("/teachers"),className:"text-gray-500 hover:text-gray-700 px-3 py-2 font-medium text-sm",children:"Teachers"}),(0,Tn.jsx)("button",{onClick:()=>s("/students"),className:"border-b-2 border-blue-500 text-blue-600 px-3 py-2 font-medium text-sm",children:"Students"}),(0,Tn.jsx)("button",{onClick:()=>s("/payment-approvals"),className:"text-gray-500 hover:text-gray-700 px-3 py-2 font-medium text-sm",children:"Payment Approvals"}),(0,Tn.jsx)("button",{onClick:()=>s("/grade-pricing"),className:"text-gray-500 hover:text-gray-700 px-3 py-2 font-medium text-sm",children:"Grade Pricing"})]})})]})}),(0,Tn.jsx)("main",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:(0,Tn.jsx)("div",{className:"px-4 py-6 sm:px-0",children:(0,Tn.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,Tn.jsxs)("div",{className:"mb-6",children:[(0,Tn.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Manage Students"}),(0,Tn.jsxs)("div",{className:"flex gap-4 mb-4",children:[(0,Tn.jsx)("input",{type:"text",placeholder:"Search students...",value:i,onChange:e=>o(e.target.value),className:"border border-gray-300 rounded-md px-3 py-2 flex-1"}),(0,Tn.jsxs)("select",{value:l,onChange:e=>c(e.target.value),className:"border border-gray-300 rounded-md px-3 py-2",children:[(0,Tn.jsx)("option",{value:"",children:"All Grades"}),(0,Tn.jsx)("option",{value:"6",children:"Grade 6"}),(0,Tn.jsx)("option",{value:"7",children:"Grade 7"}),(0,Tn.jsx)("option",{value:"8",children:"Grade 8"}),(0,Tn.jsx)("option",{value:"9",children:"Grade 9"}),(0,Tn.jsx)("option",{value:"10",children:"Grade 10"})]}),(0,Tn.jsxs)("select",{value:u,onChange:e=>d(e.target.value),className:"border border-gray-300 rounded-md px-3 py-2",children:[(0,Tn.jsx)("option",{value:"",children:"All Boards"}),(0,Tn.jsx)("option",{value:"CBSE",children:"CBSE"}),(0,Tn.jsx)("option",{value:"ICSE",children:"ICSE"}),(0,Tn.jsx)("option",{value:"IGCSE",children:"IGCSE"})]})]})]}),(0,Tn.jsx)("div",{className:"overflow-x-auto",children:b?(0,Tn.jsx)("div",{className:"text-center py-8",children:"Loading students..."}):(0,Tn.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Tn.jsx)("thead",{className:"bg-gray-50",children:(0,Tn.jsxs)("tr",{children:[(0,Tn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student ID"}),(0,Tn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),(0,Tn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),(0,Tn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Grade/Board"}),(0,Tn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"School"}),(0,Tn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,Tn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Classrooms"}),(0,Tn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,Tn.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:w.length>0?w.map(e=>(0,Tn.jsxs)("tr",{children:[(0,Tn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.student_identifier}),(0,Tn.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:[(0,Tn.jsx)("div",{className:"font-medium text-gray-900",children:e.student_name}),(0,Tn.jsx)("div",{className:"text-xs text-gray-500",children:e.phone||"-"})]}),(0,Tn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.email}),(0,Tn.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[(0,Tn.jsxs)("div",{children:["Grade ",e.grade_level||"-"]}),(0,Tn.jsx)("div",{className:"text-xs",children:e.board||"-"})]}),(0,Tn.jsx)("td",{className:"px-6 py-4 text-sm text-gray-500",children:e.school_name||"-"}),(0,Tn.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,Tn.jsx)("span",{className:"px-2 py-1 text-xs font-semibold rounded-full ".concat("active"===e.student_status?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.student_status}),(0,Tn.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:[e.active_enrollments,"/",e.total_enrollments," active"]})]}),(0,Tn.jsxs)("td",{className:"px-6 py-4 text-sm text-gray-500",children:[e.classrooms&&e.classrooms.length>0?(0,Tn.jsx)("div",{className:"space-y-2",children:e.classrooms.map((t,r)=>(0,Tn.jsxs)("div",{className:"flex items-center justify-between space-x-2 bg-gray-50 p-2 rounded",children:[(0,Tn.jsxs)("div",{children:[(0,Tn.jsx)("div",{className:"font-medium",children:t.classroom_name}),(0,Tn.jsxs)("div",{className:"text-xs text-gray-400",children:["(",t.subject,")"]})]}),(0,Tn.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Tn.jsx)("span",{className:"px-2 py-1 text-xs rounded ".concat("active"===t.enrollment_status?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:"cancelled"===t.enrollment_status?"inactive":t.enrollment_status}),"active"===t.enrollment_status?(0,Tn.jsx)("button",{onClick:()=>(async(e,t)=>{if(!window.confirm("Remove this student from the classroom?"))return;const{data:r,error:a}=await En.rpc("admin_remove_student_from_classroom",{p_student_id:e,p_classroom_id:t});a?(console.error("Error:",a),alert("Failed to remove student from classroom")):r.success?(alert(r.message),await n()):alert(r.error)})(e.student_id,t.classroom_id),className:"px-2 py-1 bg-red-100 text-red-700 hover:bg-red-200 rounded text-xs",children:"Remove"}):(0,Tn.jsx)("button",{onClick:()=>(async(e,t)=>{if(!window.confirm("Reactivate this student enrollment?"))return;const{data:r,error:a}=await En.rpc("admin_reactivate_student_enrollment",{p_student_id:e,p_classroom_id:t});a?(console.error("Error:",a),alert("Failed to reactivate enrollment")):r.success?(alert(r.message),await n()):alert(r.error)})(e.student_id,t.classroom_id),className:"px-2 py-1 bg-green-100 text-green-700 hover:bg-green-200 rounded text-xs",children:"Reactivate"})]})]},r))}):(0,Tn.jsx)("span",{className:"text-gray-400 italic",children:"No enrollments"}),(0,Tn.jsx)("button",{onClick:()=>(e=>{p(e),f(!0)})(e),className:"mt-2 w-full px-2 py-1 bg-blue-100 text-blue-700 hover:bg-blue-200 rounded text-xs",children:"+ Enroll in Classroom"})]}),(0,Tn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:(0,Tn.jsxs)("select",{value:e.student_status,onChange:t=>(async(e,t)=>{if(!window.confirm("Are you sure you want to set this student to ".concat(t,"? ").concat("inactive"===t?"This will remove them from all classrooms.":"")))return;const{error:r}=await En.rpc("admin_update_student_status",{p_student_id:e,p_status:t});r?(console.error("Error updating status:",r),alert("Failed to update student status")):(alert("Student status updated successfully"),await n())})(e.student_id,t.target.value),className:"px-3 py-1 rounded text-xs font-medium border ".concat("active"===e.student_status?"bg-green-50 text-green-700 border-green-300":"bg-red-50 text-red-700 border-red-300"),children:[(0,Tn.jsx)("option",{value:"active",children:"Active"}),(0,Tn.jsx)("option",{value:"inactive",children:"Inactive"})]})})]},e.student_id)):(0,Tn.jsx)("tr",{children:(0,Tn.jsx)("td",{colSpan:"8",className:"px-6 py-4 text-center text-gray-500",children:"No students found"})})})]})})]})})}),h&&(0,Tn.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Tn.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[(0,Tn.jsx)("h3",{className:"text-xl font-bold mb-4",children:"Enroll Student in Classroom"}),(0,Tn.jsxs)("p",{className:"text-gray-600 mb-4",children:["Student: ",(0,Tn.jsx)("strong",{children:null===m||void 0===m?void 0:m.student_name})]}),(0,Tn.jsxs)("form",{onSubmit:async e=>{e.preventDefault();const t=new FormData(e.target),r=t.get("classroom_id"),a=t.get("payment_plan_id"),{data:s,error:i}=await En.rpc("admin_enroll_student_in_classroom",{p_student_id:m.student_id,p_classroom_id:r,p_payment_plan_id:a});i?alert("Failed to enroll student"):s.success?(alert(s.message),f(!1),await n()):alert(s.error)},children:[(0,Tn.jsxs)("div",{className:"mb-4",children:[(0,Tn.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Select Classroom"}),(0,Tn.jsxs)("select",{name:"classroom_id",required:!0,className:"w-full border border-gray-300 rounded-md px-3 py-2",children:[(0,Tn.jsx)("option",{value:"",children:"Choose a classroom..."}),x.map(e=>(0,Tn.jsxs)("option",{value:e.id,children:[e.name," - ",e.subject," (Grade ",e.grade_level,")"]},e.id))]})]}),(0,Tn.jsxs)("div",{className:"mb-4",children:[(0,Tn.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Select Payment Plan"}),(0,Tn.jsxs)("select",{name:"payment_plan_id",required:!0,className:"w-full border border-gray-300 rounded-md px-3 py-2",children:[(0,Tn.jsx)("option",{value:"",children:"Choose a plan..."}),g.map(e=>(0,Tn.jsxs)("option",{value:e.id,children:[e.name," (",e.billing_cycle,")"]},e.id))]})]}),(0,Tn.jsxs)("div",{className:"flex gap-2",children:[(0,Tn.jsx)("button",{type:"submit",className:"flex-1 bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-md",children:"Enroll"}),(0,Tn.jsx)("button",{type:"button",onClick:()=>f(!1),className:"flex-1 bg-gray-300 hover:bg-gray-400 text-gray-800 px-4 py-2 rounded-md",children:"Cancel"})]})]})]})})]})},Kn=()=>{const{user:e,logout:t}=Ln(),r=re(),{adminData:n,refreshData:s}=An(),[i,o]=(0,a.useState)(""),[l,c]=(0,a.useState)(""),[u,d]=(0,a.useState)(null),[h,f]=(0,a.useState)(!1),[m,p]=(0,a.useState)(!1),[g,v]=(0,a.useState)(!1),[y,x]=(0,a.useState)(!1),[b,w]=(0,a.useState)(""),[_,j]=(0,a.useState)(""),[k,N]=(0,a.useState)(new Date),[S,C]=(0,a.useState)(""),[E,T]=(0,a.useState)(!1),P=(0,a.useMemo)(()=>n.payments||[],[n.payments]),O=0===P.length,L=(0,a.useMemo)(()=>P.filter(e=>{const t=""===l||e.status===l,r=""===i||e.student_name.toLowerCase().includes(i.toLowerCase())||e.student_email.toLowerCase().includes(i.toLowerCase())||e.student_id.toLowerCase().includes(i.toLowerCase())||e.classroom_name.toLowerCase().includes(i.toLowerCase());return t&&r}),[P,l,i]),I=async e=>{if(d(e),f(!0),C(""),T(!1),e.screenshot_url){T(!0);try{const{data:t,error:r}=await En.storage.from("payment-proofs").createSignedUrl(e.screenshot_url,3600);r?(console.error("Error creating signed URL:",r),console.error("Screenshot path:",e.screenshot_url)):null!==t&&void 0!==t&&t.signedUrl&&C(t.signedUrl)}catch(t){console.error("Exception loading screenshot:",t),console.error("Screenshot path attempted:",e.screenshot_url)}finally{T(!1)}}},A=e=>{d(e);const t=new Date,r=new Date(t.getFullYear(),t.getMonth()+e.time_period_months,t.getDate());w(r.toISOString().split("T")[0]),p(!0)},R=e=>new Date(e).toLocaleDateString("en-IN",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),D=e=>{const t="px-3 py-1 rounded-full text-sm font-medium";switch(e){case"pending":return(0,Tn.jsx)("span",{className:"".concat(t," bg-yellow-100 text-yellow-800"),children:"Pending"});case"approved":case"completed":return(0,Tn.jsx)("span",{className:"".concat(t," bg-green-100 text-green-800"),children:"Completed"});case"declined":return(0,Tn.jsx)("span",{className:"".concat(t," bg-red-100 text-red-800"),children:"Declined"});default:return(0,Tn.jsx)("span",{className:"".concat(t," bg-gray-100 text-gray-800"),children:e})}};return(0,Tn.jsxs)("div",{className:"min-h-screen bg-gray-100",children:[(0,Tn.jsx)("header",{className:"bg-white shadow",children:(0,Tn.jsxs)("div",{className:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8",children:[(0,Tn.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Tn.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Payment Approvals"}),(0,Tn.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Tn.jsxs)("span",{className:"text-gray-700",children:["Welcome, ",null===e||void 0===e?void 0:e.email]}),(0,Tn.jsx)("button",{onClick:async()=>{await t(),window.location.href="/"},className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-md",children:"Logout"})]})]}),(0,Tn.jsx)("nav",{className:"mt-6",children:(0,Tn.jsxs)("div",{className:"flex space-x-8",children:[(0,Tn.jsx)("button",{onClick:()=>r("/"),className:"text-gray-500 hover:text-gray-700 px-3 py-2 font-medium text-sm",children:"Dashboard"}),(0,Tn.jsx)("button",{onClick:()=>r("/classrooms"),className:"text-gray-500 hover:text-gray-700 px-3 py-2 font-medium text-sm",children:"Classrooms"}),(0,Tn.jsx)("button",{onClick:()=>r("/teachers"),className:"text-gray-500 hover:text-gray-700 px-3 py-2 font-medium text-sm",children:"Teachers"}),(0,Tn.jsx)("button",{onClick:()=>r("/students"),className:"text-gray-500 hover:text-gray-700 px-3 py-2 font-medium text-sm",children:"Students"}),(0,Tn.jsx)("button",{onClick:()=>r("/payment-approvals"),className:"border-b-2 border-blue-500 text-blue-600 px-3 py-2 font-medium text-sm",children:"Payment Approvals"}),(0,Tn.jsx)("button",{onClick:()=>r("/grade-pricing"),className:"text-gray-500 hover:text-gray-700 px-3 py-2 font-medium text-sm",children:"Grade Pricing"})]})})]})}),(0,Tn.jsxs)("main",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:[(0,Tn.jsx)("div",{className:"bg-white shadow rounded-lg p-6 mb-6",children:(0,Tn.jsxs)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3",children:[(0,Tn.jsxs)("div",{children:[(0,Tn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search"}),(0,Tn.jsx)("input",{type:"text",placeholder:"Student name, email, or ID...",value:i,onChange:e=>o(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,Tn.jsxs)("div",{children:[(0,Tn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),(0,Tn.jsxs)("select",{value:l,onChange:e=>c(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,Tn.jsx)("option",{value:"",children:"All Statuses"}),(0,Tn.jsx)("option",{value:"pending",children:"Pending"}),(0,Tn.jsx)("option",{value:"completed",children:"Completed"}),(0,Tn.jsx)("option",{value:"declined",children:"Declined"})]})]}),(0,Tn.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[(0,Tn.jsx)("div",{className:"text-sm font-medium text-gray-700",children:"Summary"}),(0,Tn.jsx)("div",{className:"mt-2 text-2xl font-bold text-blue-600",children:L.length}),(0,Tn.jsx)("div",{className:"text-xs text-gray-600",children:"Total Payments"})]})]})}),(0,Tn.jsxs)("div",{className:"mb-6 flex space-x-4",children:[(0,Tn.jsxs)("button",{onClick:()=>c("pending"),className:"px-4 py-2 rounded-lg font-medium text-sm ".concat("pending"===l?"bg-yellow-100 text-yellow-800":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:["Pending (",P.filter(e=>"pending"===e.status).length,")"]}),(0,Tn.jsxs)("button",{onClick:()=>c("completed"),className:"px-4 py-2 rounded-lg font-medium text-sm ".concat("completed"===l?"bg-green-100 text-green-800":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:["Approved (",P.filter(e=>"completed"===e.status).length,")"]}),(0,Tn.jsxs)("button",{onClick:()=>c("declined"),className:"px-4 py-2 rounded-lg font-medium text-sm ".concat("declined"===l?"bg-red-100 text-red-800":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:["Declined (",P.filter(e=>"declined"===e.status).length,")"]}),(0,Tn.jsx)("button",{onClick:()=>c(""),className:"px-4 py-2 rounded-lg font-medium text-sm ".concat(""===l?"bg-blue-100 text-blue-800":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:"All"})]}),(0,Tn.jsx)("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:O?(0,Tn.jsx)("div",{className:"p-6 text-center text-gray-500",children:"Loading payment requests..."}):0===L.length?(0,Tn.jsx)("div",{className:"p-6 text-center text-gray-500",children:"No payment requests found"}):(0,Tn.jsx)("div",{className:"overflow-x-auto",children:(0,Tn.jsxs)("table",{className:"w-full",children:[(0,Tn.jsx)("thead",{className:"bg-gray-50 border-b border-gray-200",children:(0,Tn.jsxs)("tr",{children:[(0,Tn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student"}),(0,Tn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Phone"}),(0,Tn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Classroom"}),(0,Tn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Grade"}),(0,Tn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),(0,Tn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Period"}),(0,Tn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Uploaded"}),(0,Tn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,Tn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"More Details"}),(0,Tn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,Tn.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:L.map(e=>(0,Tn.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Tn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Tn.jsxs)("div",{children:[(0,Tn.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.student_name}),(0,Tn.jsx)("div",{className:"text-sm text-gray-500",children:e.student_email})]})}),(0,Tn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:e.student_phone}),(0,Tn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.classroom_name}),(0,Tn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Tn.jsx)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-indigo-100 text-indigo-800",children:e.classroom_grade})}),(0,Tn.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,Tn.jsxs)("div",{className:"text-sm font-semibold text-gray-900",children:["\u20b9",e.amount.toLocaleString()]}),(0,Tn.jsx)("div",{className:"text-xs text-gray-500",children:e.currency})]}),(0,Tn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.time_period}),(0,Tn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:R(e.uploaded_at)}),(0,Tn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:D(e.status)}),(0,Tn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:(0,Tn.jsx)("button",{onClick:()=>{d(e),x(!0)},className:"inline-flex items-center px-3 py-1 rounded-md text-sm font-medium bg-purple-50 text-purple-700 hover:bg-purple-100",children:"View IDs"})}),(0,Tn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:"pending"===e.status?(0,Tn.jsxs)("div",{className:"space-x-2",children:[(0,Tn.jsx)("button",{onClick:()=>I(e),className:"inline-flex items-center px-3 py-1 rounded-md text-sm font-medium bg-blue-50 text-blue-700 hover:bg-blue-100",children:"View"}),(0,Tn.jsx)("button",{onClick:()=>A(e),className:"inline-flex items-center px-3 py-1 rounded-md text-sm font-medium bg-green-50 text-green-700 hover:bg-green-100",children:"Approve"})]}):(0,Tn.jsx)("button",{onClick:()=>I(e),className:"inline-flex items-center px-3 py-1 rounded-md text-sm font-medium bg-gray-50 text-gray-700 hover:bg-gray-100",children:"View"})})]},e.id))})]})})})]}),h&&u&&(0,Tn.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,Tn.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-96 overflow-y-auto",children:[(0,Tn.jsxs)("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex justify-between items-center",children:[(0,Tn.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Payment Details"}),(0,Tn.jsx)("button",{onClick:()=>{f(!1),j("")},className:"text-gray-400 hover:text-gray-600",children:"\u2715"})]}),(0,Tn.jsxs)("div",{className:"p-6 space-y-4",children:[(0,Tn.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,Tn.jsx)("h3",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Student Information"}),(0,Tn.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Tn.jsxs)("div",{children:[(0,Tn.jsx)("div",{className:"text-xs text-gray-600",children:"Name"}),(0,Tn.jsx)("div",{className:"text-sm font-medium text-gray-900",children:u.student_name})]}),(0,Tn.jsxs)("div",{children:[(0,Tn.jsx)("div",{className:"text-xs text-gray-600",children:"Email"}),(0,Tn.jsx)("div",{className:"text-sm font-medium text-gray-900",children:u.student_email})]}),(0,Tn.jsxs)("div",{children:[(0,Tn.jsx)("div",{className:"text-xs text-gray-600",children:"Student ID"}),(0,Tn.jsx)("div",{className:"text-sm font-medium text-gray-900",children:u.student_id})]}),(0,Tn.jsxs)("div",{children:[(0,Tn.jsx)("div",{className:"text-xs text-gray-600",children:"Classroom"}),(0,Tn.jsx)("div",{className:"text-sm font-medium text-gray-900",children:u.classroom_name})]}),(0,Tn.jsxs)("div",{children:[(0,Tn.jsx)("div",{className:"text-xs text-gray-600",children:"Grade"}),(0,Tn.jsx)("div",{className:"text-sm font-medium text-gray-900",children:(0,Tn.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-indigo-100 text-indigo-800",children:u.classroom_grade})})]})]})]}),(0,Tn.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,Tn.jsx)("h3",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Payment Information"}),(0,Tn.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Tn.jsxs)("div",{children:[(0,Tn.jsx)("div",{className:"text-xs text-gray-600",children:"Amount"}),(0,Tn.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:["\u20b9",u.amount.toLocaleString()]})]}),(0,Tn.jsxs)("div",{children:[(0,Tn.jsx)("div",{className:"text-xs text-gray-600",children:"Time Period"}),(0,Tn.jsx)("div",{className:"text-sm font-medium text-gray-900",children:u.time_period})]}),(0,Tn.jsxs)("div",{children:[(0,Tn.jsx)("div",{className:"text-xs text-gray-600",children:"Payment Method"}),(0,Tn.jsx)("div",{className:"text-sm font-medium text-gray-900",children:u.payment_method})]}),(0,Tn.jsxs)("div",{children:[(0,Tn.jsx)("div",{className:"text-xs text-gray-600",children:"Transaction ID"}),(0,Tn.jsx)("div",{className:"text-sm font-medium text-gray-900",children:u.transaction_id})]})]})]}),(0,Tn.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,Tn.jsx)("h3",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Payment Screenshot"}),E?(0,Tn.jsx)("div",{className:"bg-gray-200 rounded-lg h-48 flex items-center justify-center",children:(0,Tn.jsxs)("div",{className:"text-center text-gray-600",children:[(0,Tn.jsx)("div",{className:"animate-spin text-2xl mb-2",children:"\u27f3"}),(0,Tn.jsx)("p",{className:"text-sm",children:"Loading screenshot..."})]})}):S?(0,Tn.jsxs)("div",{className:"bg-white rounded-lg overflow-hidden border border-gray-200",children:[(0,Tn.jsx)("img",{src:S,alt:"Payment proof",className:"w-full h-auto max-h-96 object-contain"}),(0,Tn.jsx)("a",{href:S,target:"_blank",rel:"noopener noreferrer",className:"block text-center py-2 text-blue-600 hover:text-blue-800 text-sm font-medium hover:bg-blue-50 border-t border-gray-200",children:"View Full Size \u2197"})]}):(0,Tn.jsx)("div",{className:"bg-gray-200 rounded-lg h-48 flex items-center justify-center",children:(0,Tn.jsxs)("div",{className:"text-center text-gray-600",children:[(0,Tn.jsx)("div",{className:"text-lg font-medium mb-2",children:"\ud83d\udcf7"}),(0,Tn.jsx)("div",{className:"text-sm",children:"No screenshot available"})]})})]}),(0,Tn.jsxs)("div",{className:"text-sm text-gray-600",children:["Uploaded on: ",R(u.uploaded_at)]}),u.remarks&&(0,Tn.jsxs)("div",{className:"bg-blue-50 border border-blue-200 p-4 rounded-lg",children:[(0,Tn.jsx)("h3",{className:"text-sm font-semibold text-blue-900 mb-2",children:"Remarks"}),(0,Tn.jsx)("p",{className:"text-sm text-blue-800",children:u.remarks})]}),"declined"===u.status&&u.decline_reason&&(0,Tn.jsxs)("div",{className:"bg-red-50 border border-red-200 p-4 rounded-lg",children:[(0,Tn.jsx)("h3",{className:"text-sm font-semibold text-red-900 mb-2",children:"Decline Reason"}),(0,Tn.jsx)("p",{className:"text-sm text-red-800",children:u.decline_reason})]}),"approved"===u.status&&(0,Tn.jsxs)("div",{className:"bg-green-50 border border-green-200 p-4 rounded-lg",children:[(0,Tn.jsx)("h3",{className:"text-sm font-semibold text-green-900 mb-2",children:"Approval Information"}),(0,Tn.jsxs)("div",{className:"text-sm text-green-800 space-y-1",children:[(0,Tn.jsxs)("div",{children:["Approved by: ",u.approved_by]}),(0,Tn.jsxs)("div",{children:["Approved on: ",R(u.approved_at)]}),(0,Tn.jsxs)("div",{children:["Expires on: ",R(u.expire_at)]})]})]})]}),"pending"===u.status&&(0,Tn.jsxs)("div",{className:"sticky bottom-0 bg-gray-50 border-t border-gray-200 px-6 py-4 flex justify-end space-x-3",children:[(0,Tn.jsx)("button",{onClick:()=>{f(!1),j("")},className:"px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Close"}),(0,Tn.jsx)("button",{onClick:()=>{f(!1),d(u),j(""),v(!0)},className:"px-4 py-2 border border-red-300 rounded-lg text-sm font-medium text-red-700 hover:bg-red-50",children:"Decline"}),(0,Tn.jsx)("button",{onClick:()=>{f(!1),A(u)},className:"px-4 py-2 bg-green-600 rounded-lg text-sm font-medium text-white hover:bg-green-700",children:"Approve"})]}),"pending"!==u.status&&(0,Tn.jsx)("div",{className:"sticky bottom-0 bg-gray-50 border-t border-gray-200 px-6 py-4 flex justify-end",children:(0,Tn.jsx)("button",{onClick:()=>{f(!1),j("")},className:"px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Close"})})]})}),y&&u&&(0,Tn.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,Tn.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full",children:[(0,Tn.jsxs)("div",{className:"bg-gradient-to-r from-purple-500 to-purple-600 px-6 py-4 flex justify-between items-center rounded-t-lg",children:[(0,Tn.jsx)("h2",{className:"text-xl font-bold text-white",children:"Payment Details IDs"}),(0,Tn.jsx)("button",{onClick:()=>x(!1),className:"text-white hover:text-gray-100",children:"\u2715"})]}),(0,Tn.jsxs)("div",{className:"p-6 space-y-6",children:[(0,Tn.jsxs)("div",{children:[(0,Tn.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Student ID"}),(0,Tn.jsx)("div",{className:"bg-gray-50 p-3 rounded-lg border border-gray-200",children:(0,Tn.jsx)("p",{className:"text-sm font-mono text-gray-900 break-all",children:u.student_id})})]}),(0,Tn.jsxs)("div",{children:[(0,Tn.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Classroom ID"}),(0,Tn.jsx)("div",{className:"bg-gray-50 p-3 rounded-lg border border-gray-200",children:(0,Tn.jsx)("p",{className:"text-sm font-mono text-gray-900 break-all",children:u.classroom_id})})]}),(0,Tn.jsxs)("div",{children:[(0,Tn.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Payment ID"}),(0,Tn.jsx)("div",{className:"bg-gray-50 p-3 rounded-lg border border-gray-200",children:(0,Tn.jsx)("p",{className:"text-sm font-mono text-gray-900 break-all",children:u.payment_id})})]})]}),(0,Tn.jsx)("div",{className:"bg-gray-50 border-t border-gray-200 px-6 py-4 flex justify-end rounded-b-lg",children:(0,Tn.jsx)("button",{onClick:()=>x(!1),className:"px-4 py-2 bg-purple-600 rounded-lg text-sm font-medium text-white hover:bg-purple-700",children:"Close"})})]})}),m&&u&&(0,Tn.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,Tn.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full",children:[(0,Tn.jsxs)("div",{className:"bg-white border-b border-gray-200 px-6 py-4 flex justify-between items-center rounded-t-lg",children:[(0,Tn.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Approve Payment"}),(0,Tn.jsx)("button",{onClick:()=>{p(!1),w("")},className:"text-gray-400 hover:text-gray-600",children:"\u2715"})]}),(0,Tn.jsxs)("div",{className:"p-6 space-y-4",children:[(0,Tn.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[(0,Tn.jsx)("h3",{className:"text-sm font-semibold text-blue-900 mb-3",children:"Payment Summary"}),(0,Tn.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,Tn.jsxs)("div",{className:"flex justify-between",children:[(0,Tn.jsx)("span",{className:"text-blue-800",children:"Student:"}),(0,Tn.jsx)("span",{className:"font-medium text-blue-900",children:u.student_name})]}),(0,Tn.jsxs)("div",{className:"flex justify-between",children:[(0,Tn.jsx)("span",{className:"text-blue-800",children:"Classroom:"}),(0,Tn.jsx)("span",{className:"font-medium text-blue-900",children:u.classroom_name})]}),(0,Tn.jsxs)("div",{className:"flex justify-between",children:[(0,Tn.jsx)("span",{className:"text-blue-800",children:"Amount:"}),(0,Tn.jsxs)("span",{className:"font-medium text-blue-900",children:["\u20b9",u.amount.toLocaleString()]})]}),(0,Tn.jsxs)("div",{className:"flex justify-between",children:[(0,Tn.jsx)("span",{className:"text-blue-800",children:"Time Period:"}),(0,Tn.jsx)("span",{className:"font-medium text-blue-900",children:u.time_period})]})]})]}),(0,Tn.jsxs)("div",{children:[(0,Tn.jsxs)("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:["Set Expiry Date ",(0,Tn.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,Tn.jsxs)("div",{className:"bg-gradient-to-br from-green-50 to-blue-50 p-4 rounded-lg border border-green-200",children:[(0,Tn.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Tn.jsx)("button",{onClick:()=>N(new Date(k.getFullYear(),k.getMonth()-1)),className:"p-2 hover:bg-white rounded-lg transition",children:"\u25c0"}),(0,Tn.jsx)("h3",{className:"text-sm font-semibold text-gray-800",children:k.toLocaleDateString("en-IN",{month:"long",year:"numeric"})}),(0,Tn.jsx)("button",{onClick:()=>N(new Date(k.getFullYear(),k.getMonth()+1)),className:"p-2 hover:bg-white rounded-lg transition",children:"\u25b6"})]}),(0,Tn.jsx)("div",{className:"grid grid-cols-7 gap-1 mb-2",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(e=>(0,Tn.jsx)("div",{className:"text-center text-xs font-semibold text-gray-600 py-2",children:e},e))}),(0,Tn.jsx)("div",{className:"grid grid-cols-7 gap-1",children:(()=>{const e=k.getFullYear(),t=k.getMonth(),r=new Date(e,t,1),n=new Date(e,t+1,0).getDate(),a=r.getDay(),s=new Date;s.setHours(0,0,0,0);const i=[];for(let o=0;o<a;o++)i.push((0,Tn.jsx)("div",{className:"text-center py-2"},"empty-".concat(o)));for(let o=1;o<=n;o++){const r=new Date(e,t,o),n=r.toISOString().split("T")[0],a=r<s,l=b===n;i.push((0,Tn.jsx)("button",{onClick:()=>!a&&w(n),disabled:a,className:"py-2 rounded text-sm font-medium transition ".concat(a?"text-gray-300 cursor-not-allowed":l?"bg-green-600 text-white shadow-lg scale-105":"bg-white text-gray-700 hover:bg-green-100 border border-gray-200"),children:o},o))}return i})()})]}),b&&(0,Tn.jsx)("div",{className:"mt-3 p-3 bg-green-50 border border-green-200 rounded-lg",children:(0,Tn.jsxs)("p",{className:"text-sm text-green-800",children:[(0,Tn.jsx)("span",{className:"font-semibold",children:"Selected:"})," ",new Date(b).toLocaleDateString("en-IN",{weekday:"short",year:"numeric",month:"long",day:"numeric"})]})}),(0,Tn.jsx)("p",{className:"mt-2 text-xs text-gray-600",children:"\u2139\ufe0f Select the date when this student's access should expire"})]}),(0,Tn.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 p-4 rounded-lg",children:(0,Tn.jsxs)("p",{className:"text-sm text-yellow-800",children:[(0,Tn.jsx)("span",{className:"font-semibold",children:"Note:"})," Once approved, the student will get access to the classroom for the selected time period."]})})]}),(0,Tn.jsxs)("div",{className:"bg-gray-50 border-t border-gray-200 px-6 py-4 flex justify-end space-x-3 rounded-b-lg",children:[(0,Tn.jsx)("button",{onClick:()=>{p(!1),w("")},className:"px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Cancel"}),(0,Tn.jsx)("button",{onClick:async()=>{if(b)try{const{error:e}=await En.from("payments").update({status:"completed",expire_at:b,updated_at:(new Date).toISOString()}).eq("id",u.id);if(e)return console.error("Error approving payment:",e),void alert("Failed to approve payment: "+e.message);alert("Payment approved successfully!"),p(!1),w(""),s("payments")}catch(e){console.error("Error:",e),alert("An error occurred while approving the payment")}else alert("Please select an expiry date")},className:"px-4 py-2 bg-green-600 rounded-lg text-sm font-medium text-white hover:bg-green-700",children:"Confirm Approval"})]})]})}),g&&u&&(0,Tn.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,Tn.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full",children:[(0,Tn.jsxs)("div",{className:"bg-white border-b border-gray-200 px-6 py-4 flex justify-between items-center rounded-t-lg",children:[(0,Tn.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Decline Payment"}),(0,Tn.jsx)("button",{onClick:()=>{v(!1),j("")},className:"text-gray-400 hover:text-gray-600",children:"\u2715"})]}),(0,Tn.jsxs)("div",{className:"p-6 space-y-4",children:[(0,Tn.jsxs)("div",{className:"bg-red-50 p-4 rounded-lg",children:[(0,Tn.jsx)("h3",{className:"text-sm font-semibold text-red-900 mb-3",children:"Payment Details"}),(0,Tn.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,Tn.jsxs)("div",{className:"flex justify-between",children:[(0,Tn.jsx)("span",{className:"text-red-800",children:"Student:"}),(0,Tn.jsx)("span",{className:"font-medium text-red-900",children:u.student_name})]}),(0,Tn.jsxs)("div",{className:"flex justify-between",children:[(0,Tn.jsx)("span",{className:"text-red-800",children:"Classroom:"}),(0,Tn.jsx)("span",{className:"font-medium text-red-900",children:u.classroom_name})]}),(0,Tn.jsxs)("div",{className:"flex justify-between",children:[(0,Tn.jsx)("span",{className:"text-red-800",children:"Amount:"}),(0,Tn.jsxs)("span",{className:"font-medium text-red-900",children:["\u20b9",u.amount.toLocaleString()]})]})]})]}),(0,Tn.jsxs)("div",{children:[(0,Tn.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Reason for Declining ",(0,Tn.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,Tn.jsx)("textarea",{value:_,onChange:e=>j(e.target.value),placeholder:"e.g., Screenshot is unclear, Transaction ID not visible, Amount mismatch, etc.",rows:"4",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent resize-none"}),(0,Tn.jsx)("p",{className:"mt-2 text-xs text-gray-600",children:"Provide a clear reason so the student can resubmit with correct information"})]}),(0,Tn.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 p-4 rounded-lg",children:(0,Tn.jsxs)("p",{className:"text-sm text-yellow-800",children:[(0,Tn.jsx)("span",{className:"font-semibold",children:"Note:"})," The student will be notified of the decline and can resubmit their payment."]})})]}),(0,Tn.jsxs)("div",{className:"bg-gray-50 border-t border-gray-200 px-6 py-4 flex justify-end space-x-3 rounded-b-lg",children:[(0,Tn.jsx)("button",{onClick:()=>{v(!1),j("")},className:"px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Cancel"}),(0,Tn.jsx)("button",{onClick:async()=>{if(_.trim())try{const{error:e}=await En.from("payments").update({status:"declined",remarks:_,updated_at:(new Date).toISOString()}).eq("id",u.id);if(e)return console.error("Error declining payment:",e),void alert("Failed to decline payment: "+e.message);alert("Payment declined!"),f(!1),v(!1),j(""),s("payments")}catch(e){console.error("Error:",e),alert("An error occurred while declining the payment")}else alert("Please provide a reason for declining")},className:"px-4 py-2 bg-red-600 rounded-lg text-sm font-medium text-white hover:bg-red-700",children:"Confirm Decline"})]})]})})]})},$n=["ICSE","CBSE","IB"],Jn=[2,3,4,5,6,7,8,9,10,11,12],Qn=()=>{const{user:e,logout:t}=Ln(),{adminData:r,refreshData:n}=An(),s=re(),[i,o]=(0,a.useState)(null),[l,c]=(0,a.useState)(!1),[u,d]=(0,a.useState)(""),[h,f]=(0,a.useState)(""),[m,p]=(0,a.useState)(""),[g,v]=(0,a.useState)(""),[y,x]=(0,a.useState)({grade_level:"",board:"",subject:"All",fee_per_month:"",duration_per_month:"",fee_per_hour:""}),b=(0,a.useMemo)(()=>r.pricingRates||[],[r.pricingRates]),w=0===b.length,_=b.filter(e=>{const t=!m||e.grade_level.toString()===m,r=!g||e.board===g;return t&&r}),j=()=>{o(null),c(!1),x({grade_level:"",board:"",subject:"All",fee_per_month:"",duration_per_month:"",fee_per_hour:""})},k=e=>{const{name:t,value:r}=e.target;x(e=>Te(Te({},e),{},{[t]:r}))};return(0,Tn.jsxs)("div",{className:"min-h-screen bg-gray-100",children:[(0,Tn.jsx)("header",{className:"bg-white shadow",children:(0,Tn.jsxs)("div",{className:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8",children:[(0,Tn.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Tn.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Grade & Subject Pricing"}),(0,Tn.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Tn.jsxs)("span",{className:"text-gray-700",children:["Welcome, ",null===e||void 0===e?void 0:e.email]}),(0,Tn.jsx)("button",{onClick:async()=>{await t(),window.location.href="/"},className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-md",children:"Logout"})]})]}),(0,Tn.jsx)("nav",{className:"mt-6",children:(0,Tn.jsxs)("div",{className:"flex space-x-8",children:[(0,Tn.jsx)("button",{onClick:()=>s("/"),className:"text-gray-500 hover:text-gray-700 px-3 py-2 font-medium text-sm",children:"Dashboard"}),(0,Tn.jsx)("button",{onClick:()=>s("/classrooms"),className:"text-gray-500 hover:text-gray-700 px-3 py-2 font-medium text-sm",children:"Classrooms"}),(0,Tn.jsx)("button",{onClick:()=>s("/teachers"),className:"text-gray-500 hover:text-gray-700 px-3 py-2 font-medium text-sm",children:"Teachers"}),(0,Tn.jsx)("button",{onClick:()=>s("/students"),className:"text-gray-500 hover:text-gray-700 px-3 py-2 font-medium text-sm",children:"Students"}),(0,Tn.jsx)("button",{onClick:()=>s("/payment-approvals"),className:"text-gray-500 hover:text-gray-700 px-3 py-2 font-medium text-sm",children:"Payment Approvals"}),(0,Tn.jsx)("button",{onClick:()=>s("/grade-pricing"),className:"border-b-2 border-blue-500 text-blue-600 px-3 py-2 font-medium text-sm",children:"Grade Pricing"})]})})]})}),(0,Tn.jsxs)("main",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:[u&&(0,Tn.jsx)("div",{className:"mb-4 p-4 bg-green-50 border border-green-200 text-green-700 rounded-lg",children:u}),h&&(0,Tn.jsx)("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 text-red-700 rounded-lg",children:h}),(0,Tn.jsx)("div",{className:"mb-6",children:(0,Tn.jsx)("button",{onClick:()=>c(!0),className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg font-medium",children:"Add New Pricing Entry"})}),(0,Tn.jsx)("div",{className:"bg-white shadow rounded-lg p-4 mb-6",children:(0,Tn.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Tn.jsxs)("div",{children:[(0,Tn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Filter by Grade"}),(0,Tn.jsxs)("select",{value:m,onChange:e=>p(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[(0,Tn.jsx)("option",{value:"",children:"All Grades"}),Jn.map(e=>(0,Tn.jsxs)("option",{value:e,children:["Grade ",e]},e))]})]}),(0,Tn.jsxs)("div",{children:[(0,Tn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Filter by Board"}),(0,Tn.jsxs)("select",{value:g,onChange:e=>v(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[(0,Tn.jsx)("option",{value:"",children:"All Boards"}),$n.map(e=>(0,Tn.jsx)("option",{value:e,children:e},e))]})]})]})}),(i||l)&&(0,Tn.jsxs)("div",{className:"bg-white shadow rounded-lg p-6 mb-6",children:[(0,Tn.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:i?"Edit Pricing":"Add New Pricing Entry"}),(0,Tn.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Tn.jsxs)("div",{children:[(0,Tn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Grade Level *"}),(0,Tn.jsxs)("select",{name:"grade_level",value:y.grade_level,onChange:k,disabled:!!i,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-100",children:[(0,Tn.jsx)("option",{value:"",children:"Select Grade"}),Jn.map(e=>(0,Tn.jsxs)("option",{value:e,children:["Grade ",e]},e))]})]}),(0,Tn.jsxs)("div",{children:[(0,Tn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Board *"}),(0,Tn.jsxs)("select",{name:"board",value:y.board,onChange:k,disabled:!!i,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-100",children:[(0,Tn.jsx)("option",{value:"",children:"Select Board"}),$n.map(e=>(0,Tn.jsx)("option",{value:e,children:e},e))]})]}),(0,Tn.jsxs)("div",{children:[(0,Tn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Subject"}),(0,Tn.jsx)("input",{type:"text",name:"subject",value:y.subject,onChange:k,placeholder:"e.g., All",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,Tn.jsxs)("div",{children:[(0,Tn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fee Per Month (\u20b9) *"}),(0,Tn.jsx)("input",{type:"number",name:"fee_per_month",value:y.fee_per_month,onChange:k,placeholder:"e.g., 1400",step:"0.01",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,Tn.jsxs)("div",{children:[(0,Tn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Duration Per Month (hours) *"}),(0,Tn.jsx)("input",{type:"number",name:"duration_per_month",value:y.duration_per_month,onChange:k,placeholder:"e.g., 8",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,Tn.jsxs)("div",{className:"md:col-span-2",children:[(0,Tn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fee Per Hour (\u20b9)"}),(0,Tn.jsx)("input",{type:"number",name:"fee_per_hour",value:y.fee_per_hour,onChange:k,placeholder:"e.g., 175",step:"0.01",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),(0,Tn.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Auto-calculated if left empty"})]})]}),(0,Tn.jsxs)("div",{className:"mt-6 flex gap-3",children:[(0,Tn.jsx)("button",{onClick:async()=>{try{if(f(""),!y.grade_level||!y.board||!y.fee_per_month||!y.duration_per_month)return void f("Please fill in all required fields");if(i){const{error:e}=await En.from("grade_subject_pricing").update({fee_per_month:parseFloat(y.fee_per_month),duration_per_month:parseInt(y.duration_per_month),fee_per_hour:parseFloat(y.fee_per_hour),updated_at:(new Date).toISOString()}).eq("id",i);if(e)throw e;d("Pricing updated successfully")}else{console.log("Adding new pricing entry:",y);const{data:e,error:t}=await En.from("grade_subject_pricing").insert({grade_level:parseInt(y.grade_level),board:y.board,subject:y.subject,fee_per_month:parseFloat(y.fee_per_month),duration_per_month:parseInt(y.duration_per_month),fee_per_hour:parseFloat(y.fee_per_hour),is_active:!0,created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()}).select();if(t)throw console.error("Insert error:",t),t;console.log("New pricing entry created:",e),d("Pricing added successfully")}setTimeout(()=>d(""),3e3),j(),await n("pricing")}catch(h){console.error("Error saving pricing:",h),f(h.message||"Failed to save pricing")}},className:"bg-green-500 hover:bg-green-600 text-white px-6 py-2 rounded-lg font-medium",children:"Save"}),(0,Tn.jsx)("button",{onClick:j,className:"bg-gray-300 hover:bg-gray-400 text-gray-800 px-6 py-2 rounded-lg font-medium",children:"Cancel"})]})]}),(0,Tn.jsx)("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:w?(0,Tn.jsx)("div",{className:"p-6 text-center text-gray-500",children:"Loading pricing data..."}):0===_.length?(0,Tn.jsx)("div",{className:"p-6 text-center text-gray-500",children:"No pricing entries found"}):(0,Tn.jsx)("div",{className:"overflow-x-auto",children:(0,Tn.jsxs)("table",{className:"w-full",children:[(0,Tn.jsx)("thead",{className:"bg-gray-50 border-b border-gray-200",children:(0,Tn.jsxs)("tr",{children:[(0,Tn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Grade"}),(0,Tn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Board"}),(0,Tn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Subject"}),(0,Tn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fee/Month"}),(0,Tn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Duration (hrs)"}),(0,Tn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fee/Hour"}),(0,Tn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,Tn.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:_.map(e=>(0,Tn.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Tn.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:["Grade ",e.grade_level]}),(0,Tn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-blue-600",children:e.board}),(0,Tn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:e.subject}),(0,Tn.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-gray-900",children:["\u20b9",e.fee_per_month]}),(0,Tn.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:[e.duration_per_month," hrs"]}),(0,Tn.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:["\u20b9",parseFloat(e.fee_per_hour).toFixed(2)]}),(0,Tn.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm space-x-2",children:[(0,Tn.jsx)("button",{onClick:()=>(e=>{o(e.id),x({grade_level:e.grade_level.toString(),board:e.board,subject:e.subject,fee_per_month:e.fee_per_month,duration_per_month:e.duration_per_month,fee_per_hour:e.fee_per_hour})})(e),className:"bg-blue-100 hover:bg-blue-200 text-blue-700 px-3 py-1 rounded text-xs font-medium",children:"Edit"}),(0,Tn.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this pricing entry?"))try{f("");const{error:t}=await En.from("grade_subject_pricing").delete().eq("id",e);if(t)throw t;d("Pricing deleted successfully"),setTimeout(()=>d(""),3e3),await n("pricing")}catch(h){console.error("Error deleting pricing:",h),f("Failed to delete pricing entry")}})(e.id),className:"bg-red-100 hover:bg-red-200 text-red-700 px-3 py-1 rounded text-xs font-medium",children:"Delete"})]})]},e.id))})]})})}),(0,Tn.jsxs)("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-6",children:[(0,Tn.jsx)("h3",{className:"font-semibold text-blue-900 mb-2",children:"How Salary is Calculated"}),(0,Tn.jsx)("p",{className:"text-sm text-blue-800",children:"Teacher salary is based on the number of students in each classroom and the pricing for that grade level:"}),(0,Tn.jsxs)("ul",{className:"mt-2 text-sm text-blue-800 space-y-1 ml-4",children:[(0,Tn.jsx)("li",{children:"\u2022 1st Student: 75% of grade fee"}),(0,Tn.jsx)("li",{children:"\u2022 2nd Student: 50% of grade fee"}),(0,Tn.jsx)("li",{children:"\u2022 3rd Student: 25% of grade fee"}),(0,Tn.jsx)("li",{children:"\u2022 4th Student: 10% of grade fee"}),(0,Tn.jsx)("li",{children:"\u2022 5th+ Students: 5% of grade fee each"})]})]})]})]})};const Yn=function(){return(0,Tn.jsx)(_e,{children:(0,Tn.jsx)(On,{children:(0,Tn.jsx)(Rn,{children:(0,Tn.jsx)("div",{className:"App",children:(0,Tn.jsxs)(xe,{children:[(0,Tn.jsx)(ve,{path:"/",element:(0,Tn.jsx)(Mn,{children:(0,Tn.jsx)(zn,{})})}),(0,Tn.jsx)(ve,{path:"/classrooms",element:(0,Tn.jsx)(Mn,{children:(0,Tn.jsx)(Hn,{})})}),(0,Tn.jsx)(ve,{path:"/teachers",element:(0,Tn.jsx)(Mn,{children:(0,Tn.jsx)(Vn,{})})}),(0,Tn.jsx)(ve,{path:"/students",element:(0,Tn.jsx)(Mn,{children:(0,Tn.jsx)(Gn,{})})}),(0,Tn.jsx)(ve,{path:"/payment-approvals",element:(0,Tn.jsx)(Mn,{children:(0,Tn.jsx)(Kn,{})})}),(0,Tn.jsx)(ve,{path:"/grade-pricing",element:(0,Tn.jsx)(Mn,{children:(0,Tn.jsx)(Qn,{})})}),(0,Tn.jsx)(ve,{path:"*",element:(0,Tn.jsx)(ge,{to:"/",replace:!0})})]})})})})})};class Xn extends a.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){console.error("Uncaught error:",e,t),this.setState({error:e,errorInfo:t})}render(){return this.state.hasError?(0,Tn.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-100 p-4",children:(0,Tn.jsxs)("div",{className:"bg-white p-8 rounded-lg shadow-xl max-w-2xl w-full",children:[(0,Tn.jsx)("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Something went wrong"}),(0,Tn.jsx)("p",{className:"text-gray-600 mb-4",children:"The application crashed with the following error:"}),(0,Tn.jsx)("div",{className:"bg-gray-100 p-4 rounded overflow-auto mb-4 border border-gray-300",children:(0,Tn.jsx)("code",{className:"text-sm font-mono text-red-800",children:this.state.error&&this.state.error.toString()})}),(0,Tn.jsx)("p",{className:"text-gray-500 text-sm mb-2",children:"Stack Trace:"}),(0,Tn.jsx)("div",{className:"bg-gray-900 p-4 rounded overflow-auto max-h-64",children:(0,Tn.jsx)("code",{className:"text-xs font-mono text-green-400 whitespace-pre",children:this.state.errorInfo&&this.state.errorInfo.componentStack})}),(0,Tn.jsx)("button",{onClick:()=>window.location.reload(),className:"mt-6 bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition-colors",children:"Reload Page"})]})}):this.props.children}}const Zn=Xn;i.createRoot(document.getElementById("root")).render((0,Tn.jsx)(Zn,{children:(0,Tn.jsx)(Yn,{})}))})();
//# sourceMappingURL=main.45ceb8a3.js.map